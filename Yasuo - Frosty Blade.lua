assert(load(Base64Decode("ZnVuY3Rpb24gc3BsaXQocywgZGVsaW1pdGVyKQ0KICAgIGxvY2FsIHJlc3VsdCA9IHt9DQogICAgaWYgbm90IHMgb3Igbm90IGRlbGltaXRlciB0aGVuIHJldHVybiByZXN1bHQgZW5kDQogICAgZm9yIG1hdGNoIGluIChzLi5kZWxpbWl0ZXIpOmdtYXRjaCgiKC4tKSIuLmRlbGltaXRlcikgZG8NCiAgICAgICAgcmVzdWx0WyNyZXN1bHQgKyAxXSA9IG1hdGNoDQogICAgZW5kDQogICAgcmV0dXJuIHJlc3VsdA0KZW5kDQoNCmxvY2FsIGhvc3QgPSAic2Nvb3B5c2NyaXB0cy5jb20iDQpsb2NhbCBhdXRoID0gR2V0V2ViUmVzdWx0KGhvc3QsICIvZnJvc3R5YmxhZGUvdXNlcnMucGhwIikNCmxvY2FsIEF1dGhMaXN0ID0gc3BsaXQoYXV0aCwgIiwiKQ0KbG9jYWwgdXNlciA9IEdldFVzZXIoKTpsb3dlcigpDQpmdW5jdGlvbiBBdXRoKCkNCiAgZm9yIHMsIGdldHVzZXIgaW4gcGFpcnMoQXV0aExpc3QpIGRvDQogICAgaWYgZ2V0dXNlcjpsb3dlcigpID09IHVzZXIgdGhlbg0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogIGZvciBzLCBnZXR1c2VyIGluIHBhaXJzKEF1dGhMaXN0KSBkbw0KICAgIGlmIHVzZXIgPT0gZ2V0dXNlcjpsb3dlcigpIHRoZW4NCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KZW5kDQppZiBub3QgQXV0aCgpIHRoZW4NCiAgcHJpbnQoIltGcm9zdHkgQmxhZGVdOiBZb3UgY2FuJ3QgdXNlIHRoaXMgc2NyaXB0LiIpDQogIHByaW50KCJbRnJvc3R5IEJsYWRlXTogWW91IGFyZSBub3QgYXV0aGVkIikNCg0KICByZXR1cm4NCmVuZA0KcHJpbnQoIltGcm9zdHkgQmxhZGVdOiBBdXRoIGFzIDoiLi51c2VyLi4iLiIpDQpwcmludCgiR29vZCBMdWNrIDopIikNCmlmIG5vdCBBdXRoKCkgdGhlbg0KICByZXR1cm4NCmVuZA0KDQppZiBteUhlcm8uY2hhck5hbWUgfj0gIllhc3VvIiB0aGVuIHJldHVybiBlbmQNCg0KbG9jYWwgdmVyc2lvbiA9IDAuMzMNCmxvY2FsIEF1dGhvciA9ICJBamdvcmVxIg0KDQpsb2NhbCBVUERBVEVfTkFNRSA9ICJZYXN1byAtIEZyb3N0eSBCbGFkZSINCg0KX0cuQnVmZkZpeCA9IGZhbHNlICAtLSBTZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBzY3JpcHQgbm90IGF1dG8gdWx0IA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmlmIF9HLkJ1ZmZGaXggdGhlbg0KX0cuQlVGRl9OT05FID0gMA0KX0cuQlVGRl9HTE9CQUwgPSAxDQpfRy5CVUZGX0JBU0lDID0gMg0KX0cuQlVGRl9ERUJVRkYgPSAzDQpfRy5CVUZGX1NUVU4gPSA1DQpfRy5CVUZGX1NURUFMVEggPSA2DQpfRy5CVUZGX1NJTEVOQ0UgPSA3DQpfRy5CVUZGX1RBVU5UID0gOA0KX0cuQlVGRl9TTE9XID0gMTANCl9HLkJVRkZfUk9PVCA9IDExDQpfRy5CVUZGX0RPVCA9IDEyDQpfRy5CVUZGX1JFR0VORVJBVElPTiA9IDEzDQpfRy5CVUZGX1NQRUVEID0gMTQNCl9HLkJVRkZfTUFHSUNfSU1NVU5FID0gMTUNCl9HLkJVRkZfUEhZU0lDQUxfSU1NVU5FID0gMTYNCl9HLkJVRkZfSU1NVU5FID0gMTcNCl9HLkJVRkZfVmlzaW9uX1JlZHVjZSA9IDE5DQpfRy5CVUZGX0ZFQVIgPSAyMQ0KX0cuQlVGRl9DSEFSTSA9IDIyDQpfRy5CVUZGX1BPSVNPTiA9IDIzDQpfRy5CVUZGX1NVUFBSRVNTID0gMjQNCl9HLkJVRkZfQkxJTkQgPSAyNQ0KX0cuQlVGRl9TVEFUU19JTkNSRUFTRSA9IDI2DQpfRy5CVUZGX1NUQVRTX0RFQ1JFQVNFID0gMjcNCl9HLkJVRkZfRkxFRSA9IDI4DQpfRy5CVUZGX0tOT0NLVVAgPSAyOQ0KX0cuQlVGRl9LTk9DS0JBQ0sgPSAzMA0KX0cuQlVGRl9ESVNBUk0gPSAzMQ0KICAgIGNsYXNzICdCdWZmTWFuYWdlcicNCgkNCglBZHZhbmNlZENhbGxiYWNrOnJlZ2lzdGVyKCdPbkFwcGx5QnVmZicsICdPblJlbW92ZUJ1ZmYnKQ0KCQ0KCWZ1bmN0aW9uIEJ1ZmZNYW5hZ2VyOl9faW5pdCgpDQoJCXNlbGYuaGVyb2VzID0ge30NCgkJc2VsZi5idWZmcyAgPSB7fQ0KCQlmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbw0KICAgICAgICAJbG9jYWwgaGVybyA9IGhlcm9NYW5hZ2VyOkdldEhlcm8oaSkNCiAgICAgICAJCXRhYmxlLmluc2VydChzZWxmLmhlcm9lcywgaGVybykNCiAgICAgICAgCXNlbGYuYnVmZnNbaGVyby5uZXR3b3JrSURdID0ge30NCiAgICAJZW5kDQogICAgCUFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbiAoKSBzZWxmOlRpY2soKSBlbmQpDQoJZW5kDQoNCglmdW5jdGlvbiBCdWZmTWFuYWdlcjpUaWNrKCkNCgkJZm9yIGksIGhlcm8gaW4gaXBhaXJzKHNlbGYuaGVyb2VzKSBkbw0KCQkJZm9yIGkgPSAxLCBoZXJvLmJ1ZmZDb3VudCBkbw0KCQkJCWxvY2FsIGJ1ZmYgPSBoZXJvOmdldEJ1ZmYoaSkNCgkJCQlpZiBzZWxmOlZhbGlkKGJ1ZmYpIHRoZW4NCgkJCQkJbG9jYWwgaW5mbyA9IHt1bml0ID0gaGVybywgYnVmZiA9IGJ1ZmYsIHNsb3QgPSBpLCBzZW50ID0gZmFsc2UsIHNlbnQyID0gZmFsc2V9DQoJCQkJCWlmIG5vdCBzZWxmLmJ1ZmZzW2hlcm8ubmV0d29ya0lEXVtpbmZvLmJ1ZmYubmFtZV0gdGhlbg0KCQkJCQkJc2VsZi5idWZmc1toZXJvLm5ldHdvcmtJRF1baW5mby5idWZmLm5hbWVdID0gaW5mbw0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgkJZm9yIG5pZCwgdGFibGUgaW4gcGFpcnMoc2VsZi5idWZmcykgZG8NCgkJCWZvciBpLCBidWZmcyBpbiBwYWlycyh0YWJsZSkgZG8NCgkJCQlsb2NhbCBidWZmID0gYnVmZnMuYnVmZg0KCQkJCWlmIHNlbGY6VmFsaWQoYnVmZikgYW5kIG5vdCBidWZmcy5zZW50IHRoZW4NCgkJCQkJbG9jYWwgYnVmZmluZm8gPSB7bmFtZSA9IGJ1ZmYubmFtZTpsb3dlcigpLCBzbG90ID0gYnVmZi5zbG90LCBkdXJhdGlvbiA9IChidWZmLmVuZFQgLSBidWZmLnN0YXJ0VCksIHN0YXJ0VGltZSA9IGJ1ZmYuc3RhcnRULCBlbmRUaW1lICA9IGJ1ZmYuZW5kVCwgc3RhY2tzID0gMSwgdHlwZSA9IGJ1ZmYudHlwZX0NCgkJCQkJQWR2YW5jZWRDYWxsYmFjazpPbkFwcGx5QnVmZihidWZmcy5zb3VyY2UsIGJ1ZmZzLnVuaXQsIGJ1ZmZpbmZvKQ0KCQkJCQlidWZmcy5zZW50ID0gdHJ1ZQ0KCQkJCWVsc2VpZiBub3Qgc2VsZjpWYWxpZChidWZmKSBhbmQgbm90IGJ1ZmZzLnNlbnQyIHRoZW4NCgkJCQkJbG9jYWwgYnVmZmluZm8gPSB7bmFtZSA9IGJ1ZmYubmFtZTpsb3dlcigpLCBzbG90ID0gYnVmZi5zbG90LCBkdXJhdGlvbiA9IChidWZmLmVuZFQgLSBidWZmLnN0YXJ0VCksIHN0YXJ0VGltZSA9IGJ1ZmYuc3RhcnRULCBlbmRUaW1lID0gYnVmZi5lbmRULCBzdGFja3MgPSAwLCB0eXBlID0gYnVmZi50eXBlfQ0KCQkJCQlBZHZhbmNlZENhbGxiYWNrOk9uUmVtb3ZlQnVmZihidWZmcy51bml0LCBidWZmaW5mbykNCgkJCQkJc2VsZi5idWZmc1tidWZmcy51bml0Lm5ldHdvcmtJRF1bYnVmZi5uYW1lXSA9IG5pbA0KCQkJCQlidWZmcy5zZW50MiA9IHRydWUNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCWZ1bmN0aW9uIEJ1ZmZNYW5hZ2VyOlZhbGlkKGJ1ZmYpDQoJCXJldHVybiBidWZmIGFuZCBidWZmLm5hbWUgYW5kIGJ1ZmYuc3RhcnRUIDw9IEdldEdhbWVUaW1lcigpIGFuZCBidWZmLmVuZFQgPj0gR2V0R2FtZVRpbWVyKCkNCgllbmQNCg0KCWZ1bmN0aW9uIEJ1ZmZNYW5hZ2VyOkhhc0J1ZmYodW5pdCwgYnVmZm5hbWUpDQoJCXJldHVybiBzZWxmLmJ1ZmZzW3VuaXQubmV0d29ya0lEXVtidWZmbmFtZV06bG93ZXIoKSB+PSBuaWwNCgllbmQNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJQnVmZnMgPSBCdWZmTWFuYWdlcigpDQplbmQNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmxvY2FsIFJFUVVJUkVEX0xJQlMgPSB7DQoJICAgIFsiSFByZWRpY3Rpb24iXSA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQm9sSFRURi9Cb0wvbWFzdGVyL0hUVEYvQ29tbW9uL0hQcmVkaWN0aW9uLmx1YSIsDQoJCVsiVlByZWRpY3Rpb24iXSA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU2lkYUJvTC9DaGFvcy9tYXN0ZXIvVlByZWRpY3Rpb24ubHVhIg0KICAgIH0NCiANCmxvY2FsIERPV05MT0FESU5HX0xJQlMsIERPV05MT0FEX0NPVU5UID0gZmFsc2UsIDANCiANCmZ1bmN0aW9uIEFmdGVyRG93bmxvYWQoKQ0KCURPV05MT0FEX0NPVU5UID0gRE9XTkxPQURfQ09VTlQgLSAxDQoJaWYgRE9XTkxPQURfQ09VTlQgPT0gMCB0aGVuDQoJCURPV05MT0FESU5HX0xJQlMgPSBmYWxzZQ0KCQlwcmludCgiPGZvbnQgY29sb3I9XCIjNjY5OUZGXCI+UmVxdWlyZWQgbGlicmFyaWVzIGRvd25sb2FkZWQgc3VjY2Vzc2Z1bGx5LCBwbGVhc2UgcmVsb2FkIChEb3VibGUgRjkpPC9mb250PiIpDQoJZW5kDQplbmQNCiANCmZvciBET1dOTE9BRF9MSUJfTkFNRSwgRE9XTkxPQURfTElCX1VSTCBpbiBwYWlycyhSRVFVSVJFRF9MSUJTKSBkbw0KCWlmIEZpbGVFeGlzdChMSUJfUEFUSCAuLiBET1dOTE9BRF9MSUJfTkFNRSAuLiAiLmx1YSIpIHRoZW4NCgkJcmVxdWlyZShET1dOTE9BRF9MSUJfTkFNRSkNCgllbHNlDQoJCURPV05MT0FESU5HX0xJQlMgPSB0cnVlDQoJCURPV05MT0FEX0NPVU5UID0gRE9XTkxPQURfQ09VTlQgKyAxDQoJCXByaW50KCI8Zm9udCBjb2xvcj1cIiM2Njk5RkZcIj5Eb3dubG9hZGluZyBsaWJzIC4uLi4uLjwvZm9udD4iKQ0KCQlEb3dubG9hZEZpbGUoRE9XTkxPQURfTElCX1VSTCwgTElCX1BBVEggLi4gRE9XTkxPQURfTElCX05BTUUuLiIubHVhIiwgQWZ0ZXJEb3dubG9hZCkNCgllbmQNCmVuZA0KIA0KaWYgRE9XTkxPQURJTkdfTElCUyB0aGVuIHJldHVybiBlbmQNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS1TcGVsbCBkYXRhDQpsb2NhbCBSYW5nZXMgPSB7UTEyID0gNTAwLCAgICAgICAgICAgIFEzID0gMTAwMCwgICAgICAgVyA9IDQwMCwgICAgIEUgPSA0NzUsICAgICAgIFIgPSAxMzAwfQ0KbG9jYWwgV2lkdGhzID0ge1ExMiA9IDU1LCAgICAgICAgICAgICBRMyA9IDkwLCAgICAgICAgIFcgPSAwLCAgICAgICBFID0gMCwgICAgICAgICBSID0gMH0NCmxvY2FsIERlbGF5cyA9IHtRMTIgPSAwLjI1LCAgICAgICAgICAgUTMgPSAwLjQsICAgICAgICBXID0gMC41LCAgICAgRSA9IDAsICAgICAgICAgUiA9IDB9DQpsb2NhbCBTcGVlZHMgPSB7UTEyID0gbWF0aC5odWdlLCAgICAgIFEzID0gMTUwMCwgICAgICAgVyA9IDE1MDAsICAgIEUgPSAwLCAgICAgICAgIFIgPSAwfQ0KDQpsb2NhbCBBZGRTa2lsbGlzdCA9IHsNCiAgICBbIkVra28iXSA9IHtza2lsbGFkZCA9IHsNCgkgICAgWyJFa2tvUSJdID0ge3NwZWxsbmFtZSA9ICJFa2tvUSIsIHNwZWxsdHlwZSA9ICJRIiwgY2FzdHR5cGUgPSAxLCBzaG90dHlwZSA9IDEsIHJhZGl1cyA9IDIwMCwgbWF4ZGlzdGFuY2UgPSA5NTAsIFlXYWxsID0gdHJ1ZX0sDQoJCVsiRWtrb1ciXSA9IHtzcGVsbG5hbWUgPSAiRWtrb1ciLCBzcGVsbHR5cGUgPSAiVyIsIGNhc3R0eXBlID0gMiwgc2hvdHR5cGUgPSAzLCByYWRpdXMgPSA0NTAsIG1heGRpc3RhbmNlID0gMCwgWVdhbGwgPSBmYWxzZX0sDQoJfX0sDQoJWyJSeXplIl0gPSB7c2tpbGxhZGQgPSB7DQoJICAgIFsiUnl6ZVEiXSA9IHtzcGVsbG5hbWUgPSAiUnl6ZVEiLCBzcGVsbHR5cGUgPSAiUSIsIGNhc3R0eXBlID0gMSwgc2hvdHR5cGUgPSAxLCByYWRpdXMgPSA1MCwgIG1heGRpc3RhbmNlID0gOTAwLCBZV2FsbCA9IHRydWV9LA0KCX19LA0KCVsiWWFzdW8iXSA9IHtza2lsbGFkZCA9IHsNCgkgICAgWyJ5YXN1b3EzdyJdID0ge3NwZWxsbmFtZSA9ICJ5YXN1b3EzdyIsIHNwZWxsdHlwZSA9ICJRMyIsIGNhc3R0eXBlID0gMSwgc2hvdHR5cGUgPSAxLCByYWRpdXMgPSA5MCwgIG1heGRpc3RhbmNlID0gMTAwMCwgWVdhbGwgPSB0cnVlfSwNCgl9fSwNCglbIlNpb24iXSA9IHtza2lsbGFkZCA9IHsNCgkgICAgWyJTaW9uRSJdID0ge3NwZWxsbmFtZSA9ICJTaW9uRSIsIHNwZWxsdHlwZSA9ICJFIiwgY2FzdHR5cGUgPSAxLCBzaG90dHlwZSA9IDEsIHJhZGl1cyA9IDgwLCAgbWF4ZGlzdGFuY2UgPSA4MDAsIFlXYWxsID0gdHJ1ZX0sDQoJfX0sDQoJWyJSaXZlbiJdID0ge3NraWxsYWRkID0gew0KCSAgICBbInJpdmVuaXp1bmFibGFkZSJdID0ge3NwZWxsbmFtZSA9ICJyaXZlbml6dW5hYmxhZGUiLCBzcGVsbHR5cGUgPSAiUjIiLCBjYXN0dHlwZSA9IDQsIHNob3R0eXBlID0gNCwgcmFkaXVzID0gMjAwLCAgbWF4ZGlzdGFuY2UgPSA5MDAsIFlXYWxsID0gdHJ1ZX0sDQoJfX0sDQogICAgWyJCYXJkIl0gPSB7c2tpbGxhZGQgPSB7DQoJICAgIFsiQmFyZFEiXSA9IHtzcGVsbG5hbWUgPSAiYXJkUSIsIHNwZWxsdHlwZSA9ICJRIiwgY2FzdHR5cGUgPSAxLCBzaG90dHlwZSA9IDEsIHJhZGl1cyA9IDYwLCAgbWF4ZGlzdGFuY2UgPSA5NTAsIFlXYWxsID0gdHJ1ZX0sCQ0KICAgICAgICBbIkJhcmRSIl0gPSB7c3BlbGxuYW1lID0gIkJhcmRSIiwgc3BlbGx0eXBlID0gIlIiLCBjYXN0dHlwZSA9IDEsIHNob3R0eXBlID0gMywgcmFkaXVzID0gMzUwLCAgbWF4ZGlzdGFuY2UgPSAzNDAwLCBZV2FsbCA9IGZhbHNlfSwNCgl9fSwNCglbIlJla1NhaSJdID0ge3NraWxsYWRkID0gewkNCgkgICAgWyJyZWtzYWlxYnVycm93ZWQiXSA9IHtzcGVsbG5hbWUgPSAicmVrc2FpcWJ1cnJvd2VkIiwgc3BlbGx0eXBlID0gIlEiLCBjYXN0dHlwZSA9IDEsIHNob3R0eXBlID0gMSwgcmFkaXVzID0gNjAsICBtYXhkaXN0YW5jZSA9IDE2MjUsIFlXYWxsID0gdHJ1ZX0sDQoJfX0sDQoJWyJWZWlnYXIiXSA9IHtza2lsbGFkZCA9IHsJDQoJICAgIFsiVmVpZ2FyQmFsZWZ1bFN0cmlrZSJdID0ge3NwZWxsbmFtZSA9ICJWZWlnYXJCYWxlZnVsU3RyaWtlIiwgc3BlbGx0eXBlID0gIlEiLCBjYXN0dHlwZSA9IDEsIHNob3R0eXBlID0gMSwgcmFkaXVzID0gNzAsICBtYXhkaXN0YW5jZSA9IDk1MCwgWVdhbGwgPSB0cnVlfSwNCiAgICB9fSwJCQ0KfQ0KDQpsb2NhbCBFc3BlZWQgPSAxMTAwDQpsb2NhbCBFZHVyYXRpb24gPSAwLjUNCmxvY2FsIEVkdXJhdGlvbjIgPSAwDQoNCmxvY2FsIGVQb3MsIHNQb3MsIG15UG9zID0gbmlsLCBuaWwgLG5pbA0KbG9jYWwgVGFyZ2V0UG9zID0gbmlsDQpsb2NhbCBkYXNoUG9pbnQgPSBuaWwNCg0KbG9jYWwgVGFyZ2V0TG9jaw0KCQ0KbG9jYWwgQUFyYW5nZSA9IDE3NQ0KbG9jYWwgUUhpdFBSTyA9IDANCmxvY2FsIFFIaXRWUFJFID0gMg0KDQpsb2NhbCBUYXJnZXRLbm9ja2VkdXAgPSB7fQ0KbG9jYWwgS25vY2t1cHMgPSB7fQ0KbG9jYWwgdW5pdGtub2NrZWQgPSAwDQpsb2NhbCB0YXJnZXRrbm9ja2VkID0gMA0KbG9jYWwgRGVsYXlFID0gMC4zOTUNCg0KbG9jYWwgWWFzdW9MZXZlbCA9IHsgUUVXID0geyAxLDMsMiwxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0sIEVRVyA9IHsgMywxLDIsMSwxLDQsMSwzLDEsMyw0LDMsMywyLDIsNCwyLDJ9fQ0KICAgICAgDQpsb2NhbCBzdG9wTW92ZSA9IGZhbHNlDQpsb2NhbCBFQmFjayA9IGZhbHNlCQ0KbG9jYWwgUXVsdCA9IGZhbHNlIA0KDQpsb2NhbCBFU3RhY2tzID0gMA0KDQpsb2NhbCBpZ25pdGUgPSBuaWwgDQoNCmxvY2FsIERhc2hpbmcgPSBmYWxzZQ0KbG9jYWwgVGRhc2hpbmcgPSBmYWxzZQ0KbG9jYWwgVGRhc2hpbmcyID0gZmFsc2UNCmxvY2FsIFJlY2FsbGluZyA9IGZhbHNlDQoNCmxvY2FsIGxhc3RFID0gMA0KDQpsb2NhbCBTcGVsbHMgPSB7X1EsX1csX0UsX1J9DQpsb2NhbCBTcGVsbHMyID0geyJRIiwiVyIsIkUiLCJSIn0NCg0KbG9jYWwgdHMgPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMzAwLCBEQU1BR0VfUEhZU0lDQUwsIHRydWUpDQp0cy5uYW1lID0gIllhc3VvIg0KDQpsb2NhbCBVbml0V2l0aEUgPSB7fQ0KbG9jYWwgX19NRUNfTUlOSU9OU19JTklUX18gPSBmYWxzZQ0KDQpsb2NhbCBKdW5nbGVNaW5pb25zID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAxMzAwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQpsb2NhbCBFbmVteU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgMTMwMCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KbG9jYWwgQWxsTWluaW9ucyA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0FMTCwgMTMwMCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KDQpsb2NhbCBKdW5nbGVNb2JzID0ge30NCmxvY2FsIEp1bmdsZUZvY3VzTW9icyA9IHt9DQoNCmxvY2FsIGlzUmVjYWxsaW5nID0gZmFsc2UNCg0KbG9jYWwgVXNpbmdQb3QgPSBmYWxzZQ0KDQpsb2NhbCBZYXN1b01lbnUsWWFzdW9PcmJ3YWxrLFlhc3VvV2FsbA0KbG9jYWwgVGFyZ2V0ID0gbmlsDQoNCmxvY2FsIFNSYWRpdXMgPSAxODANCmxvY2FsIERSYWRpdXMgPSAxMDANCmxvY2FsIFNSYWRpdXNTcXIgPSBTUmFkaXVzICogU1JhZGl1cw0KbG9jYWwgRHJhd1MgPSB7bXlIZXJvLmNoYXJOYW1lfQ0KbG9jYWwgSnVtcFNwb3RzID0gew0KWydZYXN1byddID0gDQoJew0KCQl7RnJvbSA9IFZlY3Rvcig3MzcyLCA1Mi41NjUzMDc2MTcxODgsIDU4NTgpLCAgVG8gPSBWZWN0b3IoNzM3MiwgNTIuNTY1MzA3NjE3MTg4LCA1ODU4KSwgQ2FzdFBvcyA9IFZlY3Rvcig3MTEwLCA1OC4zODcwOTI1OTAzMzIsIDU2MTIpfSwgDQoJCXtGcm9tID0gVmVjdG9yKDgyMjIsIDUxLjY0ODM4NDA5NDIzOCwgMzE1OCksICBUbyA9IFZlY3Rvcig4MjIyLCA1MS42NDgzODQwOTQyMzgsIDMxNTgpLCBDYXN0UG9zID0gVmVjdG9yKDgzNzIsIDUxLjEzMDAwNDg4MjgxMywgMjkwOCl9LCANCgkJe0Zyb20gPSBWZWN0b3IoMzY3NCwgNTAuMzMxODg2MjkxNTA0LCA3MDU4KSwgIFRvID0gVmVjdG9yKDM2NzQsIDUwLjMzMTg4NjI5MTUwNCwgNzA1OCksIENhc3RQb3MgPSBWZWN0b3IoMzY3NCwgNTIuNDU5NTk0NzI2NTYzLCA2NzA4KX0sIA0KCQl7RnJvbSA9IFZlY3RvcigzNzg4LCA1MS43NzYxMzA2NzYyNywgNzQyMiksICBUbyA9IFZlY3RvcigzNzg4LCA1MS43NzYxMzA2NzYyNywgNzQyMiksIENhc3RQb3MgPSBWZWN0b3IoMzc3NCwgNTIsMTA4Nzc5OTA3MjI3LCA3NzA2KX0sIA0KCQl7RnJvbSA9IFZlY3Rvcig4MzcyLCA1MC4zODQwNTk5MDYwMDYsIDk2MDYpLCAgVG8gPSBWZWN0b3IoODM3MiwgNTAuMzg0MDU5OTA2MDA2LCA5NjA2KSwgQ2FzdFBvcyA9IFZlY3Rvcig3OTIzLCA1My41MzAzNjExNzU1MzcsIDkzNTEpfSwgDQoJCXtGcm9tID0gVmVjdG9yKDY2NTAsIDUzLjgyOTY4OTAyNTg3OSwgMTE3NjYpLCAgVG8gPSBWZWN0b3IoNjY1MCwgNTMuODI5Njg5MDI1ODc5LCAxMTc2NiksIENhc3RQb3MgPSBWZWN0b3IoNjQyNiwgNTYuNDc2Nzk5MDExMjMsIDEyMTM4KX0sIA0KCQl7RnJvbSA9IFZlY3RvcigxNjc4LCA1Mi44MzgwOTY2MTg2NTIsIDg0MjgpLCAgVG8gPSBWZWN0b3IoMTY3OCwgNTIuODM4MDk2NjE4NjUyLCA4NDI4KSwgQ2FzdFBvcyA9IFZlY3RvcigyMDUwLCA1MS43NzcyNTYwMTE5NjMsIDg0MTYpfSwgDQoJCXtGcm9tID0gVmVjdG9yKDEwODIyLCA1Mi4xNTI3NDA0Nzg1MTYsIDc0NTYpLCAgVG8gPSBWZWN0b3IoMTA4MjIsIDUyLjE1Mjc0MDQ3ODUxNiwgNzQ1NiksIENhc3RQb3MgPSBWZWN0b3IoMTA4OTQsIDUxLjcyMjk4ODEyODY2MiwgNzE5Mil9LA0KCQl7RnJvbSA9IFZlY3RvcigxMTE2MCwgNTIuMjA1MTU0NDE4OTQ1LCA3NTA0KSwgIFRvID0gVmVjdG9yKDExMTYwLCA1Mi4yMDUxNTQ0MTg5NDUsIDc1MDQpLCBDYXN0UG9zID0gVmVjdG9yKDExMTcyLCA1MS43MjUyMTk3MjY1NjMsIDcyMDgpfSwJDQoJCXtGcm9tID0gVmVjdG9yKDY0MjQsIDQ4LjUyNzI0NDU2Nzg3MSwgNTIwOCksICBUbyA9IFZlY3Rvcig2NDI0LCA0OC41MjcyNDQ1Njc4NzEsIDUyMDgpLCBDYXN0UG9zID0gVmVjdG9yKDY4MjQsIDQ4LjcyMDkwMTQ4OTI1OCwgNTMwOCl9LA0KCQl7RnJvbSA9IFZlY3RvcigxMzE3MiwgNTQuMjAxMTg3MTMzNzg5LCA2NTA4KSwgIFRvID0gVmVjdG9yKDEzMTcyLCA1NC4yMDExODcxMzM3ODksIDY1MDgpLCBDYXN0UG9zID0gVmVjdG9yKDEyNzcyLCA1MS42NjYwMTk0Mzk2OTcsIDY0NTgpfSwgDQoJCXtGcm9tID0gVmVjdG9yKDExMjIyLCA1Mi4yMTA1NzEyODkwNjMsIDc4NTYpLCAgVG8gPSBWZWN0b3IoMTEyMjIsIDUyLjIxMDU3MTI4OTA2MywgNzg1NiksIENhc3RQb3MgPSBWZWN0b3IoMTEwNzIsIDYyLjI3MjI0MzQ5OTc1NiwgODE1Nil9LCANCgkJe0Zyb20gPSBWZWN0b3IoMTAzNzIsIDYxLjczMjI1NDAyODMyLCA4NDU2KSwgIFRvID0gVmVjdG9yKDEwMzcyLCA2MS43MzIyNTQwMjgzMiwgODQ1NiksIENhc3RQb3MgPSBWZWN0b3IoMTA3NzIsIDYzLjEzNjY4ODIzMjQyMiwgODQ1Nil9LA0KCQl7RnJvbSA9IFZlY3Rvcig0MzI0LCA1MS41NDMzODgzNjY2OTksIDYyNTgpLCAgVG8gPSBWZWN0b3IoNDMyNCwgNTEuNTQzMzg4MzY2Njk5LCA2MjU4KSwgQ2FzdFBvcyA9IFZlY3Rvcig0MDI0LCA1Mi40NjYzNjk2Mjg5MDYsIDYzNTgpfSwNCgkJe0Zyb20gPSBWZWN0b3IoNjQ4OCwgNTYuNjMyODg0OTc5MjQ4LCAxMTE5MiksICBUbyA9IFZlY3Rvcig2NDg4LCA1Ni42MzI4ODQ5NzkyNDgsIDExMTkyKSwgQ2FzdFBvcyA9IFZlY3Rvcig2Njk4NiwgNTMuNzcxMDk1Mjc1ODc5LCAxMDkxMCl9LA0KCQl7RnJvbSA9IFZlY3Rvcig3NjcyLCA1Mi44NzI2MDA1NTU0MiwgODkwNiksICBUbyA9IFZlY3Rvcig3NjcyLCA1Mi44NzI2MDA1NTU0MiwgODkwNiksIENhc3RQb3MgPSBWZWN0b3IoNzgyMiwgNTIuNDQ2Njk3MjM1MTA3LCA5MzA2KX0sDQoNCgl9fQ0KbG9jYWwgSnVtcFNsb3QgPSB7WydZYXN1byddID0gX0V9DQoNCmxvY2FsIHByaW9yaXR5VGFibGUgPSB7DQoJICBBUCA9IHsNCgkJCSJBbm5pZSIsICJBaHJpIiwgIkFrYWxpIiwgIkFuaXZpYSIsICJBbm5pZSIsICJCcmFuZCIsICJDYXNzaW9wZWlhIiwgIkRpYW5hIiwgIkV2ZWx5bm4iLCAiRmlkZGxlU3RpY2tzIiwgIkZpenoiLCAiR3JhZ2FzIiwgIkhlaW1lcmRpbmdlciIsICJLYXJ0aHVzIiwNCgkJCSJLYXNzYWRpbiIsICJLYXRhcmluYSIsICJLYXlsZSIsICJLZW5uZW4iLCAiTGVibGFuYyIsICJMaXNzYW5kcmEiLCAiTHV4IiwgIk1hbHphaGFyIiwgIk1vcmRla2Fpc2VyIiwgIk1vcmdhbmEiLCAiTmlkYWxlZSIsICJPcmlhbm5hIiwNCgkJCSJSeXplIiwgIlNpb24iLCAiU3dhaW4iLCAiU3luZHJhIiwgIlRlZW1vIiwgIlR3aXN0ZWRGYXRlIiwgIlZlaWdhciIsICJWaWt0b3IiLCAiVmxhZGltaXIiLCAiWGVyYXRoIiwgIlppZ2dzIiwgIlp5cmEiLCAiVmVsa296IiwgIkVra28iDQoJCQl9LA0KCSAgU3VwcG9ydCA9IHsNCgkJCSJBbGlzdGFyIiwgIkJsaXR6Y3JhbmsiLCAiSmFubmEiLCAiS2FybWEiLCAiTGVvbmEiLCAiTHVsdSIsICJOYW1pIiwgIk51bnUiLCAiU29uYSIsICJTb3Jha2EiLCAiVGFyaWMiLCAiVGhyZXNoIiwgIlppbGVhbiIsICJCcmF1bSINCgkJCX0sDQoJICBUYW5rID0gew0KCQkJIkFtdW11IiwgIkNob2dhdGgiLCAiRHJNdW5kbyIsICJHYWxpbyIsICJIZWNhcmltIiwgIk1hbHBoaXRlIiwgIk1hb2thaSIsICJOYXN1cyIsICJSYW1tdXMiLCAiU2VqdWFuaSIsICJOYXV0aWx1cyIsICJTaGVuIiwgIlNpbmdlZCIsICJTa2FybmVyIiwgIlZvbGliZWFyIiwNCgkJCQkiV2Fyd2ljayIsICJZb3JpY2siLCAiWmFjIg0KCQkJfSwNCgkJCQ0KCQkJQURfQ2FycnkgPSB7DQoJCQkJIkFzaGUiLCAiQ2FpdGx5biIsICJDb3JraSIsICJEcmF2ZW4iLCAiRXpyZWFsIiwgIkdyYXZlcyIsICJKYXljZSIsICJKaW54IiwgIktvZ01hdyIsICJMdWNpYW4iLCAiTWFzdGVyWWkiLCAiTWlzc0ZvcnR1bmUiLCAiUGFudGhlb24iLCAiUXVpbm4iLCAiU2hhY28iLCAiU2l2aXIiLA0KCQkJCSJUYWxvbiIsIlRyeW5kYW1lcmUiLCAiVHJpc3RhbmEiLCAiVHdpdGNoIiwgIlVyZ290IiwgIlZhcnVzIiwgIlZheW5lIiwgIllhc3VvIiwgIlplZCINCgkJCX0sDQoJCQkNCgkJCUJydWlzZXIgPSB7DQoJCQkJIkFhdHJveCIsICJEYXJpdXMiLCAiRWxpc2UiLCAiRmlvcmEiLCAiR2FuZ3BsYW5rIiwgIkdhcmVuIiwgIklyZWxpYSIsICJKYXJ2YW5JViIsICJKYXgiLCAiS2hheml4IiwgIkxlZVNpbiIsICJOb2N0dXJuZSIsICJPbGFmIiwgIlBvcHB5IiwNCgkJCQkiUmVuZWt0b24iLCAiUmVuZ2FyIiwgIlJpdmVuIiwgIlJ1bWJsZSIsICJTaHl2YW5hIiwgIlRydW5kbGUiLCAiVWR5ciIsICJWaSIsICJNb25rZXlLaW5nIiwgIlhpblpoYW8iDQoJCQl9DQoJfQ0KDQoNCmZ1bmN0aW9uIE9uTG9hZCgpDQogICAgVmFycygpDQoJSnVuZ2xlTmFtZXMoKQ0KCU1haW5NZW51KCkNCglXYWxsTWVudSgpDQoJRGFzaE1lbnUoKQ0KCU9yYndhbGtNZW51KCkNCglQZXJtYVNob3coKQ0KCVVzZVZwcmVkKCkNCglEZWxheUFjdGlvbihmdW5jdGlvbigpDQoJICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjc5NENcIj48Yj5ZYXN1byAtIEZvcnN0eSBCbGFkZSA8L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkRGQkZcIj5TdWNjZXNzZnVsbHkgTG9hZGVkITwvYj48L2ZvbnQ+IikNCgllbmQsIDMpDQplbmQNCg0KZnVuY3Rpb24gQ2hlY2tVcGRhdGUoKQ0KICAgIGxvY2FsIGZ1bmN0aW9uIEF1dG91cGRhdGVyTXNnKG1zZykgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGNzk0Q1wiPjxiPllhc3VvIC0gRnJvc3R5IEJsYWRlOiA8L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkRGQkZcIj4iLi5tc2cuLiIuPC9iPjwvZm9udD4iKSBlbmQNCglpZiBfRy5Vc2VVcGRhdGVyIHRoZW4NCiAgCQlsb2NhbCBTZXJ2ZXJEYXRhID0gR2V0V2ViUmVzdWx0KFVQREFURV9IT1NULCBVUERBVEVfUEFUSCkNCiAgCQlpZiBTZXJ2ZXJEYXRhIHRoZW4NCiAgICAJCWxvY2FsIFNlcnZlclZlcnNpb24gPSB0eXBlKHRvbnVtYmVyKFNlcnZlckRhdGEpKSA9PSAibnVtYmVyIiBhbmQgdG9udW1iZXIoU2VydmVyRGF0YSkgb3IgbmlsDQogICAgCQlpZiBTZXJ2ZXJWZXJzaW9uIHRoZW4NCiAgICAgIAkJCVNlcnZlclZlcnNpb24gPSB0b251bWJlcihTZXJ2ZXJWZXJzaW9uKQ0KICAgICAgCQkJaWYgdG9udW1iZXIodmVyc2lvbikgPCBTZXJ2ZXJWZXJzaW9uIHRoZW4NCiAgICAgICAgCQkJQXV0b3VwZGF0ZXJNc2coIk5ldyB2ZXJzaW9uIGF2YWlsYWJsZSIuLlNlcnZlclZlcnNpb24pDQogICAgICAgIAkJCUF1dG91cGRhdGVyTXNnKCJVcGRhdGluZywgcGxlYXNlIGRvbid0IHByZXNzIEY5IikNCiAgICAgICAgCQkJRG93bmxvYWRGaWxlKFVQREFURV9VUkwsIFVQREFURV9GSUxFX1BBVEgsIGZ1bmN0aW9uICgpIEF1dG91cGRhdGVyTXNnKCJTdWNjZXNzZnVsbHkgdXBkYXRlZC4gKCIuLnZlcnNpb24uLiIgPT4gIi4uU2VydmVyVmVyc2lvbi4uIiksIHByZXNzIEY5IHR3aWNlIHRvIGxvYWQgdGhlIHVwZGF0ZWQgdmVyc2lvbi4iKSBlbmQpIAkJDQogICAgICAJCQllbHNlDQogICAgICAgIAkJCUF1dG91cGRhdGVyTXNnKCJZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICgiLi5TZXJ2ZXJWZXJzaW9uLi4iKSIpDQogICAgICAJCQllbmQNCiAgICAJCWVuZA0KCQllbHNlDQogICAgCUF1dG91cGRhdGVyTXNnKCJFcnJvciBkb3dubG9hZGluZyB2ZXJzaW9uIGluZm8iKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBWYXJzKCkNCgktLVNlbGVjdG9yLkluc3RhbmNlKCkgDQoJVlAgPSBWUHJlZGljdGlvbigpDQoJSFByZWQgPSBIUHJlZGljdGlvbigpDQoJSFBRMTIgPSBIUFNraWxsc2hvdCh7dHlwZSA9ICJQcm9tcHRMaW5lIiwgZGVsYXkgPSBEZWxheXMuUTEyLCByYW5nZSA9IFJhbmdlcy5RMTIsIHdpZHRoID0gV2lkdGhzLlExMn0pDQoJSFBRMyA9ICBIUFNraWxsc2hvdCh7dHlwZSA9ICJEZWxheUxpbmUiLCBkZWxheSA9IERlbGF5cy5RMywgcmFuZ2UgPSBSYW5nZXMuUTMsIHdpZHRoID0gV2lkdGhzLlEzLCBzcGVlZCA9IFNwZWVkcy5RM30pDQoJV0ogPSBZYXN1b1dhbGxKdW1wKCkNCglpZiBteUhlcm8udGVhbSA9PSBURUFNX1JFRCB0aGVuDQogICAgCWZvY2FsUG9pbnQgPSBQb2ludCgxMzkzNi42NCwgMTQxNzQuODYpDQoJZWxzZQ0KICAgIAlmb2NhbFBvaW50ID0gUG9pbnQoMjguNTgsIDI2Ny4xNikNCgllbmQNCglpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzEpLm5hbWU6ZmluZCgic3VtbW9uZXJkb3QiKSB0aGVuDQoJCWlnbml0ZSA9IFNVTU1PTkVSXzENCgllbHNlaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTVU1NT05FUl8yKS5uYW1lOmZpbmQoInN1bW1vbmVyZG90IikgdGhlbg0KICAgIAlpZ25pdGUgPSBTVU1NT05FUl8yDQoJZW5kDQoJX0cub2xkRHJhd0NpcmNsZSA9IHJhd2dldChfRywgIkRyYXdDaXJjbGUiKQ0KCV9HLkRyYXdDaXJjbGUgPSBEcmF3Q2lyY2xlMg0KZW5kDQoNCmZ1bmN0aW9uIE1haW5NZW51KCkNCgktLSBTY3JpcHQgTWVudSAtLQ0KCVlhc3VvTWVudSA9IHNjcmlwdENvbmZpZygiWWFzdW8gLSBGcm9zdHkgQmxhZGUiLCAiWWFzdW8iKQ0KCS0tIFRhcmdldCBTZWxlY3RvciAtLQ0KCVlhc3VvTWVudTphZGRUUyh0cykNCgktLSBDcmVhdGUgU3ViTWVudSAtLQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJDb21ibyBTZXR0aW5ncyIsICJDb21ibyIpDQogICAgWWFzdW9NZW51OmFkZFN1Yk1lbnUoIkhhcmFzcyBTZXR0aW5ncyIsICJIYXJhc3MiKQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJMYXN0SGl0IFNldHRpbmdzIiwgIkxhbmVMSCIpDQoJWWFzdW9NZW51OmFkZFN1Yk1lbnUoIkxhbmVDbGVhciBTZXR0aW5ncyIsICJMYW5lQ0wiKQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJKdW5nbGVDbGVhciBTZXR0aW5ncyIsICJKdW5nY2xlYXIiKQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJLaWxsU3RlYWwgU2V0dGluZ3MiLCAiS1MiKQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJFc2NhcGUgU2V0dGluZ3MiLCAiRXNjYXBlIikNCglZYXN1b01lbnU6YWRkU3ViTWVudSgiV2FsbEp1bXAgU2V0dGluZ3MiLCAiV2FsbGp1bXAiKQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJBZHZhbmNlZCBTZXR0aW5ncyIsICJBZHZhbmNlZCIpDQoJWWFzdW9NZW51OmFkZFN1Yk1lbnUoIkV4dHJhcyBTZXR0aW5ncyIsICJFeHRyYXMiKQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJQcmVkaWN0aW9uIFNldHRpbmdzIiwgIlByZWRpY3Rpb24iKQkNCglZYXN1b01lbnU6YWRkU3ViTWVudSgiRHJhd2luZ3MgU2V0dGluZ3MiLCAiRHJhdyIpDQoJWWFzdW9NZW51OmFkZFN1Yk1lbnUoIkh1bWFuaXplciBTZXR0aW5ncyIsICJIdW1hbml6ZXIiKQ0KCVlhc3VvTWVudTphZGRTdWJNZW51KCJQZXJtYVNob3cgU2V0dGluZ3MiLCAiUGVybWFTaG93IikNCgktLSBDb21ibyAtLQ0KCVlhc3VvTWVudS5Db21ibzphZGRQYXJhbSgiVXNlUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuQ29tYm86YWRkUGFyYW0oIlVzZVEyIiwgIlVzZSBRMiBFbXBvd2VyZWQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LkNvbWJvOmFkZFBhcmFtKCJVc2VFIiwgIlVzZSBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5Db21ibzphZGRQYXJhbSgiVXNlUiIsICJVc2UgUiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuQ29tYm86YWRkUGFyYW0oInNtYXJ0ZSIsICJVc2UgU21hcnQgRSAiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LkNvbWJvOmFkZFBhcmFtKCJVc2VJdGVtcyIsICJVc2UgSXRlbXMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJLS0gSGFyYXNzIC0tDQoJWWFzdW9NZW51LkhhcmFzczphZGRQYXJhbSgic21hcnRoYXJhc3MiLCAiVXNlIFNtYXJ0IEhhcmFzcyAoRS1RLUUpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5IYXJhc3M6YWRkUGFyYW0oIm1pbnJhbmdlIiwgIk1pbiByYW5nZSB0byBFIGJhY2siLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwMCwgMTAwLCA5MDApDQoJWWFzdW9NZW51LkhhcmFzczphZGRQYXJhbSgibWF4cmFuZ2UiLCAiTWF4IHJhbmdlIHRvIEUgZ2FwY2xvc2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDgwMCwgMTAwLCAxMzAwKQkNCglZYXN1b01lbnUuSGFyYXNzOmFkZFBhcmFtKCJVc2VRIiwgIlVzZSBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5IYXJhc3M6YWRkUGFyYW0oIlVzZVEyIiwgIlVzZSBRMiBFbXBvd2VyZWQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LkhhcmFzczphZGRQYXJhbSgiVXNlRSIsICJVc2UgRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJWWFzdW9NZW51LkhhcmFzczphZGRQYXJhbSgiTGhRIiwgIlVzZSBRIExhc3QgSGl0IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCS0tIExhbmUgTGFzdCBIaXQgYW5kIENsZWFyIC0tDQoJWWFzdW9NZW51LkxhbmVMSDphZGRQYXJhbSgiVXNlUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuTGFuZUxIOmFkZFBhcmFtKCJVc2VRMiIsICJVc2UgUTIgRW1wb3dlcmVkIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5MYW5lTEg6YWRkUGFyYW0oIlVzZUUiLCAiVXNlIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LkxhbmVDTDphZGRQYXJhbSgiVXNlUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuTGFuZUNMOmFkZFBhcmFtKCJVc2VRMiIsICJVc2UgUTIgRW1wb3dlcmVkIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5MYW5lQ0w6YWRkUGFyYW0oIlVzZUUiLCAiVXNlIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJLS0gSnVuZ2xlIENsZWFyIC0tDQoJWWFzdW9NZW51Lkp1bmdjbGVhcjphZGRQYXJhbSgiVXNlUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuSnVuZ2NsZWFyOmFkZFBhcmFtKCJVc2VRMiIsICJVc2UgUTIgRW1wb3dlcmVkIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5KdW5nY2xlYXI6YWRkUGFyYW0oIlVzZUUiLCAiVXNlIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJLS0gQWR2YW5jZWQgTWVudSAtLQ0KCS0tIEFkdmFuY2VkIFEgTWVudSAtLQ0KCVlhc3VvTWVudS5BZHZhbmNlZDphZGRTdWJNZW51KCJRIHNldHRpbmdzIiwgIkFkdlEiKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZROmFkZFBhcmFtKCJRU2xpZGVyIiwgIlNldCBRMiBSYW5nZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTAwMCwgODAwLCA5MDAsIDApDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlE6YWRkUGFyYW0oInVsdFEiLCAiVXNlIFEgd2hpbGUgdWx0aW5nIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZROmFkZFBhcmFtKCJpbnRlcnJ1cHRSZWNhbGxRIiwgIlVzZSBRMiBPbiBFbmVtaWVzIFJlY2FsbCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlE6YWRkUGFyYW0oIkluZm8iLCAiLS0tIEF1dG8gUSBTZXR0aW5ncyAtLSIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UTphZGRQYXJhbSgiTG9naWNRIiwgIkRvbid0IGF1dG8gUSBpZiBteSBoZWFsdGggaXMgbG93IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQkJDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlE6YWRkUGFyYW0oIkF1dG9RIiwgIlVzZSBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZROmFkZFBhcmFtKCJBdXRvUTIiLCAiVXNlIFEyIEVtcG93ZXJlZCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UTphZGRQYXJhbSgidW5kZXJUb3dlciIsICJVc2UgQXV0byBRIHVuZGVyIHRvd2VyIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZROmFkZFBhcmFtKCJFeFEiLCJBT0UtUSBtb2RlIixTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJMb3ciLCJGYXN0In0pCQ0KCS0tIEFkdmFuY2VkIFcgTWVudSAtLQ0KCVlhc3VvTWVudS5BZHZhbmNlZDphZGRTdWJNZW51KCJXIHNldHRpbmdzIiwgIkFkdlciKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZXOmFkZFBhcmFtKCJBdXRvV2FsbCIsICJVc2UgV2FsbCAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJLS0gQWR2YW5jZWQgRSBNZW51IC0tDQoJWWFzdW9NZW51LkFkdmFuY2VkOmFkZFN1Yk1lbnUoIkUgc2V0dGluZ3MiLCAiQWR2RSIpDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdkU6YWRkUGFyYW0oIkV0b21vdXNlIiwgIlVzZSBFIHRvIG1vdXNlIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJFIikpCQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZFOmFkZFBhcmFtKCJJbmZvIiwgIi0tLSBFIEdhcGNsb3NlIFNldHRpbmdzIC0tLSIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2RTphZGRQYXJhbSgidXNlRUdhcCIsICJVc2UgRSBhcyBHYXAgQ2xvc2VyIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZFOmFkZFBhcmFtKCJFR2FwQ2hlY2tFbmVtaWVzIiwgIkUgZ2FwIGlmIHggZW5lbWllcyBuZWFyIFRhcmdldCIsIFNDUklQVF9QQVJBTV9TTElDRSwgMSwgMSwgNSkNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2RTphZGRQYXJhbSgiRUdhcENoZWNrQWxsaWVzIiwgIkUgZ2FwIGlmIHggYWxsaWVzIG5lYXIgVGFyZ2V0IiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAwLCAwLCA1KQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZFOmFkZFBhcmFtKCJ1bmRlclRvd2VyIiwgIkF1dG8tRSB1bmRlciBUb3dlciIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJLS0gQWR2YW5jZWQgUiBNZW51IC0tDQoJWWFzdW9NZW51LkFkdmFuY2VkOmFkZFN1Yk1lbnUoIlIgc2V0dGluZ3MiLCAiQWR2UiIpDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlI6YWRkUGFyYW0oIkluZm8iLCAiLS0tIENvbWJvIFIgU2V0dGluZ3MgLS0tIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZSOmFkZFBhcmFtKCJDb21ub1JoZWFsdGgiLCAiQ2hlY2sgZm9yIHRhcmdldCBoZWFsdGgiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlI6YWRkUGFyYW0oIkhlYWx0aCIsICJEb250IHVsdCBpZiB0YXJnZXQgaGVhbHRoIHVuZGVyICUgIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAyMCwgMCwgMTAwLCAtMSkJDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlI6YWRkUGFyYW0oInVuZGVyVG93ZXIiLCAiQ2FzdCBSIFVuZGVyIFRvd2VyICIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpCSAJIAkNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UjphZGRQYXJhbSgiRGVsYXkiLCAiQ2FzdCBSIGRlbGF5IGZvciBBQSAiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlpZiBlbmVteSB+PSBuaWwgdGhlbg0KICAgICAgICAJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlI6YWRkUGFyYW0oZW5lbXkuY2hhck5hbWUsIlVzZSBVbHRpbWF0ZSBvbiAiLi50b3N0cmluZyhlbmVteS5jaGFyTmFtZSksU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQoJCWVuZA0KCWVuZAkNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UjphZGRQYXJhbSgiSW5mbyIsICItLS0gQXV0byBSIFNldHRpbmdzIC0tLSIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UjphZGRQYXJhbSgiQXV0b1IiLCAiQXV0byBSIG9uIGVuZW1pZXMga25vY2tlZCB1cCAiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlI6YWRkUGFyYW0oInVuZGVyVG93ZXIyIiwgIkNhc3QgUiBVbmRlciBUb3dlciAiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQkNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UjphZGRQYXJhbSgieEVuZW1pZXMiLCAiQXV0by1SIGlmIHggZW5lbWllcyBrbm9ja2VkIHVwICIsIFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgNSkJCQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZSOmFkZFBhcmFtKCJteVRhcmdldCIsICJBdXRvIHVzZSBSIG9ubHkgb24gZW5lbWllcyBrbm9ja2VkIGJ5IG1lICIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlI6YWRkUGFyYW0oIkF1dG9SYWxseSIsICJBdXRvIFIgaWYgYWxsaWVzIG5lYXIgbWUgIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UjphZGRQYXJhbSgieE51bWJlciIsICJudW1iZXIgb2YgYWxsaWVzOiAiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEsIDEsIDUpDQoJWWFzdW9NZW51LkFkdmFuY2VkLkFkdlI6YWRkUGFyYW0oInhSYW5nZSIsICJSYW5nZSBvZiBhbGxpZXM6ICIsIFNDUklQVF9QQVJBTV9TTElDRSwgNTAwLCAwLCAxMDAwLCAxKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5BZHZSOmFkZFBhcmFtKCJBdXRvUmhlYWx0aCIsICJDaGVjayBNeSBIZWFsdGggIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCglZYXN1b01lbnUuQWR2YW5jZWQuQWR2UjphZGRQYXJhbSgiSGVhbHRoMiIsICJBdXRvIFIgd2hlbiBIUCA+ICVIZWFsdGggIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAyMCwgMCwgMTAwLCAtMSkNCgktLSBBZHZhbmNlZCBQYWNrZXQgTWVudSAtLQ0KCVlhc3VvTWVudS5BZHZhbmNlZDphZGRTdWJNZW51KCJQYWNrZXRjYXN0aW5nOiAiLCAiUGFja2V0cyIpDQoJWWFzdW9NZW51LkFkdmFuY2VkLlBhY2tldHM6YWRkUGFyYW0oIkluZm8iLCAiLS0tIFBhY2tldCBTZXR0aW5ncyAtLS0iLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQoJWWFzdW9NZW51LkFkdmFuY2VkLlBhY2tldHM6YWRkUGFyYW0oInBhY2tldHNRIiwgIlVzZSBwYWNrZXRzIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5QYWNrZXRzOmFkZFBhcmFtKCJwYWNrZXRzVyIsICJVc2UgcGFja2V0cyBXIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkJDQoJWWFzdW9NZW51LkFkdmFuY2VkLlBhY2tldHM6YWRkUGFyYW0oInBhY2tldHNFIiwgIlVzZSBwYWNrZXRzIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KCVlhc3VvTWVudS5BZHZhbmNlZC5QYWNrZXRzOmFkZFBhcmFtKCJwYWNrZXRzUiIsICJVc2UgcGFja2V0cyBSIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgktLSBFeHRyYSBNZW51IC0tDQoJWWFzdW9NZW51LkV4dHJhczphZGRQYXJhbSgiQXV0b0xldmVsIiwgIkF1dG8gTGV2ZWwiLFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJWWFzdW9NZW51LkV4dHJhczphZGRQYXJhbSgiU3RhcnRMdiIsICJDaG9vc2Ugc3RhcnQgbHYiLFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlFFVyIsIkVRVyJ9KQkNCglZYXN1b01lbnUuRXh0cmFzOmFkZFBhcmFtKCJhdXRvUG90aW9uczEiLCAiQXV0byBwb3Rpb25zIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCglZYXN1b01lbnUuRXh0cmFzOmFkZFBhcmFtKCJhdXRvUG90aW9ucyIsICJVc2UgcG90aW9ucyB3aGVuIEhQIDwgJUhlYWx0aCIsU0NSSVBUX1BBUkFNX1NMSUNFLCA2MCwgMSwgMTAwLCAwKQ0KCVlhc3VvTWVudS5FeHRyYXM6YWRkUGFyYW0oIlRTIiwgIlNlbGVjdCBUUyAoUmVxdWlyZSByZWxvYWQpIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHsgCSAJDQoJCSJTZWxlY3RvciIsIAkgCQ0KCQkiRGVmYXVsdCBUYXJnZXQgU2VsZWN0b3IiIAkgCQ0KCQl9KQ0KCS0tIFByZWRpY3Rpb24gTWVudSAtLQ0KCWlmIFZJUF9VU0VSIHRoZW4NCgkgICAgWWFzdW9NZW51LlByZWRpY3Rpb246YWRkUGFyYW0oIm1vZGUiLCAiQ3VycmVudCBQcmVkaWN0aW9uOiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlZQcmVkaWN0aW9uIiwiSFByZWRpY3Rpb24ifSkNCgllbHNlDQoJICAgIFlhc3VvTWVudS5QcmVkaWN0aW9uOmFkZFBhcmFtKCJtb2RlIiwgIkN1cnJlbnQgUHJlZGljdGlvbjoiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJWUHJlZGljdGlvbiIsIkhQcmVkaWN0aW9uIn0pDQoJZW5kDQogICAgLS0gS2lsbFN0ZWFsIC0tDQoJWWFzdW9NZW51LktTOmFkZFBhcmFtKCJLaWxsU3RlYWwiLCAiVXNlIEtpbGxTdGVhbCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuS1M6YWRkUGFyYW0oIlVzZUlnbml0ZSIsICJVc2UgSWduaXRlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCVlhc3VvTWVudS5LUzphZGRQYXJhbSgiVXNlUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuS1M6YWRkUGFyYW0oIlVzZVEyIiwgIlVzZSBRMiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglZYXN1b01lbnUuS1M6YWRkUGFyYW0oIlVzZUUiLCAiVXNlIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LktTOmFkZFBhcmFtKCJVc2VSIiwgIlVzZSBSIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgIC0tIEVzY2FwZSAtLQ0KICAgIFlhc3VvTWVudS5Fc2NhcGU6YWRkUGFyYW0oIk1vdXNlIiwgIk1vdmUgdG8gbW91c2UiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgWWFzdW9NZW51LkVzY2FwZTphZGRQYXJhbSgiU3RhY2tRIiwgIlN0YWNrIFEgd2hlbiBFc2NhcGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgLS0gV2FsbGp1bXAgLS0NCiAgICBZYXN1b01lbnUuV2FsbGp1bXA6YWRkUGFyYW0oIkVuYWJsZWQiLCAiRW5hYmxlZCBXYWxsSnVtcCIsICBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJWWFzdW9NZW51LldhbGxqdW1wOmFkZFBhcmFtKCJTdGFja1EiLCAiU3RhY2sgUSB3aGVuIFdhbGxqdW1wIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgIFlhc3VvTWVudS5XYWxsanVtcDphZGRQYXJhbSgiRHJhd0QiLCAiRG9uJ3QgZHJhdyBjaXJjbGVzIGlmIHRoZSBkaXN0YW5jZSA+IiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxNTAwLCAwLCAxMDAwMCwgMCkJCQ0KICAgIFlhc3VvTWVudS5XYWxsanVtcDphZGRQYXJhbSgiRHJhd0oiLCAiRHJhdyBqdW1wIHBvaW50cyIsICBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgIFlhc3VvTWVudS5XYWxsanVtcDphZGRQYXJhbSgiRHJhd0wiLCAiRHJhdyBsYW5kaW5nIHBvaW50cyIsICBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgWWFzdW9NZW51LldhbGxqdW1wOmFkZFN1Yk1lbnUoIkNvbG9ycyIsICJDb2xvcnMiKQ0KICAgIFlhc3VvTWVudS5XYWxsanVtcC5Db2xvcnM6YWRkUGFyYW0oIkpDb2xvciIsICJKdW1wIHBvaW50IGNvbG9yIiwgU0NSSVBUX1BBUkFNX0NPTE9SLCB7MTAwLCAwLCAxMDAsIDI1NX0pDQogICAgWWFzdW9NZW51LldhbGxqdW1wLkNvbG9yczphZGRQYXJhbSgiTENvbG9yIiwgIkxhbmRpbmcgcG9pbnQgY29sb3IiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsIHsxMDAsIDI1NSwgMjU1LCAwfSkNCiAgICAtLSBEcmF3aW5ncyAtLQ0KICAgIFlhc3VvTWVudS5EcmF3OmFkZFBhcmFtKCJkcmF3UVJhbmdlIiwgIkRyYXcgKFEpIFJhbmdlOiAiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgIFlhc3VvTWVudS5EcmF3OmFkZFBhcmFtKCJkcmF3UTJSYW5nZSIsICJEcmF3IChRMikgUmFuZ2U6ICIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgWWFzdW9NZW51LkRyYXc6YWRkUGFyYW0oImRyYXdXUmFuZ2UiLCAiRHJhdyAoVykgUmFuZ2U6ICIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgWWFzdW9NZW51LkRyYXc6YWRkUGFyYW0oImRyYXdFUmFuZ2UiLCAiRHJhdyAoRSkgUmFuZ2U6ICIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgWWFzdW9NZW51LkRyYXc6YWRkUGFyYW0oImRyYXdSUmFuZ2UiLCAiRHJhdyAoUikgUmFuZ2U6ICIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgWWFzdW9NZW51LkRyYXc6YWRkUGFyYW0oImRyYXdUYXJnZXQiLCAiRHJhdyBjdXJyZW50IHRhcmdldDogIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICBZYXN1b01lbnUuRHJhdzphZGRQYXJhbSgiTGFnRnJlZSIsICJMYWcgRnJlZSBDaXJjbGVzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICBZYXN1b01lbnUuRHJhdzphZGRQYXJhbSgiQ0wiLCAiTGVuZ3RoIGJlZm9yZSBTbmFwcGluZyIsIFNDUklQVF9QQVJBTV9TTElDRSwgNzUsIDEsIDIwMDAsIDApDQoJLS0gSHVtYW5pemVyIC0tDQoJWWFzdW9NZW51Lkh1bWFuaXplcjphZGRQYXJhbSgiRWRlbGF5IiwgIkRlbGF5IGNhc3QgRSAobXMpIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAwLCAwLCAxMDAwLCAwKQ0KCVlhc3VvTWVudS5IdW1hbml6ZXI6YWRkUGFyYW0oIldkZWxheSIsICJEZWxheSBjYXN0IFcgKG1zKSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMCwgMCwgMzAwLCAwKQ0KICAgIC0tIFBlcm1hc2hvdyAtLQ0KICAgIFlhc3VvTWVudS5QZXJtYVNob3c6YWRkUGFyYW0oIkF1dG9RIiwgIlNob3cgQXV0b1EiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCQ0KICAgIFlhc3VvTWVudS5QZXJtYVNob3c6YWRkUGFyYW0oIlNtYXJ0SGFyYXNzIiwgIlNob3cgU21hcnRIYXJhc3MiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgWWFzdW9NZW51LlBlcm1hU2hvdzphZGRQYXJhbSgiU21hcnRFIiwgIlNob3cgU21hcnRFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQkNCiAgICBZYXN1b01lbnUuUGVybWFTaG93OmFkZFBhcmFtKCJXYWxsSnVtcCIsICJTaG93IFdhbGxKdW1wIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQkNCiAgICBZYXN1b01lbnUuUGVybWFTaG93OmFkZFBhcmFtKCJIYXJhc3NUb2dnbGVLZXkiLCAiU2hvdyBIYXJhc3NUb2dnbGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgWWFzdW9NZW51LlBlcm1hU2hvdzphZGRQYXJhbSgiVWx0aW1hdGVUb2dnbGVLZXkiLCAiU2hvdyBVbHRpbWF0ZVRvZ2dsZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAtLSBLZXlCaW5kaW5ncyAtLQ0KICAgIFlhc3VvTWVudTphZGRQYXJhbSgiSW5mbyIsICItLS0gS2V5cyBTZXR0aW5ncyAtLS0iLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQogICAgWWFzdW9NZW51OmFkZFBhcmFtKCJDb21ib0tleSIsICJTQlRXLUNvbWJvIEtleTogIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgIFlhc3VvTWVudTphZGRQYXJhbSgiSGFyYXNzS2V5IiwgIkhhcmFzcyBLZXk6ICIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiQyIpKQ0KICAgIFlhc3VvTWVudTphZGRQYXJhbSgiSGFyYXNzVG9nZ2xlS2V5IiwgIkhhcmFzcyBUb2dnbGUgS2V5OiAiLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiSiIpKQ0KICAgIFlhc3VvTWVudTphZGRQYXJhbSgiVWx0aW1hdGVUb2dnbGVLZXkiLCAiVWx0aW1hdGUgVG9nZ2xlIEtleTogIiwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCB0cnVlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgIFlhc3VvTWVudTphZGRQYXJhbSgiQXV0b1FLZXkiLCAiQXV0byAoUSkgS2V5OiAiLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiSyIpKQ0KICAgIFlhc3VvTWVudTphZGRQYXJhbSgiTGFzdGhpdEtleSIsICJMYXN0aGl0IEtleTogIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgWWFzdW9NZW51OmFkZFBhcmFtKCJDbGVhcktleSIsICJKdW5nbGUtIGFuZCBMYW5lQ2xlYXIgS2V5OiAiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICBZYXN1b01lbnU6YWRkUGFyYW0oIkVzY2FwZUtleSIsICJFc2NhcGUvV2FsbGp1bXAgS2V5OiAiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkciKSkNCiAgICAtLSBPdGhlciAtLQ0KCVlhc3VvTWVudTphZGRQYXJhbSgiTG9jayIsICJGb2N1cyBTZWxlY3RlZCBUYXJnZXQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgWWFzdW9NZW51OmFkZFBhcmFtKCJWZXJzaW9uIiwgInZlcnNpb24iLCBTQ1JJUFRfUEFSQU1fSU5GTywgdmVyc2lvbikNCiAgICBZYXN1b01lbnU6YWRkUGFyYW0oIkF1dGhvciIsICJBdXRob3IiLCBTQ1JJUFRfUEFSQU1fSU5GTywgQXV0aG9yKQ0KZW5kDQoNCmZ1bmN0aW9uIFdhbGxNZW51KCkNCiAgICBZYXN1b1dhbGwgPSBzY3JpcHRDb25maWcoIllhc3VvIEF1dG8gV2FsbCBNZW51IiwiWWFzdW9XYWxsIikNCgkgICAgWWFzdW9XYWxsOmFkZFBhcmFtKCJQTVNwZWxsIiwiQmxvY2sgcGFzc2l2ZSBhbmQgbWluaSBzcGVsbHMiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBZYXN1b1dhbGw6YWRkUGFyYW0oIkJBdHRhY2siLCJCbG9jayBzcGVjaWFsIGF0dGFja3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBZYXN1b1dhbGw6YWRkUGFyYW0oIkNBdHRhY2siLCJCbG9jayBjcml0IGF0dGFjayIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpCQkNCiAgICAgICAgZm9yIGksZW5lbXkgaW4gcGFpcnMgKEdldEVuZW15SGVyb2VzKCkpIGRvDQoJCSAgICBpZiBBZGRTa2lsbGlzdFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCgkJCSAgICBmb3IgaixzcGVsbCBpbiBwYWlycyAoU3BlbGxzKSBkbw0KCQkJCSAgICBmb3IgXywgc2tpbGwgaW4gcGFpcnMoQWRkU2tpbGxpc3RbZW5lbXkuY2hhck5hbWVdLnNraWxsYWRkKSBkbw0KCQkJICAgICAgICAgICAgaWYgc2tpbGwuc3BlbGx0eXBlIH49IHNwZWxsIHRoZW4NCgkJCQkJICAgICAgICBpZiBza2lsbFsiWVdhbGwiXSBhbmQgWWFzdW9XYWxsW3Rvc3RyaW5nKHNraWxsLnNwZWxsbmFtZSldID09IG5pbCB0aGVuDQoJCQkJCSAgICAgICAgICAgIFlhc3VvV2FsbDphZGRQYXJhbSh0b3N0cmluZyhza2lsbC5zcGVsbG5hbWUpLCJCbG9jayAiLi50b3N0cmluZyhlbmVteS5jaGFyTmFtZSkuLiIgU3BlbGwgIi4udG9zdHJpbmcoc2tpbGwuc3BlbGx0eXBlKSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCgkJCQkJICAgICAgICBlbmQNCgkJCQkJCSAgICBpZiBza2lsbFNoaWVsZFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCgkJCQkJCSAgICAgICAgZW5lbXlzcGVsbCA9IGVuZW15OkdldFNwZWxsRGF0YShzcGVsbCkubmFtZQ0KCQkJCQkJCSAgICBzcGVsbHR5cGUsIGNhc3R0eXBlID0gZ2V0U3BlbGxUeXBlKGVuZW15LCBlbmVteXNwZWxsKQ0KCQkJCQkJCSAgICBpZiBza2lsbFNoaWVsZFtlbmVteS5jaGFyTmFtZV1bc3BlbGx0eXBlXVsiWVdhbGwiXSBhbmQgWWFzdW9XYWxsW3Rvc3RyaW5nKGVuZW15OkdldFNwZWxsRGF0YShzcGVsbCkubmFtZSldID09IG5pbCB0aGVuDQoJCQkJCQkJICAgICAgICBZYXN1b1dhbGw6YWRkUGFyYW0odG9zdHJpbmcoZW5lbXk6R2V0U3BlbGxEYXRhKHNwZWxsKS5uYW1lKSwiQmxvY2sgIi4udG9zdHJpbmcoZW5lbXkuY2hhck5hbWUpLi4iIFNwZWxsICIuLnRvc3RyaW5nKFNwZWxsczJbal0pLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KCQkJCQkJCSAgICBlbmQNCgkJCQkJCSAgICBlbmQNCgkJCQkJICAgIGVsc2UNCgkJCQkJCSAgICBpZiBza2lsbFsiWVdhbGwiXSBhbmQgWWFzdW9XYWxsW3Rvc3RyaW5nKHNraWxsLnNwZWxsbmFtZSldID09IG5pbCB0aGVuDQoJCQkJCSAgICAgICAgICAgIFlhc3VvV2FsbDphZGRQYXJhbSh0b3N0cmluZyhza2lsbC5zcGVsbG5hbWUpLCJCbG9jayAiLi50b3N0cmluZyhlbmVteS5jaGFyTmFtZSkuLiIgU3BlbGwgIi4udG9zdHJpbmcoU3BlbGxzMltqXSksU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQoJCQkJCSAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQJCQkJCQkJDQoJCQkJCWVuZAkNCgkJCQllbmQNCgkJCWVsc2UNCiAgICAgICAgICAgICAgICBmb3IgaixzcGVsbCBpbiBwYWlycyAoU3BlbGxzKSBkbw0KCQkJICAgICAgICBpZiBza2lsbFNoaWVsZFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15c3BlbGwgPSBlbmVteTpHZXRTcGVsbERhdGEoc3BlbGwpLm5hbWUNCgkgICAgICAgICAgICAgICAgICAgIHNwZWxsdHlwZSwgY2FzdHR5cGUgPSBnZXRTcGVsbFR5cGUoZW5lbXksIGVuZW15c3BlbGwpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBza2lsbFNoaWVsZFtlbmVteS5jaGFyTmFtZV0gdGhlbiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBza2lsbFNoaWVsZFtlbmVteS5jaGFyTmFtZV1bc3BlbGx0eXBlXVsiWVdhbGwiXSB0aGVuIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZYXN1b1dhbGw6YWRkUGFyYW0odG9zdHJpbmcoZW5lbXk6R2V0U3BlbGxEYXRhKHNwZWxsKS5uYW1lKSwiQmxvY2sgIi4udG9zdHJpbmcoZW5lbXkuY2hhck5hbWUpLi4iIFNwZWxsICIuLnRvc3RyaW5nKFNwZWxsczJbal0pLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kIA0KICAgICAgICBlbmQgDQplbmQNCg0KZnVuY3Rpb24gRGFzaE1lbnUoKQ0KICAgIFlhc3VvRGFzaCA9IHNjcmlwdENvbmZpZygiWWFzdW8gRGFzaCBFdmFkZSBNZW51IiwiWWFzdW9EYXNoIikNCiAgICBZYXN1b0Rhc2g6YWRkUGFyYW0oInNtYXJ0ZGFzaCIsIlVzZSBzbWFydCBkYXNoIGluIGNvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpCQ0KICAgICAgICBmb3IgaSxlbmVteSBpbiBwYWlycyAoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJICAgIGlmIEFkZFNraWxsaXN0W2VuZW15LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KCQkJICAgIGZvciBqLHNwZWxsIGluIHBhaXJzIChTcGVsbHMpIGRvDQoJCQkJICAgIGZvciBfLCBza2lsbCBpbiBwYWlycyhBZGRTa2lsbGlzdFtlbmVteS5jaGFyTmFtZV0uc2tpbGxhZGQpIGRvDQoJCQkgICAgICAgICAgICBpZiBza2lsbC5zcGVsbHR5cGUgfj0gc3BlbGwgdGhlbg0KCQkJCQkJICAgIHNob3R0eXBlID0gc2tpbGwuc2hvdHR5cGUNCgkJCQkJCQlpZiBzaG90dHlwZSA+IDAgYW5kIFlhc3VvRGFzaFt0b3N0cmluZyhza2lsbC5zcGVsbG5hbWUpXSA9PSBuaWwgdGhlbg0KCQkJCQkgICAgICAgICAgICBZYXN1b0Rhc2g6YWRkUGFyYW0odG9zdHJpbmcoc2tpbGwuc3BlbGxuYW1lKSwiRGFzaCB0byBFdmFkZSAiLi50b3N0cmluZyhlbmVteS5jaGFyTmFtZSkuLiIgU3BlbGwgIi4udG9zdHJpbmcoc2tpbGwuc3BlbGx0eXBlKSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCgkJCQkJCSAgICBlbmQNCgkJCQkJCQlpZiBza2lsbFNoaWVsZFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCgkJCQkJCSAgICAgICAgZW5lbXlzcGVsbCA9IGVuZW15OkdldFNwZWxsRGF0YShzcGVsbCkubmFtZQ0KCQkJCQkJCSAgICBzcGVsbHR5cGUsIGNhc3R0eXBlID0gZ2V0U3BlbGxUeXBlKGVuZW15LCBlbmVteXNwZWxsKQ0KCQkJCQkJCSAgICBzaG90dHlwZSA9IHNraWxsRGF0YVtlbmVteS5jaGFyTmFtZV1bc3BlbGx0eXBlXVsidHlwZSJdDQoJCQkJCQkJICAgIGlmIHNob3R0eXBlID4gMCBhbmQgWWFzdW9EYXNoW3Rvc3RyaW5nKGVuZW15OkdldFNwZWxsRGF0YShzcGVsbCkubmFtZSldID09IG5pbCB0aGVuDQoJCQkJCQkJICAgICAgICBZYXN1b0Rhc2g6YWRkUGFyYW0odG9zdHJpbmcoZW5lbXk6R2V0U3BlbGxEYXRhKHNwZWxsKS5uYW1lKSwiRGFzaCB0byBFdmFkZSAiLi50b3N0cmluZyhlbmVteS5jaGFyTmFtZSkuLiIgU3BlbGwgIi4udG9zdHJpbmcoU3BlbGxzMltqXSksU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQoJCQkJCQkJICAgIGVuZA0KCQkJCQkJCWVuZA0KCQkJCQkgICAgZWxzZQ0KCQkJCQkgICAgICAgIHNob3R0eXBlID0gc2tpbGwuc2hvdHR5cGUNCgkJCQkJCSAgICBpZiBzaG90dHlwZSA+IDAgYW5kIFlhc3VvRGFzaFt0b3N0cmluZyhza2lsbC5zcGVsbG5hbWUpXSA9PSBuaWwgdGhlbg0KCQkJCQkgICAgICAgICAgICBZYXN1b0Rhc2g6YWRkUGFyYW0odG9zdHJpbmcoc2tpbGwuc3BlbGxuYW1lKSwiRGFzaCB0byBFdmFkZSAiLi50b3N0cmluZyhlbmVteS5jaGFyTmFtZSkuLiIgU3BlbGwgIi4udG9zdHJpbmcoU3BlbGxzMltqXSksU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQoJCQkJCSAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQJCQkJCQkJDQoJCQkJCWVuZAkNCgkJCQllbmQNCgkJCWVsc2UNCiAgICAgICAgICAgICAgICBmb3IgaixzcGVsbCBpbiBwYWlycyAoU3BlbGxzKSBkbw0KCQkJICAgICAgICBpZiBza2lsbFNoaWVsZFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15c3BlbGwgPSBlbmVteTpHZXRTcGVsbERhdGEoc3BlbGwpLm5hbWUNCgkgICAgICAgICAgICAgICAgICAgIHNwZWxsdHlwZSwgY2FzdHR5cGUgPSBnZXRTcGVsbFR5cGUoZW5lbXksIGVuZW15c3BlbGwpDQoJCQkJCQlpZiAoc3BlbGx0eXBlID09ICJRIiBvciBzcGVsbHR5cGUgPT0gIlciIG9yIHNwZWxsdHlwZSA9PSAiRSIgb3Igc3BlbGx0eXBlID09ICJSIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3R0eXBlID0gc2tpbGxEYXRhW2VuZW15LmNoYXJOYW1lXVtzcGVsbHR5cGVdWyJ0eXBlIl0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzaG90dHlwZSA+IDAgdGhlbgkJCQkJIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZYXN1b0Rhc2g6YWRkUGFyYW0odG9zdHJpbmcoZW5lbXk6R2V0U3BlbGxEYXRhKHNwZWxsKS5uYW1lKSwiRGFzaCB0byBFdmFkZSAiLi50b3N0cmluZyhlbmVteS5jaGFyTmFtZSkuLiIgU3BlbGwgIi4udG9zdHJpbmcoU3BlbGxzMltqXSksU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kIA0KCQkJCQkJZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KCQkJCWVuZA0KICAgICAgICAgICAgZW5kIA0KICAgICAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBPcmJ3YWxrTWVudSgpDQogICAgWWFzdW9PcmJ3YWxrID0gc2NyaXB0Q29uZmlnKCJZYXN1byBPcmJ3YWxrZXIiLCAiWWFzdW9PcmJ3YWxrZXIiKQ0KCSAgICBZYXN1b09yYndhbGs6YWRkUGFyYW0oIm9yYmNob2ljZSIsICJTZWxlY3QgT3Jid2Fsa2VyIChSZXF1aXJlcyBSZWxvYWQpIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDQsIHsgIlNPVyIsICJTeE9yYldhbGsiLCAiTU1BIiwgIlNBQyIgfSkNCgkgICAgaWYgWWFzdW9PcmJ3YWxrLm9yYmNob2ljZSA9PSAxIHRoZW4NCgkJICAgIHJlcXVpcmUgIlNPVyINCgkJICAgIFNPV2kgPSBTT1coVlApDQoJCSAgICBTT1dpOlJlZ2lzdGVyQWZ0ZXJBdHRhY2tDYWxsYmFjayhBdXRvQXR0YWNrUmVzZXQpIA0KCQkgICAgU09XaTpMb2FkVG9NZW51KFlhc3VvT3Jid2FsaykNCgkJICAgIFlhc3VvT3Jid2FsazphZGRQYXJhbSgiZHJhd3JhbmdlIiwgIkRyYXcgQUEgUmFuZ2UiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCSAgICBZYXN1b09yYndhbGs6YWRkUGFyYW0oImRyYXd0YXJnZXQiLCAiRHJhdyBUYXJnZXQgQ2lyY2xlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkgICAgWWFzdW9PcmJ3YWxrOmFkZFBhcmFtKCJmb2N1c3RhcmdldCIsICJGb2N1cyBTZWxlY3RlZCBUYXJnZXQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCWVuZA0KCSAgICBpZiBZYXN1b09yYndhbGsub3JiY2hvaWNlID09IDIgdGhlbg0KCSAgICAgICAgaWYgRmlsZUV4aXN0KExJQl9QQVRIIC4uICIvU3hPcmJXYWxrLmx1YSIpIHRoZW4NCgkJICAgICAgICByZXF1aXJlKCJTeE9yYldhbGsiKQ0KCQkgICAgICAgIFN4T3JiOkxvYWRUb01lbnUoWWFzdW9PcmJ3YWxrKQ0KCQkgICAgICAgIFlhc3VvT3Jid2FsazphZGRQYXJhbSgiZHJhd3RhcmdldCIsICJEcmF3IFRhcmdldCBDaXJjbGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICAgICAgICBlbHNlDQoJCSAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiIzY2OTlGRlwiPkRvd25sb2FkaW5nIGxpYnMgLi4uLi4uPC9mb250PiIpDQoJCSAgICAgICAgRG93bmxvYWRGaWxlKCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU3VwZXJ4MzIxL0JvTC9tYXN0ZXIvY29tbW9uL1N4T3JiV2Fsay5sdWEiLCBMSUJfUEFUSCAuLiAiL1N4T3JiV2Fsay5sdWEiLCBmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiM2Njk5RkZcIj5SZXF1aXJlZCBsaWJyYXJpZXMgZG93bmxvYWRlZCBzdWNjZXNzZnVsbHksIHBsZWFzZSByZWxvYWQgKERvdWJsZSBGOSk8L2ZvbnQ+IikgZW5kKQ0KICAgICAgICAgICAgZW5kDQoJICAgIGVuZA0KCSAgICBpZiBZYXN1b09yYndhbGsub3JiY2hvaWNlID09IDMgdGhlbg0KCQkgICAgWWFzdW9PcmJ3YWxrOmFkZFBhcmFtKCJvcmJ3YWxrIiwgIk9yYldhbGtlciIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCgkJICAgIFlhc3VvT3Jid2FsazphZGRQYXJhbSgiaHlicmlkIiwgIkh5YnJpZE1vZGUiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCgkJICAgIFlhc3VvT3Jid2FsazphZGRQYXJhbSgibGFuZWNsZWFyIiwgIkxhbmVDbGVhciIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiQSIpKQ0KCQllbmQNCmVuZA0KDQpmdW5jdGlvbiBQZXJtYVNob3coKQ0KICAgIC0tIFBlcm1hU2hvdyAtLQ0KCWlmIFlhc3VvTWVudS5QZXJtYVNob3cuU21hcnRFIHRoZW4NCiAgICAJWWFzdW9NZW51LkNvbWJvOnBlcm1hU2hvdygic21hcnRlIikgDQogICAgZW5kCQ0KCWlmIFlhc3VvTWVudS5QZXJtYVNob3cuU21hcnRIYXJhc3MgdGhlbg0KICAgIAlZYXN1b01lbnUuSGFyYXNzOnBlcm1hU2hvdygic21hcnRoYXJhc3MiKSANCiAgICBlbmQJDQoJaWYgWWFzdW9NZW51LlBlcm1hU2hvdy5XYWxsSnVtcCB0aGVuDQogICAgCVlhc3VvTWVudS5XYWxsanVtcDpwZXJtYVNob3coIkVuYWJsZWQiKSANCiAgICBlbmQNCiAgICBpZiBZYXN1b01lbnUuUGVybWFTaG93LkhhcmFzc1RvZ2dsZUtleSB0aGVuDQogICAgCVlhc3VvTWVudTpwZXJtYVNob3coIkhhcmFzc1RvZ2dsZUtleSIpIA0KICAgIGVuZA0KICAgIGlmIFlhc3VvTWVudS5QZXJtYVNob3cuVWx0aW1hdGVUb2dnbGVLZXkgdGhlbg0KICAgIAlZYXN1b01lbnU6cGVybWFTaG93KCJVbHRpbWF0ZVRvZ2dsZUtleSIpIA0KICAgIGVuZA0KCWlmIFlhc3VvTWVudS5QZXJtYVNob3cuQXV0b1EgdGhlbg0KICAgIAlZYXN1b01lbnU6cGVybWFTaG93KCJBdXRvUUtleSIpIA0KICAgIGVuZAkNCmVuZA0KDQpmdW5jdGlvbiBPblRpY2soKQ0KICAgIEVuZW15TWluaW9uczp1cGRhdGUoKQ0KCUNoZWNrKCkNCglHZXRQcmVkaWN0KCkNCglpZiBZYXN1b01lbnUuRXh0cmFzLkF1dG9MZXZlbCB0aGVuDQoJICAgIEF1dG9sZXZlbCgpDQoJZW5kDQogICAgaWYgWWFzdW9NZW51LkV4dHJhcy5hdXRvUG90aW9uczEgdGhlbg0KICAgICAgICBBdXRvUG90aW9ucygpDQogICAgZW5kDQoJaWYgVGRhc2hpbmcgfj0gZmFsc2UgYW5kIG9zLmNsb2NrKCkgPiBFZHVyYXRpb24yIHRoZW4NCgkJVGRhc2hpbmcgPSBmYWxzZQ0KCWVuZA0KCWlmIFRkYXNoaW5nMiB+PSBmYWxzZSBhbmQgb3MuY2xvY2soKSA+IEVkdXJhdGlvbjMgdGhlbg0KCQlUZGFzaGluZzIgPSBmYWxzZQ0KCWVuZA0KCVRhcmdldCA9IEdldEN1c3RvbVRhcmdldCgpDQoJaWYgVGFyZ2V0IH49IG5pbCB0aGVuDQoJCWlmIFlhc3VvTWVudS5Db21ib0tleSB0aGVuIA0KCSAgICAJaWYgWWFzdW9NZW51LkFkdmFuY2VkLkFkdkUudXNlRUdhcCB0aGVuDQoJCQkgICAgaWYgWWFzdW9NZW51LkFkdmFuY2VkLkFkdkUuRUdhcENoZWNrRW5lbWllcyA8PSBDb3VudEVuZW15SGVyb0luUmFuZ2UoMzUwLFRhcmdldCkgYW5kIFlhc3VvTWVudS5BZHZhbmNlZC5BZHZFLkVHYXBDaGVja0FsbGllcyA8PSBDb3VudEFsbHlzSW5SYW5nZSg2MDAsVGFyZ2V0KSBhbmQgR2V0RGlzdGFuY2UoVGFyZ2V0KSA+IEFBcmFuZ2UgdGhlbg0KCSAgICAgICAgCSAgICBpZiBZYXN1b01lbnUuQ29tYm8uc21hcnRlIHRoZW4NCgkJCSAgICAJICAgIFNtYXJ0RShUYXJnZXQpDQoJICAgICAgICAJICAgIGVsc2UgDQogICAgICAgICAgICAgICAgCSAgICBHYXBDbG9zZShUYXJnZXQpIA0KCQkJCSAgICBlbmQNCgkJCQllbmQNCgkJCWVuZA0KCSAgICAJQ29tYm9UKFRhcmdldCkgDQoJCWVuZA0KCQlpZiBZYXN1b01lbnUuSGFyYXNzS2V5IHRoZW4gDQoJICAgIAlpZiBZYXN1b01lbnUuSGFyYXNzLnNtYXJ0aGFyYXNzIHRoZW4NCgkJICAgIAlTbWFydEhhcmFzcyhUYXJnZXQpDQoJCQllbHNlIA0KCQkJICAgIEhhcmFzc1QoVGFyZ2V0KSANCgkJCWVuZA0KCQllbmQNCgkJaWYgWWFzdW9NZW51LkhhcmFzc1RvZ2dsZUtleSB0aGVuIA0KCSAgICAJaWYgWWFzdW9NZW51LkhhcmFzcy5zbWFydGhhcmFzcyB0aGVuDQoJCSAgICAJU21hcnRIYXJhc3MoVGFyZ2V0KQ0KCQkJZWxzZSANCgkJCSAgICBIYXJhc3NUKFRhcmdldCkgDQoJCSAgICBlbmQNCgkgICAgZW5kDQoJCWlmIFlhc3VvTWVudS5BdXRvUUtleSB0aGVuDQoJCSAgICBBdXRvUSgpDQoJCWVuZA0KCWVuZA0KCWlmIFlhc3VvTWVudS5MYXN0aGl0S2V5IHRoZW4NCgkJRmFybUxhc3RoaXQoKSANCgllbmQNCglpZiBZYXN1b01lbnUuQ2xlYXJLZXkgdGhlbg0KCQlGYXJtQ2xlYXIoKSANCgkJSnVuZ2xlQ2xlYXIoKSANCgllbmQNCglpZiBZYXN1b01lbnUuVWx0aW1hdGVUb2dnbGVLZXkgdGhlbg0KCQlBdXRvUigpDQoJZW5kDQoJaWYgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlEudWx0USB0aGVuDQoJCVF3dWx0KCkNCgllbmQNCglpZiBZYXN1b01lbnUuS1MuS2lsbFN0ZWFsIHRoZW4NCiAgICAJS2lsbHN0ZWFsKCkNCgllbmQNCglpZiBZYXN1b01lbnUuRXNjYXBlS2V5IHRoZW4NCgkgICAgRXNjYXBlKCkNCgkgICAgV2FsbEp1bXBUKCkNCgllbmQNCglpZiBZYXN1b01lbnUuQWR2YW5jZWQuQWR2RS5FdG9tb3VzZSB0aGVuDQoJICAgIEV0b01vdXNlKCkNCgkJbXlIZXJvOk1vdmVUbyhtb3VzZVBvcy54LCBtb3VzZVBvcy56KQ0KCWVuZA0KCWlmIG5vdCBRMTJSRUFEWSBhbmQgbm90IFEzUkVBRFkgdGhlbg0KCSAgICBFQmFjayA9IHRydWUNCgllbHNlIEVCYWNrID0gZmFsc2UgZW5kDQplbmQNCg0KZnVuY3Rpb24gRHJhd0NpcmNsZU5leHRMdmwoeCwgeSwgeiwgcmFkaXVzLCB3aWR0aCwgY29sb3IsIGNob3JkbGVuZ3RoKQ0KCXJhZGl1cyA9IHJhZGl1cyBvciAzMDANCglxdWFsaXR5ID0gbWF0aC5tYXgoOCwgcm91bmQoMTgwIC8gbWF0aC5kZWcoKG1hdGguYXNpbigoY2hvcmRsZW5ndGggLyAoMiAqIHJhZGl1cykpKSkpKSkNCglxdWFsaXR5ID0gMiAqIG1hdGgucGkgLyBxdWFsaXR5DQoJcmFkaXVzID0gcmFkaXVzICogLjkyDQogICAgbG9jYWwgcG9pbnRzID0ge30NCiAgICBmb3IgdGhldGEgPSAwLCAyICogbWF0aC5waSArIHF1YWxpdHksIHF1YWxpdHkgZG8NCgkJbG9jYWwgYyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoeCArIHJhZGl1cyAqIG1hdGguY29zKHRoZXRhKSwgeSwgeiAtIHJhZGl1cyAqIG1hdGguc2luKHRoZXRhKSkpDQoJCXBvaW50c1sjcG9pbnRzICsgMV0gPSBEM0RYVkVDVE9SMihjLngsIGMueSkNCiAgICBlbmQNCglEcmF3TGluZXMyKHBvaW50cywgd2lkdGggb3IgMSwgY29sb3Igb3IgNDI5NDk2NzI5NSkNCmVuZA0KDQpmdW5jdGlvbiByb3VuZChudW0pDQoJaWYgbnVtID49IDAgdGhlbg0KICAgIAlyZXR1cm4gbWF0aC5mbG9vcihudW0gKyAwLjUpDQoJZWxzZQ0KICAgIAlyZXR1cm4gbWF0aC5jZWlsKG51bSAtIDAuNSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBEcmF3Q2lyY2xlMih4LCB5LCB6LCByYWRpdXMsIGNvbG9yKQ0KCWxvY2FsIHZQb3MxID0gVmVjdG9yKHgsIHksIHopDQoJbG9jYWwgdlBvczIgPSBWZWN0b3IoY2FtZXJhUG9zLngsIGNhbWVyYVBvcy55LCBjYW1lcmFQb3MueikNCglsb2NhbCB0UG9zID0gdlBvczEgLSAodlBvczEgLSB2UG9zMik6bm9ybWFsaXplZCgpICogcmFkaXVzDQoJbG9jYWwgc1BvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModFBvcy54LCB0UG9zLnksIHRQb3MueikpDQoJaWYgT25TY3JlZW4oe3ggPSBzUG9zLngseSA9IHNQb3MueX0sIHt4ID0gc1Bvcy54LHkgPSBzUG9zLnl9KSB0aGVuDQogICAgCURyYXdDaXJjbGVOZXh0THZsKHgsIHksIHosIHJhZGl1cywgMSwgY29sb3IsIFlhc3VvTWVudS5EcmF3LkNMKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uRHJhdygpDQogICAgaWYgbXlIZXJvLmRlYWQgdGhlbiByZXR1cm4gZW5kDQoJDQogICAgaWYgUTEyUkVBRFkgYW5kIFlhc3VvTWVudS5EcmF3LmRyYXdRUmFuZ2UgdGhlbg0KICAgICAgICBEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFJhbmdlcy5RMTIsIEFSR0IoMjU1LCAzOCwgMzgsIDI1NSkpDQogICAgZW5kDQogICAgaWYgUTNSRUFEWSBhbmQgWWFzdW9NZW51LkRyYXcuZHJhd1EyUmFuZ2UgdGhlbg0KICAgICAgICBEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFJhbmdlcy5RMywgQVJHQigyNTUsIDE3OSwgMTUzLCAyNTUpKQ0KICAgIGVuZA0KICAgIGlmIFdSRUFEWSBhbmQgWWFzdW9NZW51LkRyYXcuZHJhd1dSYW5nZSB0aGVuDQogICAgICAgIERyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgUmFuZ2VzLlcsIEFSR0IoMjU1LCAwLCAxOTEsIDI1NSkpDQogICAgZW5kDQogICAgaWYgRVJFQURZIGFuZCBZYXN1b01lbnUuRHJhdy5kcmF3RVJhbmdlIHRoZW4NCiAgICAgICAgRHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCBSYW5nZXMuRSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIGVuZA0KICAgIGlmIFJSRUFEWSBhbmQgWWFzdW9NZW51LkRyYXcuZHJhd1JSYW5nZSB0aGVuDQogICAgICAgIERyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgUmFuZ2VzLlIsIEFSR0IoMjU1LCAyNTUsIDM4LCAzOCkpDQogICAgZW5kDQogICAgaWYgVGFyZ2V0IH49IG5pbCBhbmQgWWFzdW9NZW51LkRyYXcuZHJhd1RhcmdldCB0aGVuDQogICAgICAgIERyYXdDaXJjbGUoVGFyZ2V0LngsIFRhcmdldC55LCBUYXJnZXQueiwgR2V0RGlzdGFuY2UoVGFyZ2V0Lm1pbkJCb3gsIFRhcmdldC5tYXhCQm94KSAvIDIsIEFSR0IoMTAwLDc2LDI1NSw3NikpDQogICAgZW5kDQogIA0KCWlmIFlhc3VvTWVudS5XYWxsanVtcC5FbmFibGVkIHRoZW4NCgkJZm9yIGksIHMgaW4gaXBhaXJzKERyYXdTKSBkbw0KCQkJbG9jYWwgU3BvdHMgPSBKdW1wU3BvdHNbc10NCgkJCWlmIFNwb3RzIHRoZW4NCgkJCQlsb2NhbCBNYXhEaXN0YW5jZSA9IFlhc3VvTWVudS5XYWxsanVtcC5EcmF3RA0KCQkJCWZvciBpLCBzcG90IGluIGlwYWlycyhTcG90cykgZG8NCgkJCQkJaWYgR2V0RGlzdGFuY2VTcXIoc3BvdC5Gcm9tKSA8IE1heERpc3RhbmNlKk1heERpc3RhbmNlIHRoZW4NCgkJCQkJCWlmIFlhc3VvTWVudS5XYWxsanVtcC5EcmF3SiBhbmQgWWFzdW9NZW51LkVzY2FwZUtleSB0aGVuDQoJCQkJCQkJbG9jYWwgY29sb3IgPSBUQVJHQihZYXN1b01lbnUuV2FsbGp1bXAuQ29sb3JzLkpDb2xvcikNCgkJCQkJCQlpZiBHZXREaXN0YW5jZVNxcihteUhlcm8sbW91c2VQb3MpIDwgU1JhZGl1c1NxciB0aGVuDQoJCQkJCQkJCWNvbG9yID0gQVJHQigxMDAsIDI1NSwgNjEsIDIzNikNCgkJCQkJCQkJRHJhd0Nvb2xBcnJvdyhteUhlcm8sIHNwb3QuVG8sIGNvbG9yKQ0KCQkJCQkJCWVuZA0KCQkJCQkJCURyYXdDaXJjbGUyKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIERSYWRpdXMsIGNvbG9yKQ0KCQkJCQkJZW5kDQoJCQkJCQlpZiBZYXN1b01lbnUuV2FsbGp1bXAuRHJhd0wgdGhlbg0KCQkJCQkJCWxvY2FsIGNvbG9yID0gVEFSR0IoWWFzdW9NZW51LldhbGxqdW1wLkNvbG9ycy5MQ29sb3IpDQoJCQkJCQkJbG9jYWwgcG9zID0gc3BvdC5Ubw0KCQkJCQkJCURyYXdDaXJjbGUyKHBvcy54LCBteUhlcm8ueSwgcG9zLnosIERSYWRpdXMsIGNvbG9yKQ0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEN1c3RvbVRhcmdldCgpDQoJaWYgVGFyZ2V0TG9jayB+PSBuaWwgYW5kIFZhbGlkVGFyZ2V0KFRhcmdldExvY2ssIHRzLnJhbmdlKSB0aGVuDQogICAgICAgIHJldHVybiBUYXJnZXRMb2NrDQogICAgZW5kDQogCXRzOnVwZGF0ZSgpCQ0KCWlmIF9HLk1NQV9UYXJnZXQgYW5kIF9HLk1NQV9UYXJnZXQudHlwZSA9PSBteUhlcm8udHlwZSB0aGVuDQoJCXJldHVybiBfRy5NTUFfVGFyZ2V0DQoJZW5kDQoJaWYgX0cuQXV0b0NhcnJ5IGFuZCBWYWxpZFRhcmdldChfRy5BdXRvQ2FycnkuQ3Jvc3NoYWlyOkdldFRhcmdldCgpKSB0aGVuIA0KCSAgICByZXR1cm4gX0cuQXV0b0NhcnJ5LkNyb3NzaGFpcjpHZXRUYXJnZXQoKQ0KCWVuZA0KCWlmIFlhc3VvTWVudS5FeHRyYXMuVFMgPT0gMSB0aGVuDQogICAgCVR0YXJnZXQgPSB0cy50YXJnZXQNCgllbHNlDQogICAgCVR0YXJnZXQgPSB0cy50YXJnZXQNCgllbmQNCglyZXR1cm4gVHRhcmdldA0KZW5kDQoNCmZ1bmN0aW9uIE9uV25kTXNnKG1zZywga2V5KQ0KICBpZiBtc2cgPT0gV01fTEJVVFRPTkRPV04gYW5kIFlhc3VvTWVudS5Mb2NrIHRoZW4NCiAgICBsb2NhbCBkaXMgPSAwDQogICAgbG9jYWwgY3VycmVudA0KICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGlmIGVuZW15IGFuZCBWYWxpZFRhcmdldChlbmVteSkgYW5kIG5vdCBlbmVteS5kZWFkIGFuZCBlbmVteS52aXNpYmxlIGFuZCAoZGlzID49IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykgb3IgY3VycmVudCA9PSBuaWwpIHRoZW4NCiAgICAgICAgZGlzID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICBjdXJyZW50ID0gZW5lbXkNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGlmIGN1cnJlbnQgYW5kIGRpcyA8IDExNSB0aGVuDQogICAgICBpZiBUYXJnZXRMb2NrIGFuZCBjdXJyZW50LmNoYXJOYW1lID09IFRhcmdldExvY2suY2hhck5hbWUgdGhlbg0KICAgICAgICBUYXJnZXRMb2NrID0gbmlsDQogICAgICBlbHNlDQogICAgICAgIFRhcmdldExvY2sgPSBjdXJyZW50DQoJCXByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjc5NENcIj5ZYXN1bzogTmV3IHRhcmdldCA8Zm9udCBjb2xvcj1cIiNGRkRGQkZcIj48Yj5TRUxFQ1RFRDwvYj48L2ZvbnQ+OiAiLi5jdXJyZW50LmNoYXJOYW1lLi4iLjwvZm9udD4iKQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIFNPV3RhcmdldCgpDQplbmQNCg0KZnVuY3Rpb24gQ2hlY2soKQ0KICAgIEJ1ZmZSZXNldCgpDQoJZm9yIGk9MSwgaGVyb01hbmFnZXIuaUNvdW50IGRvDQoJICAgIGxvY2FsIEhlcm8gPSBoZXJvTWFuYWdlcjpHZXRIZXJvKGkpDQoJICAgIGlmIEhlcm8ubmFtZSA9PSBCYXNlNjREZWNvZGUoIlIwY3VTSGtnZHVHN2pXNW4iKSB0aGVuDQoJCSAgICByZXR1cm4NCgkgICAgZW5kDQoJZW5kDQoJaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgPT0gMiB0aGVuIERlbGF5RSA9IDAuMzkNCgllbHNlaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgPT0gMyB0aGVuIERlbGF5RSA9IDAuMzg1DQoJZWxzZWlmIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsID09IDQgdGhlbiBEZWxheUUgPSAwLjM4DQoJZWxzZWlmIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsID09IDUgdGhlbiBEZWxheUUgPSAwLjM3NQ0KCWVuZA0KCURhc2hpbmcgPSBsYXN0QW5pbWF0aW9uID09ICJTcGVsbDMiIGFuZCB0cnVlIG9yIGZhbHNlDQoJUXVsdCA9IGxhc3RBbmltYXRpb24gPT0gIlNwZWxsNCIgYW5kIHRydWUgb3IgZmFsc2UNCglSYW5nZXMuUTMgPSBZYXN1b01lbnUuQWR2YW5jZWQuQWR2US5RU2xpZGVyDQoJDQoJaWYgbm90IFlhc3VvTWVudS5EcmF3LkxhZ0ZyZWUgdGhlbg0KICAgIAlfRy5EcmF3Q2lyY2xlID0gX0cub2xkRHJhd0NpcmNsZQ0KCWVuZA0KCWlmIFlhc3VvTWVudS5EcmF3LkxhZ0ZyZWUgdGhlbg0KICAgIAlfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTINCgllbmQNCgkNCglRMTJSRUFEWSAgPSAobXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWSBhbmQgKCBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5uYW1lID09ICJZYXN1b1FXIiBvciBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5uYW1lID09ICJ5YXN1b3EydyIpKQ0KCVEzUkVBRFkgICA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1EpID09IFJFQURZIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5uYW1lID09ICJ5YXN1b3EzdyIpIA0KCVdSRUFEWSAgICA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZKQ0KCUVSRUFEWSAgICA9IChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZKQ0KCVJSRUFEWSAgICA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1IpID09IFJFQURZKQ0KCUlSRUFEWSAgICA9IChpZ25pdGUgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoaWduaXRlKSA9PSBSRUFEWSkNCgkNCglERkdSRUFEWQkJPSAoZGZnU2xvdAkJfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoZGZnU2xvdCkJCT09IFJFQURZKQ0KCUhYR1JFQURZCQk9IChoeGdTbG90CQl+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChoeGdTbG90KQkJPT0gUkVBRFkpDQoJQldDUkVBRFkJCT0gKGJ3Y1Nsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGJ3Y1Nsb3QpCQk9PSBSRUFEWSkNCglCT1RSS1JFQURZCSAgICA9IChib3Rya1Nsb3QJfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoYm90cmtTbG90KQk9PSBSRUFEWSkNCglTSEVFTlJFQURZCSAgICA9IChzaGVlblNsb3QgCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKHNoZWVuU2xvdCkgCT09IFJFQURZKQ0KCUxJQ0hCQU5FUkVBRFkJPSAobGljaGJhbmVTbG90IH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGxpY2hiYW5lU2xvdCkgPT0gUkVBRFkpDQoJVFJJTklUWVJFQURZCT0gKHRyaW5pdHlTbG90IAl+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbCh0cmluaXR5U2xvdCkgCT09IFJFQURZKQ0KCUxZQU5EUklTUkVBRFkJPSAobGlhbmRyeXNTbG90CX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGxpYW5kcnlzU2xvdCkgPT0gUkVBRFkpDQoJVE1UUkVBRFkJCT0gKHRtdFNsb3QgCQl+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbCh0bXRTbG90KQkJPT0gUkVBRFkpDQoJSERSUkVBRFkJCT0gKGhkclNsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGhkclNsb3QpIAkJPT0gUkVBRFkpDQoJWU9VUkVBRFkJCT0gKHlvdVNsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKHlvdVNsb3QpCQk9PSBSRUFEWSkNCglTT1REUkVBRFkgICAgICAgPSAoc290ZFNsb3QgICAgIH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKHNvdGRTbG90KSAgICAgPT0gUkVBRFkpDQoJDQoJU2xvdHMgPSB7NiwgNywgOCwgOSwgMTAsIDExfQ0KCQ0KCWRmZ1Nsb3QgCQk9IEdldEludmVudG9yeVNsb3RJdGVtKDMxMjgpDQoJaHhnU2xvdCAJCT0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzE0NikNCglid2NTbG90IAkJPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTQ0KQ0KCWJvdHJrU2xvdAkJPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTUzKQkJCQkJCQkNCglzaGVlblNsb3QJCT0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzA1NykNCglsaWNoYmFuZVNsb3QJPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTAwKQ0KCXRyaW5pdHlTbG90CQk9IEdldEludmVudG9yeVNsb3RJdGVtKDMwNzgpDQoJbGlhbmRyeXNTbG90CT0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzE1MSkNCgl0bXRTbG90CQkJPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMDc3KQ0KCWhkclNsb3QJCQk9IEdldEludmVudG9yeVNsb3RJdGVtKDMwNzQpCQ0KCXlvdVNsb3QJCQk9IEdldEludmVudG9yeVNsb3RJdGVtKDMxNDIpCQkNCglzb3RkU2xvdCAgICAgICAgPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTMxKQ0KCQ0KCUl0ZW1zID0gew0KCSAgICBQb3RzID0gew0KICAgICAgICAgICAgcmVnZW5lcmF0aW9ucG90aW9uID0gew0KICAgICAgICAgICAgICAgIE5hbWUgPSAicmVnZW5lcmF0aW9ucG90aW9uIiwNCiAgICAgICAgICAgICAgICBDYXN0VHlwZSA9ICJTZWxmIg0KICAgICAgICAgICAgfQ0KCQl9DQoJfQ0KCWlmIFEzUkVBRFkgdGhlbg0KCQl0cy5yYW5nZSA9IDEzMDANCgllbHNlDQoJCXRzLnJhbmdlID0gOTAwDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gUG90UmVhZHkoc3BlbGxuYW1lKQ0KICBmb3IgXywgc2xvdCBpbiBwYWlycyhTbG90cykgZG8NCiAgICBpZiBJdGVtcy5Qb3RzW215SGVybzpHZXRTcGVsbERhdGEoc2xvdCkubmFtZTpsb3dlcigpXSBhbmQgSXRlbXMuUG90c1tteUhlcm86R2V0U3BlbGxEYXRhKHNsb3QpLm5hbWU6bG93ZXIoKV0uTmFtZSA9PSBzcGVsbG5hbWUgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKHNsb3QpID09IDAgdGhlbg0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgZWxzZQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gQ2FzdFBvdHMoc3BlbGxuYW1lKQ0KICBmb3IgXywgc2xvdCBpbiBwYWlycyhTbG90cykgZG8NCiAgICBpZiBJdGVtcy5Qb3RzW215SGVybzpHZXRTcGVsbERhdGEoc2xvdCkubmFtZTpsb3dlcigpXSBhbmQgSXRlbXMuUG90c1tteUhlcm86R2V0U3BlbGxEYXRhKHNsb3QpLm5hbWU6bG93ZXIoKV0uTmFtZSA9PSBzcGVsbG5hbWUgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChzbG90KSA9PSAwIHRoZW4NCiAgICAgIENhc3RTcGVsbChzbG90KQ0KICAgIGVuZA0KICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBHZXRQcmVkaWN0KCkNCmVuZA0KDQpmdW5jdGlvbiBVc2VWcHJlZCgpDQoJWWFzdW9NZW51LlByZWRpY3Rpb246YWRkU3ViTWVudSgiUHJlZGljdGlvbiBTZXR0aW5ncyIsICJWUHJlZGljdGlvbiIpDQoJWWFzdW9NZW51LlByZWRpY3Rpb24uVlByZWRpY3Rpb246YWRkUGFyYW0oImluZm8iLCAiQ2hvc2UgUSBoaXRjaGFuY2UiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQoJWWFzdW9NZW51LlByZWRpY3Rpb24uVlByZWRpY3Rpb246YWRkUGFyYW0oIlExMkhpdCIsICJRMTIgSGl0Y2hhbmNlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAzLCAwKQ0KCVlhc3VvTWVudS5QcmVkaWN0aW9uLlZQcmVkaWN0aW9uOmFkZFBhcmFtKCJRM0hpdCIsICJRMyBIaXRjaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDMsIDApDQoJWWFzdW9NZW51LlByZWRpY3Rpb24uVlByZWRpY3Rpb246YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCglZYXN1b01lbnUuUHJlZGljdGlvbi5WUHJlZGljdGlvbjphZGRQYXJhbSgiaW5mbzEiLCAiSElUQ0hBTkNFOiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCglZYXN1b01lbnUuUHJlZGljdGlvbi5WUHJlZGljdGlvbjphZGRQYXJhbSgiaW5mbzIiLCAiRmFzdGVyIDwtIExPVyA9IDEgIE5PUk1BTCA9IDIgIEhJR0ggPSAzIC0+IFNsb3dlciIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCmVuZA0KDQpmdW5jdGlvbiBHZXRHYW1lVGltZXJUKCkNCiAgICByZXR1cm4gb3MuY2xvY2soKQ0KZW5kDQoNCmZ1bmN0aW9uIE9uUHJvY2Vzc1NwZWxsKHVuaXQsc3BlbGwpDQogICAgaWYgdW5pdC5pc01lIGFuZCAoc3BlbGwubmFtZSA9PSAieWFzdW9xIiBvciBzcGVsbC5uYW1lID09ICJ5YXN1b3EyIiBvciBzcGVsbC5uYW1lID09ICJ5YXN1b3EzdyIpdGhlbg0KCSAgICBSZXNldEFBKCkNCgllbmQNCiAgICBpZiB1bml0LmlzTWUgYW5kIHNwZWxsLm5hbWUgPT0gIllhc3VvRGFzaFdyYXBwZXIiIHRoZW4NCgkgICAgbGFzdEUgPSBvcy5jbG9jaygpICogMTAwMA0KCQllUG9zLCBzUG9zLCBteVBvcyA9IFZlY3RvcihzcGVsbC5lbmRQb3MueCwgc3BlbGwuZW5kUG9zLnksIHNwZWxsLmVuZFBvcy56KSwgVmVjdG9yKHNwZWxsLnN0YXJ0UG9zLngsIHNwZWxsLnN0YXJ0UG9zLnksIHNwZWxsLnN0YXJ0UG9zLnopLCBWZWN0b3IobXlIZXJvLnBvcy54LCBteUhlcm8ucG9zLnksIG15SGVyby5wb3MueikNCgkJVGFyZ2V0UG9zID0gVmVjdG9yKHNwZWxsLnRhcmdldC5wb3MueCwgc3BlbGwudGFyZ2V0LnBvcy55LCBzcGVsbC50YXJnZXQucG9zLnopDQoJCWlmIEdldERpc3RhbmNlKHNQb3MsVGFyZ2V0UG9zKSA8IDQxMCB0aGVuDQoJCSAgICBkYXNoUG9pbnQgPSBzUG9zICsgKFRhcmdldFBvcyAtIHNQb3MpOm5vcm1hbGl6ZWQoKSAqIDQ3NQ0KCQllbHNlIA0KCQkgICAgZGFzaFBvaW50ID0gc1BvcyArIChUYXJnZXRQb3MgLSBzUG9zKTpub3JtYWxpemVkKCkgKiAoR2V0RGlzdGFuY2Uoc1BvcyxUYXJnZXRQb3MpICsgNjUpDQoJCWVuZA0KCQlFZHVyYXRpb24yID0gb3MuY2xvY2soKSArIDAuNQ0KICAgICAgICBFZHVyYXRpb24zID0gb3MuY2xvY2soKSArIDAuMw0KCSAgICBpZiBFU3RhY2tzID09IDEgdGhlbiBFU3RhY2tzID0gMiBlbmQNCgkJVGRhc2hpbmcgPSB0cnVlDQoJCVRkYXNoaW5nMiA9IHRydWUNCgkgICAgaWYgWWFzdW9NZW51LkhhcmFzc0tleSBvciBZYXN1b01lbnUuSGFyYXNzVG9nZ2xlS2V5IG9yIFlhc3VvTWVudS5Db21ib0tleSBvciBZYXN1b01lbnUuQWR2YW5jZWQuQWR2RS5FdG9tb3VzZSB0aGVuDQoJCQlmb3IgaSwgZW5lbXkgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJCQlpZiBWYWxpZFRhcmdldGVkVChlbmVteSkgYW5kIHNwZWxsLnRhcmdldCA9PSBlbmVteSBhbmQgSXNEYXNoaW5nMigpIGFuZCAoUTEyUkVBRFkgb3IgUTNSRUFEWSkgYW5kIEdldERpc3RhbmNlKHNQb3MsZW5lbXkpID4gMjUwIHRoZW4NCgkJCQkgICAgQ2FzdFNwZWxsKF9RLGVuZW15LngsZW5lbXkueikNCgkJCQllbmQNCgkJCSAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpDQoJCSAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0ZWRUKGVuZW15KSB0aGVuDQoJCQkJCSAgICBsb2NhbCBQcmVkaWN0UG9zRW5lbXkgPSBWUDpHZXRQcmVkaWN0ZWRQb3MoZW5lbXksIDAuMikNCgkJCQkJCWlmIFlhc3VvTWVudS5BZHZhbmNlZC5BZHZRLkV4USA9PSAxIHRoZW4NCgkJCQkJCSAgICBpZiBHZXREaXN0YW5jZShQcmVkaWN0UG9zRW5lbXksZGFzaFBvaW50KSA8IDMyNSBhbmQgR2V0RGlzdGFuY2UoZW5lbXksZGFzaFBvaW50KSA8IDM1MCBhbmQgKFExMlJFQURZIG9yIFEzUkVBRFkpIHRoZW4NCgkJCQkJCQkgICAgQ2FzdFNwZWxsKF9RLGVuZW15LngsZW5lbXkueikNCgkJCQkJCQllbmQNCgkJCQkgICAgICAgIGVsc2UNCgkJCQkJCSAgICBpZiBHZXREaXN0YW5jZShlbmVteSxkYXNoUG9pbnQpIDwgMzAwIGFuZCBHZXREaXN0YW5jZShlbmVteSkgPCAzMjUgYW5kIChRMTJSRUFEWSBvciBRM1JFQURZKSB0aGVuDQoJCQkJICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUSxlbmVteS54LGVuZW15LnopDQoJCQkJCQkJZW5kDQoJCQkJICAgICAgICBlbmQNCgkJCQkgICAgZW5kDQoJCQkJZW5kLCBEZWxheUUpDQoJCQllbmQNCiAgICAgICAgZW5kDQoJCWlmIFlhc3VvTWVudS5DbGVhcktleSB0aGVuDQoJCSAgICAtLURlbGF5QWN0aW9uKGZ1bmN0aW9uKCkNCgkJCS0taWYgb3MuY2xvY2soKSA+IChFZHVyYXRpb24yIC0gMC4wMikgdGhlbg0KCQkJICAgIGlmIGRhc2hQb2ludCBhbmQgQ291bnRNaW5pb25JblJhbmdlKDM1MCxkYXNoUG9pbnQpID4gMSBhbmQgKChRMTJSRUFEWSBhbmQgWWFzdW9NZW51LkxhbmVDTC5Vc2VRKSBvciAoUTNSRUFEWSBhbmQgWWFzdW9NZW51LkxhbmVDTC5Vc2VRMikpIHRoZW4NCgkJCSAgICAgICAgQ2FzdFNwZWxsKF9RLG15SGVyby54LG15SGVyby56KQ0KCQkJICAJZW5kDQoJCQktLWVuZA0KCQkJLS1lbmQsIEVkdXJhdGlvbiAtIDAuMDIpDQoJCWVuZA0KICAgIGVuZCANCiAgICBpZiBZYXN1b01lbnUuQWR2YW5jZWQuQWR2Vy5BdXRvV2FsbCB0aGVuDQogICAgICAgIGlmIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgbm90IG15SGVyby5kZWFkIGFuZCBub3QgKHVuaXQudHlwZSA9PSAib2JqX0FJX01pbmlvbiIgYW5kIHVuaXQudHlwZSA9PSAib2JqX0FJX1R1cnJldCIpIHRoZW4NCgkJICAgIFlXYWxsPSBmYWxzZQ0KCQkgICAgc2hvdHR5cGUscmFkaXVzLG1heGRpc3RhbmNlID0gMCwwLDANCgkJCXNob3R0eXBlMixyYWRpdXMyLG1heGRpc3RhbmNlMiA9IDAsMCwwDQoJCSAgICBpZiB1bml0LnR5cGUgPT0gKCJBSUhlcm9DbGllbnQiIG9yIG15SGVyby50eXBlKSB0aGVuDQoJCQkJaWYgQWRkU2tpbGxpc3RbdW5pdC5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCgkJCQkgICAgZm9yIF8sIHNraWxsIGluIHBhaXJzKEFkZFNraWxsaXN0W3VuaXQuY2hhck5hbWVdLnNraWxsYWRkKSBkbw0KCQkJCSAgICAgICAgaWYgc2tpbGxbc3BlbGwubmFtZV0gfj0gbmlsIGFuZCAoWWFzdW9XYWxsW3NwZWxsLm5hbWVdIG9yIFlhc3VvRGFzaFtzcGVsbC5uYW1lXSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFlXYWxsID0gc2tpbGxbc3BlbGwubmFtZV1bIllXYWxsIl0JDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdHR5cGUgPSBza2lsbFtzcGVsbC5uYW1lXVsic2hvdHR5cGUiXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1cyA9IHNraWxsW3NwZWxsLm5hbWVdWyJyYWRpdXMiXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGRpc3RhbmNlID0gc2tpbGxbc3BlbGwubmFtZV1bIm1heGRpc3RhbmNlIl0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBza2lsbFNoaWVsZFt1bml0LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZV2FsbCwgc2hvdHR5cGUsIHJhZGl1cywgbWF4ZGlzdGFuY2UgPSAJR2V0U3BlbGxUeXBlTGliKHVuaXQsIHNwZWxsLm5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQoJCQkJCQllbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kCQkJCQkJDQoJCQkJZWxzZQ0KCQkJCSAgICBpZiBza2lsbFNoaWVsZFt1bml0LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgWVdhbGwsIHNob3R0eXBlLCByYWRpdXMsIG1heGRpc3RhbmNlID0gCUdldFNwZWxsVHlwZUxpYih1bml0LCBzcGVsbC5uYW1lKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQkgICAgZm9yIGk9MSwgaGVyb01hbmFnZXIuaUNvdW50IGRvDQoJCQlsb2NhbCBhbGx5dGFyZ2V0ID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KCQkJICAgIGlmIGFsbHl0YXJnZXQudGVhbSA9PSBteUhlcm8udGVhbSBhbmQgbm90IGFsbHl0YXJnZXQuZGVhZCBhbmQgYWxseXRhcmdldC5oZWFsdGggPiAwIHRoZW4NCgkJCQkgICAgaGl0Y2hhbXBpb24gPSBmYWxzZQ0KCQkJCQloaXRjaGFtcGlvbjIgPSBmYWxzZQ0KCQkJCSAgICBsb2NhbCBhbGx5SGl0Qm94ID0gYWxseXRhcmdldC5ib3VuZGluZ1JhZGl1cyBvciA2NQ0KCQkJCSAgICBpZiBzaG90dHlwZSA9PSAwIHRoZW4gaGl0Y2hhbXBpb24gPSBzcGVsbC50YXJnZXQgYW5kIHNwZWxsLnRhcmdldC5uZXR3b3JrSUQgPT0gYWxseXRhcmdldC5uZXR3b3JrSUQNCgkJCQkgICAgZWxzZWlmIHNob3R0eXBlID09IDEgdGhlbiBoaXRjaGFtcGlvbiA9IGNoZWNraGl0bGluZXBhc3ModW5pdCwgc3BlbGwuZW5kUG9zLCByYWRpdXMsIG1heGRpc3RhbmNlLCBhbGx5dGFyZ2V0LCBhbGx5SGl0Qm94KQ0KCQkJCSAgICBlbHNlaWYgc2hvdHR5cGUgPT0gMiB0aGVuIGhpdGNoYW1waW9uID0gY2hlY2toaXRsaW5lcG9pbnQodW5pdCwgc3BlbGwuZW5kUG9zLCByYWRpdXMsIG1heGRpc3RhbmNlLCBhbGx5dGFyZ2V0LCBhbGx5SGl0Qm94KQ0KCQkJCSAgICBlbHNlaWYgc2hvdHR5cGUgPT0gMyB0aGVuIGhpdGNoYW1waW9uID0gY2hlY2toaXRhb2UodW5pdCwgc3BlbGwuZW5kUG9zLCByYWRpdXMsIG1heGRpc3RhbmNlLCBhbGx5dGFyZ2V0LCBhbGx5SGl0Qm94KQ0KCQkJCSAgICBlbHNlaWYgc2hvdHR5cGUgPT0gNCB0aGVuIGhpdGNoYW1waW9uID0gY2hlY2toaXRjb25lKHVuaXQsIHNwZWxsLmVuZFBvcywgcmFkaXVzLCBtYXhkaXN0YW5jZSwgYWxseXRhcmdldCwgYWxseUhpdEJveCkNCgkJCQkgICAgZWxzZWlmIHNob3R0eXBlID09IDUgdGhlbiBoaXRjaGFtcGlvbiA9IGNoZWNraGl0d2FsbCh1bml0LCBzcGVsbC5lbmRQb3MsIHJhZGl1cywgbWF4ZGlzdGFuY2UsIGFsbHl0YXJnZXQsIGFsbHlIaXRCb3gpDQoJCQkJICAgIGVsc2VpZiBzaG90dHlwZSA9PSA2IHRoZW4gaGl0Y2hhbXBpb24gPSBjaGVja2hpdGxpbmVwYXNzKHVuaXQsIHNwZWxsLmVuZFBvcywgcmFkaXVzLCBtYXhkaXN0YW5jZSwgYWxseXRhcmdldCwgYWxseUhpdEJveCkgb3IgY2hlY2toaXRsaW5lcGFzcyh1bml0LCBWZWN0b3IodW5pdCkqMi1zcGVsbC5lbmRQb3MsIHJhZGl1cywgbWF4ZGlzdGFuY2UsIGFsbHl0YXJnZXQsIGFsbHlIaXRCb3gpDQoJCQkJICAgIGVsc2VpZiBzaG90dHlwZSA9PSA3IHRoZW4gaGl0Y2hhbXBpb24gPSBjaGVja2hpdGNvbmUoc3BlbGwuZW5kUG9zLCB1bml0LCByYWRpdXMsIG1heGRpc3RhbmNlLCBhbGx5dGFyZ2V0LCBhbGx5SGl0Qm94KQ0KCQkJCSAgICBlbmQNCgkJCQkgICAgaWYgaGl0Y2hhbXBpb24gdGhlbg0KCQkJCQkJaWYgV1JFQURZIGFuZCBhbGx5dGFyZ2V0LmlzTWUgYW5kIFlXYWxsIGFuZCBZYXN1b1dhbGxbc3BlbGwubmFtZV0gdGhlbgkJCQkJCQkNCgkJCQkJCSAgICBDYXN0VyhfVyxzcGVsbC5zdGFydFBvcyxzcGVsbC5zdGFydFBvcykNCgkJCQkJCWVsc2UNCgkJCQkJICAgICAgICBpZiBFUkVBRFkgYW5kIGFsbHl0YXJnZXQuaXNNZSBhbmQgWWFzdW9EYXNoW3NwZWxsLm5hbWVdIHRoZW4NCgkJCQkJCSAgICAtLUVuZW15TWluaW9uczp1cGRhdGUoKQ0KCQkJCQkJICAgICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKEVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KCQkJCQkJCSAgICAgICAgaWYgbWluaW9uIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IFJhbmdlcy5FIGFuZCBub3QgSGF2ZUJ1ZmZFKCJZYXN1b0Rhc2hXcmFwcGVyIiwgbWluaW9uKSB0aGVuDQoJCQkJCQkJCQkJaWYgVGFyZ2V0IH49IG5pbCB0aGVuDQoJCQkJCQkJCQkJICAgIGxvY2FsIFByZWRpY3RQb3MgPSBWUDpHZXRQcmVkaWN0ZWRQb3MoVGFyZ2V0LCAwLjIpDQoJCQkJCQkJCQkJCWlmIFByZWRpY3RQb3MgdGhlbg0KCQkJCQkJCQkJCQkgICAgbG9jYWwgcHJlZGljdFBvcyA9IFByZWRpY3RQb3MNCgkJCQkJCQkJCQkJZWxzZQ0KCQkJCQkJCQkJCQkgICAgbG9jYWwgcHJlZGljdFBvcyA9IG1vdXNlUG9zDQoJCQkJCQkJCQkJCWVuZA0KCQkJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCQkgICAgbG9jYWwgcHJlZGljdFBvcyA9IG1vdXNlUG9zDQoJCQkJCQkJCQkJZW5kDQoJCQkJCQkgICAgCQkgICAgbG9jYWwgY3VycmVudFBvaW50ID0gZUVuZFBvcyhtaW5pb24pDQoJCQkJCQkJCSAgICAgICAgaWYgY3VycmVudFBvaW50ID09IG5pbCBvciBwcmVkaWN0UG9zID09IG5pbCB0aGVuIHJldHVybiBlbmQNCgkJCQkJCQkgICAgCQlpZiBzaG90dHlwZSA9PSAxIHRoZW4gaGl0Y2hhbXBpb24yID0gY2hlY2toaXRsaW5lcGFzcyh1bml0LCBzcGVsbC5lbmRQb3MsIHJhZGl1cywgbWF4ZGlzdGFuY2UsIGN1cnJlbnRQb2ludCwgbXlIZXJvLmJvdW5kaW5nUmFkaXVzKQ0KCQkJCQkgIAkJICAgIAkgICAgZWxzZWlmIHNob3R0eXBlID09IDIgdGhlbiBoaXRjaGFtcGlvbjIgPSBjaGVja2hpdGxpbmVwb2ludCh1bml0LCBzcGVsbC5lbmRQb3MsIHJhZGl1cywgbWF4ZGlzdGFuY2UsIGN1cnJlbnRQb2ludCwgbXlIZXJvLmJvdW5kaW5nUmFkaXVzKQ0KCQkJCQkgIAkgICAgCQkgICAgZWxzZWlmIHNob3R0eXBlID09IDMgdGhlbiBoaXRjaGFtcGlvbjIgPSBjaGVja2hpdGFvZSh1bml0LCBzcGVsbC5lbmRQb3MsIHJhZGl1cywgbWF4ZGlzdGFuY2UsIGN1cnJlbnRQb2ludCwgbXlIZXJvLmJvdW5kaW5nUmFkaXVzKQ0KCQkJCQkgIAkJICAgIAkgICAgZWxzZWlmIHNob3R0eXBlID09IDQgdGhlbiBoaXRjaGFtcGlvbjIgPSBjaGVja2hpdGNvbmUodW5pdCwgc3BlbGwuZW5kUG9zLCByYWRpdXMsIG1heGRpc3RhbmNlLCBjdXJyZW50UG9pbnQsIG15SGVyby5ib3VuZGluZ1JhZGl1cykNCgkJCQkJICAJCSAgICAJICAgIGVsc2VpZiBzaG90dHlwZSA9PSA1IHRoZW4gaGl0Y2hhbXBpb24yID0gY2hlY2toaXR3YWxsKHVuaXQsIHNwZWxsLmVuZFBvcywgcmFkaXVzLCBtYXhkaXN0YW5jZSwgY3VycmVudFBvaW50LCBteUhlcm8uYm91bmRpbmdSYWRpdXMpDQoJCQkJCSAgCSAgICAJCSAgICBlbHNlaWYgc2hvdHR5cGUgPT0gNiB0aGVuIGhpdGNoYW1waW9uMiA9IGNoZWNraGl0bGluZXBhc3ModW5pdCwgc3BlbGwuZW5kUG9zLCByYWRpdXMsIG1heGRpc3RhbmNlLCBjdXJyZW50UG9pbnQsIG15SGVyby5ib3VuZGluZ1JhZGl1cykgb3IgY2hlY2toaXRsaW5lcGFzcyh1bml0LCBWZWN0b3IodW5pdCkqMi1zcGVsbC5lbmRQb3MsIHJhZGl1cywgbWF4ZGlzdGFuY2UsIGN1cnJlbnRQb2ludCwgbXlIZXJvLmJvdW5kaW5nUmFkaXVzKQ0KCQkJCQkgICAJCSAgICAJICAgIGVsc2VpZiBzaG90dHlwZSA9PSA3IHRoZW4gaGl0Y2hhbXBpb24yID0gY2hlY2toaXRjb25lKHNwZWxsLmVuZFBvcywgdW5pdCwgcmFkaXVzLCBtYXhkaXN0YW5jZSwgY3VycmVudFBvaW50LCBteUhlcm8uYm91bmRpbmdSYWRpdXMpDQoJCQkJCQkJICAgIAkJZW5kDQoJCQkJCQkJCSAgICAJaWYgbm90IGhpdGNoYW1waW9uMiBhbmQgbm90IFVuZGVyVHVycmV0KGVFbmRQb3MobWluaW9uKSkgYW5kICgoR2V0RGlzdGFuY2UocHJlZGljdFBvcykgPCBHZXREaXN0YW5jZShwcmVkaWN0UG9zLCBjdXJyZW50UG9pbnQpIGFuZCBub3QgWWFzdW9NZW51LkNvbWJvS2V5KSBvciAoWWFzdW9NZW51LkNvbWJvS2V5IGFuZCBZYXN1b0Rhc2guc21hcnRkYXNoIGFuZCBHZXREaXN0YW5jZShwcmVkaWN0UG9zKSA+IEdldERpc3RhbmNlKHByZWRpY3RQb3MsIGN1cnJlbnRQb2ludCkpIG9yIFlhc3VvTWVudS5IYXJhc3NLZXkpIHRoZW4NCgkJCQkJCQkJICAgIAkJQ2FzdFNwZWxsKF9FLG1pbmlvbikNCgkJCQkJCQkJICAgIAllbHNlDQoJCQkJCQkJCQkgICAgICAgIGlmIFdSRUFEWSBhbmQgYWxseXRhcmdldC5pc01lIGFuZCBZV2FsbCBhbmQgWWFzdW9XYWxsW3NwZWxsLm5hbWVdIHRoZW4JCQkJCQkJDQoJCQkJCQkgICAgICAgICAgICAgICAgICAgICAgICBDYXN0VyhfVyxzcGVsbC5zdGFydFBvcyxzcGVsbC5zdGFydFBvcykNCgkJCQkJCQkgICAgICAgICAgICAgICAgZW5kDQoJCQkJCQkJICAgIAkJZW5kDQoJCQkJCQkJCSAgICBlbmQNCgkJCQkJCQkgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQoJCQkJCQllbmQNCgkJCQkgICAgZW5kDQoJCQkgICAgZW5kDQoJCSAgICBlbmQJCQ0KICAgICAgICBlbmQJDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gR2V0U3BlbGxUeXBlTGliKHVuaXQsIHNwZWxsbmFtZSkNCiAgICBsb2NhbCBZd2FsbD0gZmFsc2UNCglsb2NhbCBTaG90dHlwZSwgUmFkaXVzLCBNYXhkaXN0YW5jZSA9IDAsMCwwICAgDQoJc3BlbGx0eXBlLCBjYXN0dHlwZSA9IGdldFNwZWxsVHlwZSh1bml0LCBzcGVsbG5hbWUpDQoJCWlmIHNwZWxsdHlwZSA9PSAiQkF0dGFjayIgYW5kIFlhc3VvV2FsbC5CQXR0YWNrIHRoZW4NCgkJCVl3YWxsID0gdHJ1ZQ0KCQllbHNlaWYgc3BlbGx0eXBlID09ICJDQXR0YWNrIiBhbmQgWWFzdW9XYWxsLkNBdHRhY2sgdGhlbg0KCQkJWXdhbGwgPSB0cnVlDQoJCWVsc2VpZiAoc3BlbGx0eXBlID09ICJRIiBvciBzcGVsbHR5cGUgPT0gIlciIG9yIHNwZWxsdHlwZSA9PSAiRSIgb3Igc3BlbGx0eXBlID09ICJSIikgYW5kIFlhc3VvV2FsbFtzcGVsbG5hbWVdIHRoZW4NCgkJCVl3YWxsID0gc2tpbGxTaGllbGRbdW5pdC5jaGFyTmFtZV1bc3BlbGx0eXBlXVsiWVdhbGwiXQ0KCQkJU2hvdHR5cGUgPSBza2lsbERhdGFbdW5pdC5jaGFyTmFtZV1bc3BlbGx0eXBlXVsidHlwZSJdDQoJCQlSYWRpdXMgPSBza2lsbERhdGFbdW5pdC5jaGFyTmFtZV1bc3BlbGx0eXBlXVsicmFkaXVzIl0NCgkJCU1heGRpc3RhbmNlID0gc2tpbGxEYXRhW3VuaXQuY2hhck5hbWVdW3NwZWxsdHlwZV1bIm1heGRpc3RhbmNlIl0NCgkJZWxzZWlmIChzcGVsbHR5cGUgPT0gIlEiIG9yIHNwZWxsdHlwZSA9PSAiVyIgb3Igc3BlbGx0eXBlID09ICJFIiBvciBzcGVsbHR5cGUgPT0gIlIiKSBhbmQgWWFzdW9EYXNoW3NwZWxsbmFtZV0gdGhlbg0KCQkJWXdhbGwgPSBza2lsbFNoaWVsZFt1bml0LmNoYXJOYW1lXVtzcGVsbHR5cGVdWyJZV2FsbCJdDQoJCQlTaG90dHlwZSA9IHNraWxsRGF0YVt1bml0LmNoYXJOYW1lXVtzcGVsbHR5cGVdWyJ0eXBlIl0NCgkJCVJhZGl1cyA9IHNraWxsRGF0YVt1bml0LmNoYXJOYW1lXVtzcGVsbHR5cGVdWyJyYWRpdXMiXQ0KCQkJTWF4ZGlzdGFuY2UgPSBza2lsbERhdGFbdW5pdC5jaGFyTmFtZV1bc3BlbGx0eXBlXVsibWF4ZGlzdGFuY2UiXQ0KCQllbHNlaWYgKHNwZWxsdHlwZSA9PSAiUCIgb3Igc3BlbGx0eXBlID09ICJRTSIgb3Igc3BlbGx0eXBlID09ICJXTSIgb3Igc3BlbGx0eXBlID09ICJFTSIpIGFuZCBZYXN1b1dhbGwuUE1TcGVsbCB0aGVuDQoJCQlZd2FsbCA9IHNraWxsU2hpZWxkW3VuaXQuY2hhck5hbWVdW3NwZWxsdHlwZV1bIllXYWxsIl0NCgkJCVNob3R0eXBlID0gc2tpbGxEYXRhW3VuaXQuY2hhck5hbWVdW3NwZWxsdHlwZV1bInR5cGUiXQ0KCQkJUmFkaXVzID0gc2tpbGxEYXRhW3VuaXQuY2hhck5hbWVdW3NwZWxsdHlwZV1bInJhZGl1cyJdDQoJCQlNYXhkaXN0YW5jZSA9IHNraWxsRGF0YVt1bml0LmNoYXJOYW1lXVtzcGVsbHR5cGVdWyJtYXhkaXN0YW5jZSJdDQoJCWVuZA0KCXJldHVybiBZd2FsbCwgU2hvdHR5cGUsIFJhZGl1cywgTWF4ZGlzdGFuY2UNCmVuZA0KDQpmdW5jdGlvbiBTbWFydEUodW5pdCkNCiAgICBpZiB1bml0fj1uaWwgYW5kIEVSRUFEWSB0aGVuDQogICAgICAgIGxvY2FsIGNsb3Nlc3RQb2ludCwgY2xvc2VzdFVuaXQgPSBmaW5kQ2xvc2VzdFBvaW50KHVuaXQpDQogICAgICAgIGlmIGNsb3Nlc3RVbml0IGFuZCBjbG9zZXN0UG9pbnQgYW5kIChZYXN1b01lbnUuQWR2YW5jZWQuQWR2RS51bmRlclRvd2VyIG9yIG5vdCBVbmRlclR1cnJldChjbG9zZXN0UG9pbnQpKSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX0UsIGNsb3Nlc3RVbml0KQ0KICAgICAgICBlbHNlaWYgKG5vdCBjbG9zZXN0VW5pdCBvciBjbG9zZXN0UG9pbnQgYW5kIEdldERpc3RhbmNlKGNsb3Nlc3RQb2ludCwgdW5pdCkgPiBHZXREaXN0YW5jZSh1bml0KSkgYW5kIEdldERpc3RhbmNlKHVuaXQpIDw9IFJhbmdlcy5FIGFuZCBub3QgSGF2ZUJ1ZmZFKCJZYXN1b0Rhc2hXcmFwcGVyIiwgdW5pdCkgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZGFzaFBvcyA9IGVFbmRQb3ModW5pdCkNCiAgICAgICAgICAgIGxvY2FsIGVEbWcgPSBHZXRFZG1nKHVuaXQpDQogICAgICAgICAgICBpZiAoKEdldERpc3RhbmNlKHVuaXQpID4gQUFyYW5nZSBhbmQgbm90IFVuZGVyVHVycmV0KGRhc2hQb3MpKSBvciB1bml0LmhlYWx0aCA8IGVEbWcgKyBDYWxEbWcodW5pdCwgIlEiKSkgYW5kIG5vdCBpc0ZhY2luZyhteUhlcm8sIHVuaXQsIDE1MCkgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfRSwgdW5pdCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgbm90IGNsb3Nlc3RVbml0IGFuZCBHZXREaXN0YW5jZSh1bml0KSA+IFJhbmdlcy5RMTIgYW5kIG5vdCBRM1JFQURZIHRoZW4NCgkJCWZvciBpLCBlbmVteSBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQkJCUUoZW5lbXkpDQoJCQllbmQNCgkJZW5kDQogICAgICAgIGlmIEdldERpc3RhbmNlKHVuaXQpIDw9IDEzMDAgdGhlbg0KCQkgICAgRWdhcGNsb3NlKHVuaXQpDQogICAgICAgICAgICBHYXBDbG9zZSh1bml0KQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZnVuY3Rpb24gRWdhcGNsb3NlKHVuaXQpDQogICAgbG9jYWwgY2xvc2VzdFBvaW50LCBjbG9zZXN0VW5pdCA9IGZpbmRDbG9zZXN0UG9pbnQodW5pdCkNCiAgICBpZiBjbG9zZXN0VW5pdCBhbmQgY2xvc2VzdFBvaW50IGFuZCBub3QgVW5kZXJUdXJyZXQoY2xvc2VzdFBvaW50KSB0aGVuDQogICAgICAgIENhc3RTcGVsbChfRSwgY2xvc2VzdFVuaXQpDQogICAgZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBmaW5kQ2xvc2VzdFBvaW50KHRhcmdldCkNCiAgICBsb2NhbCBjbG9zZXN0UG9pbnQsIGN1cnJlbnRQb2ludCA9IG5pbCwgMA0KCWlmIHRhcmdldC50eXBlID09IG15SGVyby50eXBlIHRoZW4NCgkgICAgbG9jYWwgcHJlZGljdFBvcyA9IFZQOkdldFByZWRpY3RlZFBvcyh0YXJnZXQsIDAuMikNCgkJaWYgcHJlZGljdFBvcyB0aGVuDQoJCSAgICBsb2NhbCB0YXJnZXRQb3MgPSBwcmVkaWN0UG9zDQogICAgICAgIGVsc2UNCiAJCSAgICBsb2NhbCB0YXJnZXRQb3MgPSBtb3VzZVBvcw0KCQllbmQNCgllbHNlDQoJICAgIGxvY2FsIHRhcmdldFBvcyA9IHRhcmdldA0KCWVuZA0KICAgIGlmIHRhcmdldFBvcyB0aGVuDQogICAgICAgIEVuZW15TWluaW9uczp1cGRhdGUoKQ0KCSAgICBKdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoRW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICBpZiBtaW5pb24gYW5kIG1pbmlvbi52YWxpZCBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IFJhbmdlcy5FIGFuZCBub3QgSGF2ZUJ1ZmZFKCJZYXN1b0Rhc2hXcmFwcGVyIiwgbWluaW9uKSB0aGVuDQogICAgICAgICAgICAtLWN1cnJlbnRQb2ludCA9IG15SGVybyArIChWZWN0b3IobWluaW9uKSAtIG15SGVybyk6bm9ybWFsaXplZCgpICogUmFuZ2VzLkUNCgkJCWN1cnJlbnRQb2ludCA9ICBlRW5kUG9zKG1pbmlvbikNCiAgICAgICAgICAgICAgICBpZiBjbG9zZXN0UG9pbnQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50ID0gY3VycmVudFBvaW50DQogICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RVbml0ID0gbWluaW9uDQogICAgICAgICAgICAgICAgZWxzZWlmIEdldERpc3RhbmNlKGN1cnJlbnRQb2ludCwgdGFyZ2V0UG9zKSA8IEdldERpc3RhbmNlKGNsb3Nlc3RQb2ludCwgdGFyZ2V0UG9zKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludCA9IGN1cnJlbnRQb2ludA0KICAgICAgICAgICAgICAgICAgICBjbG9zZXN0VW5pdCA9IG1pbmlvbg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKEp1bmdsZU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgICAgIGlmIG1pbmlvbiBhbmQgbWluaW9uLnZhbGlkIGFuZCBub3QgbWluaW9uLmRlYWQgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gUmFuZ2VzLkUgYW5kIG5vdCBIYXZlQnVmZkUoIllhc3VvRGFzaFdyYXBwZXIiLCBtaW5pb24pIHRoZW4NCiAgICAgICAgICAgIC0tY3VycmVudFBvaW50ID0gbXlIZXJvICsgKFZlY3RvcihtaW5pb24pIC0gbXlIZXJvKTpub3JtYWxpemVkKCkgKiBSYW5nZXMuRQ0KCQkJY3VycmVudFBvaW50ID0gIGVFbmRQb3MobWluaW9uKQ0KICAgICAgICAgICAgICAgIGlmIGNsb3Nlc3RQb2ludCA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnQgPSBjdXJyZW50UG9pbnQNCiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFVuaXQgPSBtaW5pb24NCiAgICAgICAgICAgICAgICBlbHNlaWYgR2V0RGlzdGFuY2UoY3VycmVudFBvaW50LCB0YXJnZXRQb3MpIDwgR2V0RGlzdGFuY2UoY2xvc2VzdFBvaW50LCB0YXJnZXRQb3MpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50ID0gY3VycmVudFBvaW50DQogICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RVbml0ID0gbWluaW9uDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0ZWRUKGVuZW15KSBhbmQgZW5lbXkgYW5kIG5vdCBlbmVteS5kZWFkIGFuZCBlbmVteS52aXNpYmxlIGFuZCBHZXREaXN0YW5jZShlbmVteSkgPD0gUmFuZ2VzLkUgYW5kIG5vdCBIYXZlQnVmZkUoIllhc3VvRGFzaFdyYXBwZXIiLCBlbmVteSkgYW5kICh0cy50YXJnZXQgYW5kIGVuZW15IH49IHRzLnRhcmdldCBvciBub3QgdHMudGFyZ2V0KSB0aGVuDQogICAgICAgICAgICAgICAgLS1jdXJyZW50UG9pbnQgPSBteUhlcm8gKyAoVmVjdG9yKGVuZW15KSAtIG15SGVybyk6bm9ybWFsaXplZCgpICogUmFuZ2VzLkUNCgkJCQljdXJyZW50UG9pbnQgPSAgZUVuZFBvcyhlbmVteSkNCiAgICAgICAgICAgICAgICBpZiBjbG9zZXN0UG9pbnQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50ID0gY3VycmVudFBvaW50DQogICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RVbml0ID0gZW5lbXkNCiAgICAgICAgICAgICAgICBlbHNlaWYgR2V0RGlzdGFuY2UoY3VycmVudFBvaW50LCB0YXJnZXRQb3MpIDwgR2V0RGlzdGFuY2UoY2xvc2VzdFBvaW50LCB0YXJnZXRQb3MpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50ID0gY3VycmVudFBvaW50DQogICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RVbml0ID0gZW5lbXkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gY2xvc2VzdFBvaW50LCBjbG9zZXN0VW5pdA0KZW5kDQoNCmZ1bmN0aW9uIGVFbmRQb3ModW5pdCkNCiAgICBpZiB1bml0IH49IG5pbCB0aGVuDQogICAgICAgIC0tbG9jYWwgZW5kUG9zID0gUG9pbnQodW5pdC54IC0gbXlIZXJvLngsIHVuaXQueiAtIG15SGVyby56KQ0KICAgICAgICAtLWFicyA9IG1hdGguc3FydChlbmRQb3MueCAqIGVuZFBvcy54ICsgZW5kUG9zLnkgKiBlbmRQb3MueSkNCiAgICAgICAgLS1lbmRQb3MyID0gUG9pbnQobXlIZXJvLnggKyBSYW5nZXMuRSAqIChlbmRQb3MueCAvIGFicyksIG15SGVyby56ICsgUmFuZ2VzLkUgKiAoZW5kUG9zLnkgLyBhYnMpKQ0KICAgICAgICAtLXJldHVybiBlbmRQb3MyDQoJCWlmIEdldERpc3RhbmNlKG15SGVybyx1bml0KSA8IDQxMCB0aGVuDQoJCSAgIGRhc2hQb2ludFQgPSBteUhlcm8gKyAoVmVjdG9yKHVuaXQpIC0gbXlIZXJvKTpub3JtYWxpemVkKCkgKiA0ODUNCgkJZWxzZSANCgkJICAgZGFzaFBvaW50VCA9IG15SGVybyArIChWZWN0b3IodW5pdCkgLSBteUhlcm8pOm5vcm1hbGl6ZWQoKSAqIChHZXREaXN0YW5jZShteUhlcm8sdW5pdCkgKyA2NSkNCgkJZW5kDQoJCXJldHVybiBkYXNoUG9pbnRUDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gR2V0RWRtZyh1bml0KQ0KICAgIGVkbWcgPSBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHVuaXQsICgoKDIwKm15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsKSs1MCsoKCgyMCpteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCkrNTApLzEwMCooMjUqRVN0YWNrcykpKSswLjYqbXlIZXJvLmFwKSkNCglyZXR1cm4gZWRtZw0KZW5kDQoNCmZ1bmN0aW9uIE9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikNCiAgICBpZiBub3QgdW5pdCBvciBub3QgYnVmZiB0aGVuIHJldHVybiBlbmQNCiAgICBpZiB1bml0IGFuZCB1bml0LmlzTWUgYW5kIGJ1ZmYubmFtZSA9PSAieWFzdW9kYXNoc2NhbGFyIiB0aGVuIA0KICAgICAgICBFU3RhY2tzID0gMQ0KICAgIGVuZA0KCWlmIHVuaXQgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgYnVmZi5uYW1lID09ICJZYXN1b0Rhc2hXcmFwcGVyIiB0aGVuDQoJICAgIFVuaXRXaXRoRVt1bml0Lm5ldHdvcmtJRF0gPSBvcy5jbG9jaygpICsgKGJ1ZmYuZW5kVGltZSAtIGJ1ZmYuc3RhcnRUaW1lKQ0KCWVuZA0KCWlmIHVuaXQgYW5kIHVuaXQudGVhbSA9PSBURUFNX0VORU1ZIGFuZCB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIGJ1ZmYudHlwZSA9PSAyOSB0aGVuDQoJICAgIC0tdW5pdGtub2NrZWQgPSB1bml0a25vY2tlZCArIDENCgkJS25vY2t1cHNbdW5pdC5uZXR3b3JrSURdID0gb3MuY2xvY2soKSArIChidWZmLmVuZFRpbWUgLSBidWZmLnN0YXJ0VGltZSkNCgllbmQNCglpZiB1bml0IGFuZCB1bml0LnRlYW0gPT0gVEVBTV9FTkVNWSBhbmQgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCAgYnVmZi5uYW1lID09ICJ5YXN1b3EzbWlzIiB0aGVuDQogICAgICAgIGN1cnJlbnRrbm9ja2VkID0gb3MuY2xvY2soKSArIChidWZmLmVuZFRpbWUgLSBidWZmLnN0YXJ0VGltZSkgLSAwLjI1DQogICAgICAgIHRhcmdldGtub2NrZWQgPSB0YXJnZXRrbm9ja2VkICsgMQ0KCQlUYXJnZXRLbm9ja2VkdXBbdW5pdC5uZXR3b3JrSURdID0gb3MuY2xvY2soKSArIChidWZmLmVuZFRpbWUgLSBidWZmLnN0YXJ0VGltZSkNCiAgICBlbmQNCglpZiB1bml0IGFuZCB1bml0LmlzTWUgYW5kIGJ1ZmYubmFtZSA9PSAiUmVnZW5lcmF0aW9uUG90aW9uIiB0aGVuDQoJICAgIFVzaW5nUG90ID0gdHJ1ZQ0KCWVuZA0KZW5kDQoNCg0KZnVuY3Rpb24gT25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpDQogICAgaWYgbm90IHVuaXQgb3Igbm90IGJ1ZmYgb3IgdW5pdC50eXBlIH49IG15SGVyby50eXBlIHRoZW4gcmV0dXJuIGVuZA0KICAgIGlmIHVuaXQgYW5kIHVuaXQuaXNNZSBhbmQgYnVmZi5uYW1lPT0ieWFzdW9kYXNoc2NhbGFyIiB0aGVuIA0KICAgICAgICBFU3RhY2tzID0gMA0KICAgIGVuZA0KCWlmIHVuaXQgYW5kIHVuaXQuaXNNZSBhbmQgYnVmZi5uYW1lID09ICJSZWdlbmVyYXRpb25Qb3Rpb24iIHRoZW4NCgkgICAgVXNpbmdQb3QgPSBmYWxzZQ0KCWVuZA0KCWlmIHVuaXQgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgYnVmZi5uYW1lID09ICJZYXN1b0Rhc2hXcmFwcGVyIiB0aGVuDQoJICAgIGlmIFVuaXRXaXRoRVt1bml0Lm5ldHdvcmtJRF0gfj0gbmlsIHRoZW4NCgkgICAgICAgIFVuaXRXaXRoRVt1bml0Lm5ldHdvcmtJRF0gPSBuaWwNCgkJZW5kDQoJZW5kDQoJaWYgdW5pdCBhbmQgdW5pdC50ZWFtID09IFRFQU1fRU5FTVkgYW5kIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgYnVmZi50eXBlID09IDI5IHRoZW4NCgkJaWYgS25vY2t1cHNbdW5pdC5uZXR3b3JrSURdIH49IG5pbCB0aGVuDQoJICAgICAgICAtLXVuaXRrbm9ja2VkID0gdW5pdGtub2NrZWQgLSAxDQoJCSAgICBLbm9ja3Vwc1t1bml0Lm5ldHdvcmtJRF0gPSBuaWwNCgkgICAgZW5kDQoJZW5kDQoJaWYgdW5pdCBhbmQgdW5pdC50ZWFtID09IFRFQU1fRU5FTVkgYW5kIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgIGJ1ZmYubmFtZSA9PSAieWFzdW9xM21pcyIgdGhlbg0KCSAgICBpZiBUYXJnZXRLbm9ja2VkdXBbdW5pdC5uZXR3b3JrSURdIH49IG5pbCB0aGVuDQogICAgICAgICAgICB0YXJnZXRrbm9ja2VkID0gdGFyZ2V0a25vY2tlZCAtIDENCgkJICAgIFRhcmdldEtub2NrZWR1cFt1bml0Lm5ldHdvcmtJRF0gPSBuaWwNCgkJZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gR2FwQ2xvc2UodW5pdCkNCiAgICBpZiB1bml0IH49IG5pbCB0aGVuDQogICAgICAgIGlmIEdldERpc3RhbmNlKHVuaXQpIDwgQUFyYW5nZSB0aGVuDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGdhcGNsb3NlbSA9IEdldE1pbmlvbk5lYXJVbml0KHVuaXQpDQogICAgICAgIGlmIG5vdCBZYXN1b01lbnUuQWR2YW5jZWQuQWR2RS51bmRlclRvd2VyIGFuZCBVbmRlclR1cnJldChlRW5kUG9zKGdhcGNsb3NlbSkpIHRoZW4NCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBlbmQNCiAgICAgICAgaWYgZ2FwY2xvc2VtIHRoZW4NCiAgICAgICAgICAgIEUoZ2FwY2xvc2VtKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBFKHVuaXQpDQogICAgaWYgdW5pdCB+PSBuaWwgYW5kIFZhbGlkVGFyZ2V0ZWRUKHVuaXQsUmFuZ2VzLkUpIGFuZCBFUkVBRFkgYW5kIG5vdCBIYXZlQnVmZkUoIllhc3VvRGFzaFdyYXBwZXIiLHVuaXQpIHRoZW4NCiAgICAgICAgaWYgWWFzdW9NZW51LkFkdmFuY2VkLlBhY2tldHMucGFja2V0c0UgdGhlbg0KCQkgICAgaWYgbGFzdEUgKyBZYXN1b01lbnUuSHVtYW5pemVyLkVkZWxheSA8IG9zLmNsb2NrKCkgKiAxMDAwIHRoZW4NCiAgICAgICAgICAgICAgICBQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX0UsIHRhcmdldE5ldHdvcmtJZCA9IHVuaXQubmV0d29ya0lEfSk6c2VuZCgpDQoJCQllbmQNCiAgICAgICAgZWxzZQ0KCQkgICAgaWYgbGFzdEUgKyBZYXN1b01lbnUuSHVtYW5pemVyLkVkZWxheSA8IG9zLmNsb2NrKCkgKiAxMDAwIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX0UsIHVuaXQpDQoJCQllbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gQ29tYm9UKHRhcmdldCkNCiAgICBpZiB0YXJnZXQgdGhlbg0KICAgICAgICBpZiBZYXN1b01lbnUuQ29tYm8uVXNlUSB0aGVuDQogICAgICAgICAgICBRMTIodGFyZ2V0KQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgWWFzdW9NZW51LkNvbWJvLlVzZVEyIHRoZW4NCgkJICAgIGlmIEdldERpc3RhbmNlKHRhcmdldCkgPiA0NzUgb3IgSGF2ZUJ1ZmZFKCJZYXN1b0Rhc2hXcmFwcGVyIix0YXJnZXQpIHRoZW4NCiAgICAgICAgICAgICAgICBRMyh0YXJnZXQpDQoJCQllbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIFlhc3VvTWVudS5Db21iby5Vc2VFIGFuZCBub3QgaXNGYWNpbmcobXlIZXJvLCB0YXJnZXQsIDEwMCkgdGhlbg0KICAgICAgICAgICAgaWYgbm90IFlhc3VvTWVudS5BZHZhbmNlZC5BZHZFLnVuZGVyVG93ZXIgYW5kIFVuZGVyVHVycmV0KGVFbmRQb3ModGFyZ2V0KSkgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgCSAgICBpZiBHZXREaXN0YW5jZSh0YXJnZXQpID4gQUFyYW5nZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIC0tRSh0YXJnZXQpDQoJCQkgICAgZWxzZWlmIChRMTJSRUFEWSBvciBRM1JFQURZKSBhbmQgQ291bnRFbmVteUhlcm9JblJhbmdlKDM1MCwgdGFyZ2V0KSA+PSAyIHRoZW4NCgkJCQkgICAgbG9jYWwgTUVDVGFyZ2V0ID0gR2V0TUVDWWFzb3UoR2V0RW5lbXlIZXJvZXMoKSwgUmFuZ2VzLkUsIDM3NSwgVkNfWUFTVU8sIG15SGVybykNCgkJCQkJRShNRUNUYXJnZXQpDQoJCQkJZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIFlhc3VvTWVudS5Db21iby5Vc2VSIGFuZCBSUkVBRFkgYW5kIHRhcmdldGtub2NrZWQgPj0gMSB0aGVuDQoJCQlpZiBub3QgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlIudW5kZXJUb3dlciBhbmQgVW5kZXJUdXJyZXQoQ29tYm9SVW5kZXJUdXJyZXQoKSkgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBZYXN1b01lbnUuQWR2YW5jZWQuQWR2Ui5Db21ub1JoZWFsdGggYW5kIFlhc3VvTWVudS5BZHZhbmNlZC5BZHZSLkhlYWx0aCA+PSB0YXJnZXQuaGVhbHRoICogMTAwIC8gdGFyZ2V0Lm1heEhlYWx0aCB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG5vdCBZYXN1b01lbnUuQWR2YW5jZWQuQWR2Ult0YXJnZXQuY2hhck5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIGVuZA0KCQkJaWYgS25vY2t1cHNbdGFyZ2V0Lm5ldHdvcmtJRF0gfj0gbmlsIHRoZW4NCgkJICAgICAgICBpZiBZYXN1b01lbnUuQWR2YW5jZWQuQWR2Ui5EZWxheSBhbmQgKG9zLmNsb2NrKCkgLSBjdXJyZW50a25vY2tlZCkgPj0gMCB0aGVuDQoJCQkgICAgICAgIFIodGFyZ2V0KQ0KCQkJICAgIGVsc2VpZiBub3QgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlIuRGVsYXkgdGhlbiANCgkJCSAgICAgICAgUih0YXJnZXQpDQoJCQkgICAgZW5kDQoJCQllbmQNCiAgICAgICAgZW5kDQoJCWlmIFlhc3VvTWVudS5Db21iby5Vc2VJdGVtcyB0aGVuDQoJCQlJdGVtc1QodGFyZ2V0KQ0KCQllbmQNCgllbmQNCmVuZA0KDQpWQ19ZQVNVTyA9IGZ1bmN0aW9uKG9iamVjdCkNCglyZXR1cm4gbm90IEhhdmVCdWZmRSgiWWFzdW9EYXNoV3JhcHBlciIsb2JqZWN0KQ0KZW5kDQoNCmZ1bmN0aW9uIEdldE1FQ1lhc291KHBvaW50cywgcmFuZ2UsIHJhZGl1cywgdmFsaWRDaGVjaywgZnJvbSkNCglmcm9tID0gZnJvbSBvciBteUhlcm8NCgkNCglyYWRpdXMgPSByYWRpdXMgKiByYWRpdXMNCgkNCglmdW5jdGlvbiBHZXRWYWxpZGl0eShvYmplY3QpCQ0KCQlsb2NhbCBpblBvcyA9IDANCgkJaWYgR2V0RGlzdGFuY2Uob2JqZWN0KSA8IHJhbmdlIGFuZCB2YWxpZENoZWNrKG9iamVjdCkgdGhlbg0KCQkJbG9jYWwgcG9zID0gVmVjdG9yKGZyb20pICsgKFZlY3RvcihvYmplY3QpIC0gVmVjdG9yKGZyb20pKTpub3JtYWxpemVkKCkgKiByYW5nZQ0KCQkJZm9yIF8sIHAgaW4gaXBhaXJzKHBvaW50cykgZG8gDQoJCQkJaWYgR2V0RGlzdGFuY2VTcXIocCxwb3MpIDwgcmFkaXVzIHRoZW4NCgkJCQkJaW5Qb3MgPSBpblBvcyArIDENCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgkJDQoJCXJldHVybiBpblBvcw0KCWVuZA0KCQ0KCWlmIG5vdCBfX01FQ19NSU5JT05TX0lOSVRfXyB0aGVuDQoJCV9fTUVDX01JTklPTlNfSU5JVF9fID0gdHJ1ZQ0KCWVuZA0KCQ0KCWxvY2FsIGJlc3RUYXJnZXQgPSBuaWwNCglsb2NhbCBiZXN0QW10ID0gMA0KCUVuZW15TWluaW9uczp1cGRhdGUoKQ0KCWZvciBfLCBtaW5pb24gaW4gaXBhaXJzKEVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KCQlsb2NhbCB2YWxpZGl0eSA9IEdldFZhbGlkaXR5KG1pbmlvbikNCg0KCQlpZiB2YWxpZGl0eSA+IGJlc3RBbXQgdGhlbg0KCQkJYmVzdEFtdCA9IHZhbGlkaXR5DQoJCQliZXN0VGFyZ2V0ID0gbWluaW9uDQoJCWVuZA0KCWVuZA0KCQ0KCWZvciBfLCBoZXJvIGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlsb2NhbCB2YWxpZGl0eSA9IEdldFZhbGlkaXR5KGhlcm8pDQoNCgkJaWYgdmFsaWRpdHkgPiBiZXN0QW10IHRoZW4NCgkJCWJlc3RBbXQgPSB2YWxpZGl0eQ0KCQkJYmVzdFRhcmdldCA9IGhlcm8NCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIGJlc3RUYXJnZXQNCmVuZA0KDQpmdW5jdGlvbiBRMTIodW5pdCkNCiAgICBsb2NhbCBDYXN0UGFja2V0ID0gWWFzdW9NZW51LkFkdmFuY2VkLlBhY2tldHMucGFja2V0c1ENCiAgICBpZiBRMTJSRUFEWSBhbmQgVmFsaWRUYXJnZXRlZFQodW5pdCw0NzUpIHRoZW4NCiAgICAgICAgaWYgWWFzdW9NZW51LlByZWRpY3Rpb24ubW9kZSA9PSAxIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIENhc3RQb3NpdGlvbiwgSGl0Q2hhbmNlLCBQb3NpdGlvbiA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odW5pdCwgRGVsYXlzLlExMiwgV2lkdGhzLlExMiwgUmFuZ2VzLlExMiwgU3BlZWRzLlExMiwgbXlIZXJvLCBmYWxzZSkNCgkJCWxvY2FsIFExMkhpdFZQUkUgPSBZYXN1b01lbnUuUHJlZGljdGlvbi5WUHJlZGljdGlvbi5RMTJIaXQNCiAgICAgICAgICAgIGlmIEhpdENoYW5jZSA+PSBRMTJIaXRWUFJFIGFuZCBub3QgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihDYXN0UG9zaXRpb24pIDw9IDQ3NV4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCSAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgSGl0Q2hhbmNlID49IFExMkhpdFZQUkUgYW5kIENhc3RQYWNrZXQgYW5kIG5vdCBJc0Rhc2hpbmcoKSB0aGVuDQoJICAJICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihDYXN0UG9zaXRpb24pIDw9IDQ3NV4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgUVBhY2tldChfUSwgQ2FzdFBvc2l0aW9uLCBDYXN0UG9zaXRpb24pDQoJCSAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIFlhc3VvTWVudS5QcmVkaWN0aW9uLm1vZGUgPT0gMiB0aGVuDQoJCQlsb2NhbCBRUG9zLCBRSGl0Q2hhbmNlLCBOb2ggPSBIUHJlZDpHZXRQcmVkaWN0KEhQUTEyLCB1bml0LCBteUhlcm8pDQoJCQlsb2NhbCBRMTJIaXRWUFJFID0gWWFzdW9NZW51LlByZWRpY3Rpb24uVlByZWRpY3Rpb24uUTEySGl0DQoJCSAgICBpZiBRUG9zIGFuZCBRSGl0Q2hhbmNlID49IFExMkhpdFZQUkUgdGhlbg0KCSAgICAgICAgICAgIGlmIG5vdCBDYXN0UGFja2V0IGFuZCBub3QgSXNEYXNoaW5nKCkgdGhlbg0KCSAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihRUG9zKSA8PSA0NzVeMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIFFQb3MueCwgUVBvcy56KQ0KCQkgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoUVBvcykgPD0gNDc1XjIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgUVBhY2tldChfUSwgUVBvcywgUVBvcykNCgkJICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kIA0KICAgICAgICAgICAgZW5kCQ0KICAgICAgICBlbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBRMyh1bml0KQ0KCWxvY2FsIENhc3RQYWNrZXQgPSBZYXN1b01lbnUuQWR2YW5jZWQuUGFja2V0cy5wYWNrZXRzUQ0KCWlmIFEzUkVBRFkgYW5kIFZhbGlkVGFyZ2V0ZWRUKHVuaXQsOTAwKSB0aGVuDQogICAgCWlmIFlhc3VvTWVudS5QcmVkaWN0aW9uLm1vZGUgPT0gMSB0aGVuDQogICAgCQlsb2NhbCBDYXN0UG9zaXRpb24sIEhpdENoYW5jZSwgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHVuaXQsIERlbGF5cy5RMywgV2lkdGhzLlEzLCBSYW5nZXMuUTMsIFNwZWVkcy5RMywgbXlIZXJvLCBmYWxzZSkNCgkJCWxvY2FsIFEzSGl0VlBSRSA9IFlhc3VvTWVudS5QcmVkaWN0aW9uLlZQcmVkaWN0aW9uLlEzSGl0DQogICAgCQlpZiBIaXRDaGFuY2UgPj0gUTNIaXRWUFJFIGFuZCBub3QgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgCQlpZiBHZXREaXN0YW5jZVNxcihDYXN0UG9zaXRpb24pIDw9IDkwMF4yIHRoZW4NCiAgICAgICAgCQkJQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCQkJZW5kDQoJCQllbHNlaWYgSGl0Q2hhbmNlID49IFEzSGl0VlBSRSBhbmQgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgCQlpZiBHZXREaXN0YW5jZVNxcihDYXN0UG9zaXRpb24pIDw9IDkwMF4yIHRoZW4NCiAgICAgICAgCQkJUVBhY2tldChfUSwgQ2FzdFBvc2l0aW9uLCBDYXN0UG9zaXRpb24pDQoJCQkJZW5kDQoJCQllbmQNCgkJZWxzZWlmIFlhc3VvTWVudS5QcmVkaWN0aW9uLm1vZGUgPT0gMiB0aGVuDQoJCQlsb2NhbCBRUG9zLCBRSGl0Q2hhbmNlLCBOb2ggPSBIUHJlZDpHZXRQcmVkaWN0KEhQUTMsIHVuaXQsIG15SGVybykNCgkJCWxvY2FsIFEzSGl0VlBSRSA9IFlhc3VvTWVudS5QcmVkaWN0aW9uLlZQcmVkaWN0aW9uLlEzSGl0DQoJCSAgICBpZiBRUG9zIGFuZCBRSGl0Q2hhbmNlID49IFEzSGl0VlBSRSB0aGVuDQoJICAgICAgICAgICAgaWYgbm90IENhc3RQYWNrZXQgYW5kIG5vdCBJc0Rhc2hpbmcoKSB0aGVuDQoJICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKFFQb3MpIDw9IDkwMF4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUSwgUVBvcy54LCBRUG9zLnopDQoJCSAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2VpZiBDYXN0UGFja2V0IGFuZCBub3QgSXNEYXNoaW5nKCkgdGhlbg0KCSAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihRUG9zKSA8PSA5MDBeMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBRUGFja2V0KF9RLCBRUG9zLCBRUG9zKQ0KCQkgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQgDQogICAgICAgICAgICBlbmQJDQoJCWVuZAkJDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gUVBhY2tldChpZCwgcGFyYW0xLCBwYXJhbTIpDQoJUGFja2V0KCJTX0NBU1QiLCB7DQogICAgc3BlbGxJZCA9IGlkLA0KICAgIHRvWCA9IHBhcmFtMS54LA0KICAgIHRvWSA9IHBhcmFtMS56LA0KICAgIGZyb21YID0gcGFyYW0yLngsDQogICAgZnJvbVkgPSBwYXJhbTIueg0KCX0pOnNlbmQoKQ0KZW5kDQoNCmZ1bmN0aW9uIENhc3RXKGlkLCBwYXJhbTEsIHBhcmFtMikNCiAgICBsb2NhbCBEZWxheVcgPSBZYXN1b01lbnUuSHVtYW5pemVyLldkZWxheSAvIDEwMDANCiAgICBpZiBZYXN1b01lbnUuQWR2YW5jZWQuUGFja2V0cy5wYWNrZXRzVyB0aGVuDQoJICAgIGlmIERlbGF5VyA9PSAwIHRoZW4NCgkgICAgICAgIFBhY2tldCgiU19DQVNUIiwge3NwZWxsSWQgPSBpZCwgdG9YID0gcGFyYW0xLngsIHRvWSA9IHBhcmFtMS56LCBmcm9tWCA9IHBhcmFtMi54LCBmcm9tWSA9IHBhcmFtMi56fSk6c2VuZCgpDQoJCWVsc2UNCgkJICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkNCgkJCSAgICBQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gaWQsIHRvWCA9IHBhcmFtMS54LCB0b1kgPSBwYXJhbTEueiwgZnJvbVggPSBwYXJhbTIueCwgZnJvbVkgPSBwYXJhbTIuen0pOnNlbmQoKQ0KCQkJZW5kLCBEZWxheVcpDQoJCWVuZA0KCWVsc2UNCgkgICAgaWYgRGVsYXlXID09IDAgdGhlbg0KCSAgICAgICAgQ2FzdFNwZWxsKGlkLCBwYXJhbTEueCwgcGFyYW0yLnopDQoJCWVsc2UNCgkJICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkNCgkJCSAgICBDYXN0U3BlbGwoaWQsIHBhcmFtMS54LCBwYXJhbTIueikNCgkJCWVuZCwgRGVsYXlXKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBXUGFja2V0KGlkLCBwYXJhbTEsIHBhcmFtMikNCglQYWNrZXQoIlNfQ0FTVCIsIHsNCiAgICBzcGVsbElkID0gaWQsDQogICAgdG9YID0gcGFyYW0xLngsDQogICAgdG9ZID0gcGFyYW0xLnosDQogICAgZnJvbVggPSBwYXJhbTIueCwNCiAgICBmcm9tWSA9IHBhcmFtMi56DQoJfSk6c2VuZCgpDQplbmQNCg0KZnVuY3Rpb24gQ29tYm9SVW5kZXJUdXJyZXQoKQ0KCWxvY2FsIGNsb3Nlc3RjaGFtcCA9IG5pbA0KCWZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkgICAgaWYgVGFyZ2V0S25vY2tlZHVwW2VuZW15Lm5ldHdvcmtJRF0gfj0gbmlsIHRoZW4NCgkgICAgICAgIGlmIGNsb3Nlc3RjaGFtcCBhbmQgY2xvc2VzdGNoYW1wLnZhbGlkIGFuZCBlbmVteSBhbmQgZW5lbXkudmFsaWQgdGhlbg0KCSAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKGVuZW15KSA8IEdldERpc3RhbmNlKGNsb3Nlc3RjaGFtcCkgdGhlbg0KCSAgICAgICAgICAgICAgICBjbG9zZXN0Y2hhbXAgPSBlbmVteQ0KCSAgICAgICAgICAgIGVuZA0KCSAgICAgICAgZWxzZQ0KCSAgICAgICAgICAgIGNsb3Nlc3RjaGFtcCA9IGVuZW15DQoJICAgICAgICBlbmQNCgkgICAgZW5kDQoJZW5kDQoJcmV0dXJuIGNsb3Nlc3RjaGFtcA0KZW5kDQoNCmZ1bmN0aW9uIEF1dG9SVW5kZXJUdXJyZXQoKQ0KCWxvY2FsIGNsb3Nlc3RjaGFtcCA9IG5pbA0KCWZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkgICAgaWYgS25vY2t1cHNbZW5lbXkubmV0d29ya0lEXSB+PSBuaWwgdGhlbg0KCSAgICAgICAgaWYgY2xvc2VzdGNoYW1wIGFuZCBjbG9zZXN0Y2hhbXAudmFsaWQgYW5kIGVuZW15IGFuZCBlbmVteS52YWxpZCB0aGVuDQoJICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXkpIDwgR2V0RGlzdGFuY2UoY2xvc2VzdGNoYW1wKSB0aGVuDQoJICAgICAgICAgICAgICAgIGNsb3Nlc3RjaGFtcCA9IGVuZW15DQoJICAgICAgICAgICAgZW5kDQoJICAgICAgICBlbHNlDQoJICAgICAgICAgICAgY2xvc2VzdGNoYW1wID0gZW5lbXkNCgkgICAgICAgIGVuZA0KCSAgICBlbmQNCgllbmQNCglyZXR1cm4gY2xvc2VzdGNoYW1wDQplbmQNCg0KZnVuY3Rpb24gUih1bml0KQ0KCWlmIEdldERpc3RhbmNlKHVuaXQpIDwgUmFuZ2VzLlIgYW5kIFJSRUFEWSBhbmQgS25vY2t1cHNbdW5pdC5uZXR3b3JrSURdIH49IG5pbCB0aGVuDQogICAgICAgIGlmIFlhc3VvTWVudS5BZHZhbmNlZC5QYWNrZXRzLnBhY2tldHNSIHRoZW4NCiAgICAgICAgICAgIFBhY2tldCgiU19DQVNUIiwge3NwZWxsSWQgPSBfUn0pOnNlbmQoKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBDYXN0U3BlbGwoX1IpIA0KICAgICAgICBlbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBJdGVtc1QodGFyZ2V0KQ0KICB0YXJnZXQgPSB0YXJnZXQgb3IgVGFyZ2V0DQogIGlmIFZhbGlkVGFyZ2V0ZWRUKHRhcmdldCkgdGhlbg0KICAgIGlmIERGR1JFQURZIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IDc1MCB0aGVuDQogICAgICBDYXN0U3BlbGwoZGZnU2xvdCwgdGFyZ2V0KQ0KICAgIGVuZA0KICAgIGlmIEhYR1JFQURZIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IDcwMCB0aGVuDQogICAgICBDYXN0U3BlbGwoaHhnU2xvdCwgdGFyZ2V0KQ0KICAgIGVuZA0KICAgIGlmIEJXQ1JFQURZIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IDQ1MCB0aGVuDQogICAgICBDYXN0U3BlbGwoYndjU2xvdCwgdGFyZ2V0KQ0KICAgIGVuZA0KICAgIGlmIEJPVFJLUkVBRFkgYW5kIEdldERpc3RhbmNlKHRhcmdldCkgPD0gNDUwIHRoZW4NCiAgICAgIENhc3RTcGVsbChib3Rya1Nsb3QsIHRhcmdldCkNCiAgICBlbmQNCiAgICBpZiBUTVRSRUFEWSBhbmQgR2V0RGlzdGFuY2UodGFyZ2V0KSA8PSAxODUgdGhlbg0KICAgICAgQ2FzdFNwZWxsKHRtdFNsb3QpDQogICAgZW5kDQogICAgaWYgSERSUkVBRFkgYW5kIEdldERpc3RhbmNlKHRhcmdldCkgPD0gMTg1IHRoZW4NCiAgICAgIENhc3RTcGVsbChoZHJTbG90KQ0KICAgIGVuZA0KICAgIGlmIFlPVVJFQURZIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IDE4NSB0aGVuDQogICAgICBDYXN0U3BlbGwoeW91U2xvdCkNCiAgICBlbmQNCiAgICBpZiBTT1REUkVBRFkgYW5kIEdldERpc3RhbmNlKHRhcmdldCkgPD0gMzIwIHRoZW4NCiAgICAgIENhc3RTcGVsbChzb3RkU2xvdCkNCiAgICBlbmQNCiAgZW5kDQplbmQNCg0KZnVuY3Rpb24gT25BbmltYXRpb24odW5pdCwgYW5pbWF0aW9uTmFtZSkNCiAgaWYgdW5pdC5pc01lIGFuZCBsYXN0QW5pbWF0aW9uIH49IGFuaW1hdGlvbk5hbWUgdGhlbg0KICAgIGxhc3RBbmltYXRpb24gPSBhbmltYXRpb25OYW1lDQogIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIElzRGFzaGluZygpDQogICAgcmV0dXJuIFRkYXNoaW5nDQplbmQNCg0KZnVuY3Rpb24gSXNEYXNoaW5nMigpDQogICAgcmV0dXJuIERhc2hpbmcNCmVuZA0KDQpmdW5jdGlvbiBpc0ZhY2luZyhyYW5nZSwgdGFyZ2V0LCBsaW5lTGVuZ3RoKQ0KICAgIGxvY2FsIHNvdXJjZVZlY3RvciA9IFZlY3RvcihyYW5nZS52aXNpb25Qb3MueCwgcmFuZ2UudmlzaW9uUG9zLnopDQogICAgbG9jYWwgc291cmNlUG9zID0gVmVjdG9yKHJhbmdlLngsIHJhbmdlLnopDQogICAgc291cmNlVmVjdG9yID0gKHNvdXJjZVZlY3Rvci1zb3VyY2VQb3MpOm5vcm1hbGl6ZWQoKQ0KICAgIHNvdXJjZVZlY3RvciA9IHNvdXJjZVBvcyArIChzb3VyY2VWZWN0b3IqKEdldERpc3RhbmNlKHRhcmdldCwgcmFuZ2UpKSkNCiAgICByZXR1cm4gR2V0RGlzdGFuY2VTcXIodGFyZ2V0LCB7DQogICAgeCA9IHNvdXJjZVZlY3Rvci54LA0KICAgIHogPSBzb3VyY2VWZWN0b3IueQ0KICAgIH0pIDw9IChsaW5lTGVuZ3RoIGFuZCBsaW5lTGVuZ3RoIF4gMiBvciA5MDAwMCkNCmVuZA0KDQpmdW5jdGlvbiBTbWFydEhhcmFzcyh0YXJnZXQpDQogICAgaWYgdGFyZ2V0IHRoZW4NCiAgICAgICAgaWYgWWFzdW9NZW51LkhhcmFzcy5Vc2VRIHRoZW4NCiAgICAgICAgICAgIFExMih0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBZYXN1b01lbnUuSGFyYXNzLlVzZVEyIHRoZW4NCiAgICAgICAgICAgIFEzKHRhcmdldCkNCiAgICAgICAgZW5kDQoJICAgIGlmIFlhc3VvTWVudS5IYXJhc3MuTGhRIHRoZW4NCgkgICAgICAgIGlmIEdldERpc3RhbmNlKHRhcmdldCkgPiA3MDAgYW5kIFExMlJFQURZIHRoZW4NCgkJICAgICAgICBRbGFzdGhpdCgpDQoJICAgICAgICBlbmQNCgkgICAgZW5kDQoJICAgIGlmIEVCYWNrIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpIDwgWWFzdW9NZW51LkhhcmFzcy5taW5yYW5nZSB0aGVuDQogICAgICAgICAgICBFYmFjayh0YXJnZXQpDQogICAgICAgIGVsc2VpZiBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IFlhc3VvTWVudS5IYXJhc3MubWF4cmFuZ2UgdGhlbg0KCSAgICAgICAgaWYgKFExMlJFQURZIG9yIFEzUkVBRFkpIGFuZCBub3QgRUJhY2sgdGhlbg0KICAgICAgICAgICAgICAgIEVnYXBjbG9zZSh0YXJnZXQpDQoJCQkJR2FwQ2xvc2UodGFyZ2V0KQ0KCSAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIGNhc3RRKHVuaXQpDQogICAgaWYgbm90IElzRGFzaGluZygpIHRoZW4NCiAgICAgICAgaWYgUTNSRUFEWSBhbmQgVmFsaWRUYXJnZXRlZFQodW5pdCw5MDApIHRoZW4NCiAgICAJICAgIGlmIFlhc3VvTWVudS5QcmVkaWN0aW9uLm1vZGUgPT0gMSB0aGVuDQogICAgCSAgICAgICAgbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIFBvc2l0aW9uID0gVlA6R2V0TGluZUNhc3RQb3NpdGlvbih1bml0LCBEZWxheXMuUTMsIFdpZHRocy5RMywgUmFuZ2VzLlEzLCBTcGVlZHMuUTMsIG15SGVybywgZmFsc2UpDQoJCSAgICAgICAgbG9jYWwgUTNIaXRWUFJFID0gWWFzdW9NZW51LlByZWRpY3Rpb24uVlByZWRpY3Rpb24uUTNIaXQNCiAgICAJICAgICAgICBpZiBIaXRDaGFuY2UgPj0gUTNIaXRWUFJFIGFuZCBub3QgQ2FzdFBhY2tldCB0aGVuDQoJICAgIAkgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKENhc3RQb3NpdGlvbikgPD0gOTAwXjIgdGhlbg0KICAgICAgICAJCSAgICAgICAgQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCQkgICAgICAgIGVuZA0KCQkgICAgICAgIGVsc2VpZiBIaXRDaGFuY2UgPj0gUTNIaXRWUFJFIGFuZCBDYXN0UGFja2V0IHRoZW4NCgkgICAgCSAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoQ2FzdFBvc2l0aW9uKSA8PSA5MDBeMiB0aGVuDQogICAgICAgIAkJICAgICAgICBRUGFja2V0KF9RLCBDYXN0UG9zaXRpb24sIENhc3RQb3NpdGlvbikNCgkJCSAgICAgICAgZW5kDQoJCSAgICAgICAgZW5kDQoJCSAgICBlbHNlaWYgWWFzdW9NZW51LlByZWRpY3Rpb24ubW9kZSA9PSAyIHRoZW4NCgkJCSAgICBsb2NhbCBRUG9zLCBRSGl0Q2hhbmNlLCBOb2ggPSBIUHJlZDpHZXRQcmVkaWN0KEhQUTMsIHVuaXQsIG15SGVybykNCgkJICAgICAgICBpZiBRUG9zIGFuZCBRSGl0Q2hhbmNlID49IFEzSGl0VlBSRSB0aGVuDQoJICAgICAgICAgICAgICAgIGlmIG5vdCBDYXN0UGFja2V0IGFuZCBub3QgSXNEYXNoaW5nKCkgdGhlbg0KCSAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoUVBvcykgPD0gOTAwXjIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUSwgUVBvcy54LCBRUG9zLnopDQoJCSAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIENhc3RQYWNrZXQgYW5kIG5vdCBJc0Rhc2hpbmcoKSB0aGVuDQoJICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihRUG9zKSA8PSA5MDBeMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUVBhY2tldChfUSwgUVBvcywgUVBvcykNCgkJICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCgkJCQllbmQJCQ0KCQkgICAgZW5kCQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgUTEyUkVBRFkgYW5kIFZhbGlkVGFyZ2V0ZWRUKHVuaXQsNDc1KSB0aGVuDQogICAgICAgICAgICBpZiBZYXN1b01lbnUuUHJlZGljdGlvbi5tb2RlID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIENhc3RQb3NpdGlvbiwgSGl0Q2hhbmNlLCBQb3NpdGlvbiA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odW5pdCwgRGVsYXlzLlExMiwgV2lkdGhzLlExMiwgUmFuZ2VzLlExMiwgU3BlZWRzLlExMiwgbXlIZXJvLCBmYWxzZSkNCgkJCSAgICBsb2NhbCBRMTJIaXRWUFJFID0gWWFzdW9NZW51LlByZWRpY3Rpb24uVlByZWRpY3Rpb24uUTEySGl0DQogICAgICAgICAgICAgICAgaWYgSGl0Q2hhbmNlID49IFExMkhpdFZQUkUgYW5kIG5vdCBDYXN0UGFja2V0IHRoZW4NCgkgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoQ2FzdFBvc2l0aW9uKSA8PSA0NzVeMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIEhpdENoYW5jZSA+PSBRMTJIaXRWUFJFIGFuZCBDYXN0UGFja2V0IHRoZW4NCgkgIAkgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihDYXN0UG9zaXRpb24pIDw9IDQ3NV4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIFFQYWNrZXQoX1EsIENhc3RQb3NpdGlvbiwgQ2FzdFBvc2l0aW9uKQ0KCQkgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBZYXN1b01lbnUuUHJlZGljdGlvbi5tb2RlID09IDIgdGhlbg0KCQkJICAgIGxvY2FsIFFQb3MsIFFIaXRDaGFuY2UgPSBIUHJlZDpHZXRQcmVkaWN0KEhQUTEyLCB1bml0LCBteUhlcm8pDQoJCSAgICAgICAgaWYgUVBvcyBhbmQgUUhpdENoYW5jZSA+PSBRMTJIaXRWUFJFIHRoZW4NCgkgICAgICAgICAgICAgICAgaWYgbm90IENhc3RQYWNrZXQgYW5kIG5vdCBJc0Rhc2hpbmcoKSB0aGVuDQoJICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihRUG9zKSA8PSA0NzVeMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBRUG9zLngsIFFQb3MueikNCgkJICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKFFQb3MpIDw9IDQ3NV4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBRUGFja2V0KF9RLCBRUG9zLCBRUG9zKQ0KCQkgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KCQkJCWVuZAkJCQkJDQogICAgICAgICAgICBlbmQNCgkgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gRWJhY2sodW5pdCkNCiAgICBsb2NhbCBmYXJ0aGVzdG1pbmlvbiA9IEdldEZhcmVzdE1pbmlvbih1bml0KQ0KICAgIGlmIGZhcnRoZXN0bWluaW9uIGFuZCBub3QgVW5kZXJUdXJyZXQoZUVuZFBvcyhmYXJ0aGVzdG1pbmlvbikpIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9FLCBmYXJ0aGVzdG1pbmlvbikNCiAgICBlbHNlDQoJICAgbG9jYWwgY2xvc2VzdFBvaW50LCBjbG9zZXN0VW5pdCA9IGZpbmRDbG9zZXN0UG9pbnQoZm9jYWxQb2ludCkNCgkgICAgaWYgY2xvc2VzdFBvaW50IGFuZCBub3QgVW5kZXJUdXJyZXQoY2xvc2VzdFBvaW50KSB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX0UsIGNsb3Nlc3RVbml0KQ0KICAgICAgICBlbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBHZXRGYXJlc3RNaW5pb24odW5pdCkNCiAgICBsb2NhbCBmYXJlc3RNaW5pb24sIGZhcmVzdERpc3RhbmNlID0gbmlsLCAwDQogICAgRW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICAgSnVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoRW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIG1pbmlvbiBhbmQgbWluaW9uLnZhbGlkIGFuZCBub3QgbWluaW9uLmRlYWQgYW5kIHVuaXQgYW5kIFJhbmdlcy5FID49IEdldERpc3RhbmNlKG1pbmlvbikgYW5kIEdldERpc3RhbmNlKGVFbmRQb3MobWluaW9uKSwgdW5pdCkgPiBHZXREaXN0YW5jZSh1bml0KSBhbmQgZmFyZXN0RGlzdGFuY2UgPCBHZXREaXN0YW5jZShlRW5kUG9zKG1pbmlvbiksIHVuaXQpIHRoZW4NCiAgICAgICAgICAgIGZhcmVzdERpc3RhbmNlID0gR2V0RGlzdGFuY2UoZUVuZFBvcyhtaW5pb24pLCB1bml0KQ0KICAgICAgICAgICAgZmFyZXN0TWluaW9uID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoSnVuZ2xlTWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBtaW5pb24gYW5kIG1pbmlvbi52YWxpZCBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCB1bml0IGFuZCBSYW5nZXMuRSA+PSBHZXREaXN0YW5jZShtaW5pb24pIGFuZCBHZXREaXN0YW5jZShlRW5kUG9zKG1pbmlvbiksIHVuaXQpID4gR2V0RGlzdGFuY2UodW5pdCkgYW5kIGZhcmVzdERpc3RhbmNlIDwgR2V0RGlzdGFuY2UoZUVuZFBvcyhtaW5pb24pLCB1bml0KSB0aGVuDQogICAgICAgICAgICBmYXJlc3REaXN0YW5jZSA9IEdldERpc3RhbmNlKGVFbmRQb3MobWluaW9uKSwgdW5pdCkNCiAgICAgICAgICAgIGZhcmVzdE1pbmlvbiA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIHJldHVybiBmYXJlc3RNaW5pb24NCmVuZA0KDQpmdW5jdGlvbiBRbGFzdGhpdCgpDQogICAgRW5lbXlNaW5pb25zOnVwZGF0ZSgpDQoJbG9jYWwgQ2FzdFBhY2tldCA9IFlhc3VvTWVudS5BZHZhbmNlZC5QYWNrZXRzLnBhY2tldHNRDQogICAgZm9yIF8sIG1pbmlvbiBpbiBwYWlycyhFbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgbWluaW9uIGFuZCBDYWxEbWcobWluaW9uLCAiUSIpID49IG1pbmlvbi5oZWFsdGggYW5kIFExMlJFQURZIGFuZCBZYXN1b01lbnUuTGFuZUxILlVzZVEgIGFuZCAoKElzRGFzaGluZygpIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDwgMTUwKSBvciBub3QgSXNEYXNoaW5nKCkpIHRoZW4NCgkgICAgICAgIGlmIFlhc3VvTWVudS5QcmVkaWN0aW9uLm1vZGUgPT0gMSB0aGVuDQoJICAgICAgICAgICAgbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIFBvc2l0aW9uID0gVlA6R2V0TGluZUNhc3RQb3NpdGlvbihtaW5pb24sIERlbGF5cy5RMTIsIFdpZHRocy5RMTIsIFJhbmdlcy5RMTIsIFNwZWVkcy5RMTIsIG15SGVybywgZmFsc2UpDQoJCSAgICAgICAgaWYgbm90IENhc3RQYWNrZXQgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gUmFuZ2VzLlExMiB0aGVuDQoJCSAgICAgICAgICAgIENhc3RTcGVsbChfUSwgQ2FzdFBvc2l0aW9uLngsIENhc3RQb3NpdGlvbi56KQ0KCQkgICAgICAgIGVsc2VpZiBDYXN0UGFja2V0IGFuZCBHZXREaXN0YW5jZShDYXN0UG9zaXRpb24pIDw9IFJhbmdlcy5RMTIgdGhlbg0KCQkgICAgICAgICAgICBRUGFja2V0KF9RLENhc3RQb3NpdGlvbixDYXN0UG9zaXRpb24pDQoJCSAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgWWFzdW9NZW51LlByZWRpY3Rpb24ubW9kZSA9PSAyIHRoZW4NCgkJCSAgICBsb2NhbCBRUG9zLCBRSGl0Q2hhbmNlLCBOb2ggPSBIUHJlZDpHZXRQcmVkaWN0KEhQUTEyLCBtaW5pb24sIG15SGVybykNCgkJICAgICAgICBpZiBRUG9zIHRoZW4NCgkgICAgICAgICAgICAgICAgaWYgbm90IENhc3RQYWNrZXQgYW5kIG5vdCBJc0Rhc2hpbmcoKSB0aGVuDQoJICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihRUG9zKSA8PSA0NzVeMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBRUG9zLngsIFFQb3MueikNCgkJICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKFFQb3MpIDw9IDQ3NV4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBRUGFja2V0KF9RLCBRUG9zLCBRUG9zKQ0KCQkgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KCQkJCWVuZCAgCQkJDQoJCQllbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIG1pbmlvbiBhbmQgQ2FsRG1nKG1pbmlvbiwgIlEiKSA+PSBtaW5pb24uaGVhbHRoIGFuZCBRM1JFQURZIGFuZCBZYXN1b01lbnUuTGFuZUxILlVzZVEyIGFuZCAoSXNEYXNoaW5nKCkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPCAxNTAgb3Igbm90IElzRGFzaGluZygpKSB0aGVuDQoJICAgICAgICBpZiBZYXN1b01lbnUuUHJlZGljdGlvbi5tb2RlID09IDEgdGhlbg0KCSAgICAgICAgICAgIGxvY2FsIENhc3RQb3NpdGlvbiwgSGl0Q2hhbmNlLCBQb3NpdGlvbiA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24obWluaW9uLCBEZWxheXMuUTMsIFdpZHRocy5RMywgUmFuZ2VzLlEzLCBTcGVlZHMuUTMsIG15SGVybywgZmFsc2UpDQoJCSAgICAgICAgaWYgbm90IENhc3RQYWNrZXQgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gUmFuZ2VzLlEzIHRoZW4NCgkJICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCSAgICAgICAgZWxzZWlmIENhc3RQYWNrZXQgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gUmFuZ2VzLlEzIHRoZW4NCgkJICAgICAgICAgICAgUVBhY2tldChfUSxDYXN0UG9zaXRpb24sQ2FzdFBvc2l0aW9uKQ0KCQkgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIFlhc3VvTWVudS5QcmVkaWN0aW9uLm1vZGUgPT0gMiB0aGVuDQoJCQkgICAgbG9jYWwgUVBvcywgUUhpdENoYW5jZSwgTm9oID0gSFByZWQ6R2V0UHJlZGljdChIUFEzLCBtaW5pb24sIG15SGVybykNCgkJICAgICAgICBpZiBRUG9zIHRoZW4NCgkgICAgICAgICAgICAgICAgaWYgbm90IENhc3RQYWNrZXQgYW5kIG5vdCBJc0Rhc2hpbmcoKSB0aGVuDQoJICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihRUG9zKSA8PSA5MDBeMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBRUG9zLngsIFFQb3MueikNCgkJICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKFFQb3MpIDw9IDkwMF4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBRUGFja2V0KF9RLCBRUG9zLCBRUG9zKQ0KCQkgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KCQkJCWVuZAkJCQ0KCQkJZW5kDQogICAgICAgIGVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhbERtZyh1bml0LCBzcGVsbCkNCiAgICBpZiBub3QgdW5pdCBvciBub3Qgc3BlbGwgdGhlbiByZXR1cm4gZW5kDQoJaWYgdW5pdCB+PSBuaWwgdGhlbg0KICAgIAlsb2NhbCBTTkFNRVMgPSBzcGVsbDp1cHBlcigpDQogICAgCWxvY2FsIGNhbGRtZyA9IG1hdGgucm91bmQNCiAgICAJaWYgU05BTUVTID09ICJRIiB0aGVuDQogICAgCQlyZXR1cm4gY2FsZG1nKGdldERtZygiUSIsIHVuaXQsIG15SGVybykgKyBnZXREbWcoIkFEIiwgdW5pdCwgbXlIZXJvKSBvciAwKQ0KICAgIAllbHNlaWYgU05BTUVTID09ICJFIiB0aGVuDQogICAgICAJCXJldHVybiBjYWxkbWcoR2V0RWRtZyh1bml0KSBvciAwKQ0KICAgCQllbHNlaWYgU05BTUVTID09ICJSIiB0aGVuDQogICAgICAJCXJldHVybiBjYWxkbWcoZ2V0RG1nKCJSIiwgdW5pdCwgbXlIZXJvKSBvciAwKQ0KICAgIAllbHNlaWYgU05BTUVTID09ICJJR05JVEUiIHRoZW4NCiAgICAgIAkJcmV0dXJuIGNhbGRtZyhJUkVBRFkgYW5kIGdldERtZygiSUdOSVRFIiwgdW5pdCwgbXlIZXJvKSBvciAwKQ0KICAgIAllbHNlaWYgU05BTUVTID09ICJIWEciIHRoZW4NCiAgICAgIAkJcmV0dXJuIGNhbGRtZyhoeGdSZWFkeSBhbmQgZ2V0RG1nKCJIWEciLCB1bml0LCBteUhlcm8pIG9yIDApDQogICAgCWVsc2VpZiBTTkFNRVMgPT0gIlJVSU5FREtJTkciIHRoZW4NCiAgICAgIAkJcmV0dXJuIGNhbGRtZyhib3Rya1JlYWR5IGFuZCBnZXREbWcoIlJVSU5FREtJTkciLCB1bml0LCBteUhlcm8pIG9yIDApDQogICAgCWVsc2VpZiBTTkFNRVMgPT0gIlNIRUVOIiB0aGVuDQogICAgICAJCXJldHVybiBjYWxkbWcoc2hlZW5SZWFkeSBhbmQgZ2V0RG1nKCJTSEVFTiIsIHVuaXQsIG15SGVybykgb3IgMCkNCiAgICAJZWxzZWlmIFNOQU1FUyA9PSAiVFJJTklUWSIgdGhlbg0KICAgICAgCQlyZXR1cm4gY2FsZG1nKHRyaW5pdHlSZWFkeSBhbmQgZ2V0RG1nKCJUUklOSVRZIiwgdW5pdCwgbXlIZXJvKSBvciAwKQ0KICAgIAllbHNlaWYgU05BTUVTID09ICJMSUFORFJZUyIgdGhlbg0KICAgICAgCQlyZXR1cm4gY2FsZG1nKGx5YW5kcmlzUmVhZHkgYW5kIGdldERtZygiTElBTkRSWVMiLCB1bml0LCBteUhlcm8pIG9yIDApDQogICAgCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEZhcm1MYXN0aGl0KCkNCglRbGFzdGhpdCgpDQoJRmFybUUoKQ0KZW5kDQoNCmZ1bmN0aW9uIEZhcm1DbGVhcigpDQoJTGFuZUNsZWFyUSgpDQoJRmFybUUoKQ0KZW5kDQoNCmZ1bmN0aW9uIEZhcm1FKCkNCglFbmVteU1pbmlvbnM6dXBkYXRlKCkNCglmb3IgXywgbWluaW9uIGluIHBhaXJzKEVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgIAlpZiBtaW5pb24gYW5kIG1pbmlvbi5oZWFsdGggPCBHZXRFZG1nKG1pbmlvbikgdGhlbg0KICAgICAgCQlpZiBub3QgWWFzdW9NZW51LkFkdmFuY2VkLkFkdkUudW5kZXJUb3dlciBhbmQgVW5kZXJUdXJyZXQoZUVuZFBvcyhtaW5pb24pKSB0aGVuDQogICAgICAgIAkJcmV0dXJuDQogICAgICAJCWVuZA0KICAgICAgCQlpZiAoWWFzdW9NZW51LkxhbmVDTC5Vc2VFIGFuZCBZYXN1b01lbnUuQ2xlYXJLZXkpIG9yIChZYXN1b01lbnUuTGFuZUxILlVzZUUgYW5kIFlhc3VvTWVudS5MYXN0aGl0S2V5KSB0aGVuDQogICAgICAgIAkJQ2FzdFNwZWxsKF9FLG1pbmlvbikNCiAgICAgIAkJZW5kDQogICAgCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIExhbmVDbGVhclEoKQ0KICAgIEVuZW15TWluaW9uczp1cGRhdGUoKQ0KCWZvciBfLCBtaW5pb24gaW4gcGFpcnMoRW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQoJbG9jYWwgQ2FzdFBhY2tldCA9IFlhc3VvTWVudS5BZHZhbmNlZC5QYWNrZXRzLnBhY2tldHNRDQogICAgCWlmIFlhc3VvTWVudS5MYW5lQ0wuVXNlUSBhbmQgbWluaW9uIGFuZCBub3QgbWluaW9uLmRlYWQgYW5kIFExMlJFQURZIGFuZCBub3QgSXNEYXNoaW5nKCkgdGhlbg0KCSAgICAgICAgaWYgWWFzdW9NZW51LlByZWRpY3Rpb24ubW9kZSA9PSAxIHRoZW4NCgkgICAgICAgICAgICBsb2NhbCBDYXN0UG9zaXRpb24sIEhpdENoYW5jZSwgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKG1pbmlvbiwgRGVsYXlzLlExMiwgV2lkdGhzLlExMiwgUmFuZ2VzLlExMiwgU3BlZWRzLlExMiwgbXlIZXJvLCBmYWxzZSkNCgkJICAgICAgICBpZiBub3QgQ2FzdFBhY2tldCBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uKSA8PSBSYW5nZXMuUTEyIHRoZW4NCgkJICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCSAgICAgICAgZWxzZWlmIENhc3RQYWNrZXQgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gUmFuZ2VzLlExMiB0aGVuDQoJCSAgICAgICAgICAgIFFQYWNrZXQoX1EsQ2FzdFBvc2l0aW9uLENhc3RQb3NpdGlvbikNCgkJICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBZYXN1b01lbnUuUHJlZGljdGlvbi5tb2RlID09IDIgdGhlbg0KCQkJICAgIGxvY2FsIFFQb3MsIFFIaXRDaGFuY2UsIE5vaCA9IEhQcmVkOkdldFByZWRpY3QoSFBRMTIsIG1pbmlvbiwgbXlIZXJvKQ0KCQkgICAgICAgIGlmIFFQb3MgdGhlbg0KCSAgICAgICAgICAgICAgICBpZiBub3QgQ2FzdFBhY2tldCBhbmQgbm90IElzRGFzaGluZygpIHRoZW4NCgkgICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKFFQb3MpIDw9IDQ3NV4yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIFFQb3MueCwgUVBvcy56KQ0KCQkgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBDYXN0UGFja2V0IGFuZCBub3QgSXNEYXNoaW5nKCkgdGhlbg0KCSAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoUVBvcykgPD0gNDc1XjIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFFQYWNrZXQoX1EsIFFQb3MsIFFQb3MpDQoJCSAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQoJCQkJZW5kCQkJDQoJCQllbmQNCiAgICAJZWxzZWlmIFlhc3VvTWVudS5MYW5lQ0wuVXNlUTIgYW5kIG1pbmlvbiBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCBRM1JFQURZIGFuZCAgbm90IElzRGFzaGluZygpIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDwgUmFuZ2VzLlEzIHRoZW4NCgkJICAgIGlmIFlhc3VvTWVudS5QcmVkaWN0aW9uLm1vZGUgPT0gMSBvciBZYXN1b01lbnUuUHJlZGljdGlvbi5tb2RlID09IDIgdGhlbg0KICAgICAgCQkgICAgbG9jYWwgQU9FQ2FzdFBvc2l0aW9uLCBNYWluVGFyZ2V0SGl0Q2hhbmNlLCBuVGFyZ2V0cyA9IFZQOkdldExpbmVBT0VDYXN0UG9zaXRpb24obWluaW9uLCBEZWxheXMuUTMsIFdpZHRocy5RMywgUmFuZ2VzLlEzLCBTcGVlZHMuUTMsIG15SGVybykNCiAgICAgIAkJICAgIGlmIG5vdCBDYXN0UGFja2V0IGFuZCBBT0VDYXN0UG9zaXRpb24gdGhlbg0KICAgICAgICAJCSAgICBDYXN0U3BlbGwoX1EsIEFPRUNhc3RQb3NpdGlvbi54LCBBT0VDYXN0UG9zaXRpb24ueikNCiAgICAgIAkJICAgIGVsc2VpZiBDYXN0UGFja2V0IGFuZCBBT0VDYXN0UG9zaXRpb24gdGhlbg0KCQkJCSAgICBRUGFja2V0KF9RLEFPRUNhc3RQb3NpdGlvbixBT0VDYXN0UG9zaXRpb24pDQoJCQkJZW5kDQogICAgCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSnVuZ2xlQ2xlYXIoKQ0KCWxvY2FsIEp1bmdsZU1vYiA9IEdldEp1bmdsZU1vYigpDQoJaWYgSnVuZ2xlTW9iIH49IG5pbCB0aGVuDQogICAgCWxvY2FsIFFqdW5nbGUgPSBZYXN1b01lbnUuSnVuZ2NsZWFyLlVzZVENCiAgICAJbG9jYWwgUTJqdW5nbGUgPSBZYXN1b01lbnUuSnVuZ2NsZWFyLlVzZVEyDQogICAgCWlmIFFqdW5nbGUgYW5kIG5vdCBRMmp1bmdsZSBhbmQgUTEyUkVBRFkgdGhlbg0KICAgICAgCQlDYXN0U3BlbGwoX1EsIEp1bmdsZU1vYi54LCBKdW5nbGVNb2IueikNCiAgICAJZW5kDQogICAgCWlmIFEyanVuZ2xlIGFuZCBub3QgUWp1bmdsZSBhbmQgUTNSRUFEWSB0aGVuDQogICAgICAJCUNhc3RTcGVsbChfUSwgSnVuZ2xlTW9iLngsIEp1bmdsZU1vYi56KQ0KICAgIAllbmQNCiAgIAkJaWYgUWp1bmdsZSBhbmQgUTJqdW5nbGUgdGhlbg0KICAgICAgCQlDYXN0U3BlbGwoX1EsIEp1bmdsZU1vYi54LCBKdW5nbGVNb2IueikNCiAgICAJZW5kDQogICAgCWlmIFlhc3VvTWVudS5KdW5nY2xlYXIuVXNlRSBhbmQgRVJFQURZIHRoZW4NCiAgICAgIAkJQ2FzdFNwZWxsKF9FLCBKdW5nbGVNb2IpDQogICAgCWVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEp1bmdsZU1vYigpDQoJZm9yIF8sIE1vYiBpbiBwYWlycyhKdW5nbGVGb2N1c01vYnMpIGRvDQogICAgCWlmIFZhbGlkVGFyZ2V0KE1vYiwgNTAwKSB0aGVuDQogICAgICAJCXJldHVybiBNb2INCiAgIAkJZW5kDQogIAllbmQNCiAgCWZvciBfLCBNb2IgaW4gcGFpcnMoSnVuZ2xlTW9icykgZG8NCiAgICAJaWYgVmFsaWRUYXJnZXQoTW9iLCA1MDApIHRoZW4NCiAgICAgIAkJcmV0dXJuIE1vYg0KICAgIAllbmQNCiAgCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEp1bmdsZU1vYjIoKQ0KCWZvciBfLCBNb2IgaW4gcGFpcnMoSnVuZ2xlRm9jdXNNb2JzKSBkbw0KICAgIAlpZiBWYWxpZFRhcmdldChNb2IsIDUwMCkgdGhlbg0KICAgICAgCQlyZXR1cm4gTW9iDQogICAJCWVuZA0KICAJZW5kDQogIAlmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZU1vYnMpIGRvDQogICAgCWlmIFZhbGlkVGFyZ2V0KE1vYiwgNTAwKSB0aGVuDQogICAgICAJCXJldHVybiBNb2INCiAgICAJZW5kDQogIAllbmQNCmVuZA0KDQpmdW5jdGlvbiBPbkNyZWF0ZU9iaihvYmopDQogICAgaWYgbm90IG9iaiB0aGVuIHJldHVybiBlbmQNCglpZiBvYmogYW5kIChvYmoubmFtZT09Illhc3VvX2Jhc2VfUl9pbmRpY2F0b3JfYmVhbS50cm95IiBvciBvYmoubmFtZT09Illhc3VvX1NraW4wMl9SX2luZGljYXRvcl9iZWFtLnRyb3kiKSB0aGVuDQoJCS0tdW5pdGtub2NrZWQgPSB1bml0a25vY2tlZCArIDENCiAgICBlbmQNCiAgCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqLm5hbWVdIHRoZW4NCiAgICAgIAl0YWJsZS5pbnNlcnQoSnVuZ2xlRm9jdXNNb2JzLCBvYmopDQogIAllbHNlaWYgSnVuZ2xlTW9iTmFtZXNbb2JqLm5hbWVdIHRoZW4NCiAgICAgIAl0YWJsZS5pbnNlcnQoSnVuZ2xlTW9icywgb2JqKQ0KICAJZW5kDQoJaWYgR2V0RGlzdGFuY2UobXlIZXJvLCBvYmopIDwgNTAgYW5kIG9iai5uYW1lOmxvd2VyKCk6ZmluZCgidGVsZXBvcnRob21lIikgdGhlbg0KCQlpc1JlY2FsbGluZyA9IHRydWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPbkRlbGV0ZU9iaihvYmopDQogICAgaWYgbm90IG9iaiB0aGVuIHJldHVybiBlbmQNCglpZiBvYmogYW5kIChvYmoubmFtZT09Illhc3VvX2Jhc2VfUl9pbmRpY2F0b3JfYmVhbS50cm95IiBvciBvYmoubmFtZT09Illhc3VvX1NraW4wMl9SX2luZGljYXRvcl9iZWFtLnRyb3kiKSB0aGVuDQoJCS0tdW5pdGtub2NrZWQgPSB1bml0a25vY2tlZCAtIDENCiAgICBlbmQNCiAgCWZvciBpLCBNb2IgaW4gcGFpcnMoSnVuZ2xlTW9icykgZG8NCiAgICAgIAlpZiBvYmoubmFtZSA9PSBNb2IubmFtZSB0aGVuDQogICAgICAgIAl0YWJsZS5yZW1vdmUoSnVuZ2xlTW9icywgaSkNCiAgICAgIAllbmQNCiAgCWVuZA0KICAJZm9yIGksIE1vYiBpbiBwYWlycyhKdW5nbGVGb2N1c01vYnMpIGRvDQogICAgICAJaWYgb2JqLm5hbWUgPT0gTW9iLm5hbWUgdGhlbg0KICAgICAgICAJdGFibGUucmVtb3ZlKEp1bmdsZUZvY3VzTW9icywgaSkNCiAgICAgIAllbmQNCiAgCWVuZA0KCWlmIEdldERpc3RhbmNlKG15SGVybywgb2JqKSA8IDUwIGFuZCBvYmoubmFtZTpsb3dlcigpOmZpbmQoInRlbGVwb3J0aG9tZSIpIHRoZW4NCgkJRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBpc1JlY2FsbGluZyA9IGZhbHNlIGVuZCwgMC41KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEp1bmdsZU5hbWVzKCkNCiAgCWxvY2FsIEp1bmdNYXAgPSBmYWxzZQ0KICAJaWYgR2V0R2FtZSgpLm1hcC5zaG9ydE5hbWUgPT0gInR3aXN0ZWRUcmVlbGluZSIgdGhlbg0KICAgICAgCUp1bmdNYXAgPSB0cnVlDQogIAllbHNlDQoJICAgIGlmIEdldEdhbWUoKS5tYXAuaW5kZXggPT0gMTUgdGhlbg0KICAgICAgCSAgICBKdW5nTWFwID0gZmFsc2UNCgkJCU5ld1JpZnQgPSB0cnVlDQoJCWVsc2UgDQogICAgICAJICAgIEp1bmdNYXAgPSBmYWxzZQ0KCQkJTmV3UmlmdCA9IGZhbHNlDQogICAgICAgIGVuZAkJICAgIA0KICAgIGVuZA0KICAJaWYgSnVuZ01hcCB0aGVuDQogICAgICAJRm9jdXNKdW5nbGVOYW1lcyA9IHsNCiAgICAgICAgCVsiVFRfTldyYWl0aDEuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJUVF9OR29sZW0yLjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiVFRfTldvbGYzLjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiVFRfTldyYWl0aDQuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJUVF9OR29sZW01LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiVFRfTldvbGY2LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiVFRfU3BpZGVyYm9zczguMS4xIl0gPSB0cnVlDQogICAgICAJfQ0KICAgICAgCUp1bmdsZU1vYk5hbWVzID0gew0KICAgICAgICAJWyJUVF9OV3JhaXRoMjEuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJUVF9OV3JhaXRoMjEuMS4zIl0gPSB0cnVlLA0KICAgICAgIAkgIAlbIlRUX05Hb2xlbTIyLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAJICAJWyJUVF9OV29sZjIzLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAJICAJWyJUVF9OV29sZjIzLjEuMyJdID0gdHJ1ZSwNCiAgICAgICAJICAJWyJUVF9OV3JhaXRoMjQuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJUVF9OV3JhaXRoMjQuMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJUVF9OR29sZW0yNS4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIlRUX05Xb2xmMjYuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJUVF9OV29sZjI2LjEuMyJdID0gdHJ1ZQ0KICAgICAgCX0NCiAgCWVsc2UNCgkgICAgaWYgTmV3UmlmdCB0aGVuDQoJCUp1bmdsZU1vYk5hbWVzID0gew0KICAgICAgICAJWyJTUlVfQmFyb24xMi4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9EcmFnb242LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0JsdWUxLjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0JsdWU3LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0JsdWVNaW5pMS4xLjIiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9CbHVlTWluaTIxLjEuMyJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0JsdWVNaW5pMjcuMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfQmx1ZU1pbmk3LjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1JlZDQuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfUmVkMTAuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfUmVkTWluaTQuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfUmVkTWluaTQuMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfUmVkTWluaTEwLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1JlZE1pbmkxMC4xLjMiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9NdXJrd29sZjIuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfTXVya3dvbGY4LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX011cmt3b2xmTWluaTIuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfTXVya3dvbGZNaW5pMi4xLjMiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9NdXJrd29sZk1pbmk4LjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX011cmt3b2xmTWluaTguMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfUmF6b3JiZWFrMy4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9SYXpvcmJlYWs5LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1Jhem9yYmVha01pbmkzLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1Jhem9yYmVha01pbmkzLjEuMyJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1Jhem9yYmVha01pbmkzLjEuNCJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1Jhem9yYmVha01pbmk5LjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1Jhem9yYmVha01pbmk5LjEuMyJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1Jhem9yYmVha01pbmk5LjEuNCJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0tydWc1LjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0tydWcxMS4xLjIiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9LcnVnTWluaTUuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfS3J1Z01pbmkxMS4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9Hcm9tcDE0LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0dyb21wMTMuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTcnVfQ3JhYjE1LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU3J1X0NyYWIxNi4xLjEiXSA9IHRydWUNCgkJfQ0KCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQkgICAgWyJTUlVfQmFyb24xMi4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9EcmFnb242LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0JsdWUxLjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0JsdWU3LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1JlZDQuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfUmVkMTAuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfTXVya3dvbGYyLjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX011cmt3b2xmOC4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIlNSVV9SYXpvcmJlYWszLjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX1Jhem9yYmVhazkuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfS3J1ZzUuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfS3J1ZzExLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU1JVX0dyb21wMTQuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJTUlVfR3JvbXAxMy4xLjEiXSA9IHRydWUsDQoJCQkgWyJTcnVfQ3JhYjE1LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiU3J1X0NyYWIxNi4xLjEiXSA9IHRydWUNCgkJfQ0KCQllbHNlDQogICAgICAJSnVuZ2xlTW9iTmFtZXMgPSB7DQogICAgICAgIAlbIldvbGY4LjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiV29sZjguMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJZb3VuZ0xpemFyZDcuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJZb3VuZ0xpemFyZDcuMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJMZXNzZXJXcmFpdGg5LjEuMyJdID0gdHJ1ZSwNCiAgICAgICAgCVsiTGVzc2VyV3JhaXRoOS4xLjIiXSA9IHRydWUsDQogICAgICAgIAlbIkxlc3NlcldyYWl0aDkuMS40Il0gPSB0cnVlLA0KICAgICAgICAJWyJZb3VuZ0xpemFyZDEwLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiWW91bmdMaXphcmQxMC4xLjMiXSA9IHRydWUsDQogICAgICAgIAlbIlNtYWxsR29sZW0xMS4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIldvbGYyLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiV29sZjIuMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJZb3VuZ0xpemFyZDEuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJZb3VuZ0xpemFyZDEuMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJMZXNzZXJXcmFpdGgzLjEuMyJdID0gdHJ1ZSwNCiAgICAgICAgCVsiTGVzc2VyV3JhaXRoMy4xLjIiXSA9IHRydWUsDQogICAgICAgIAlbIkxlc3NlcldyYWl0aDMuMS40Il0gPSB0cnVlLA0KICAgICAgICAJWyJZb3VuZ0xpemFyZDQuMS4yIl0gPSB0cnVlLA0KICAgICAgICAJWyJZb3VuZ0xpemFyZDQuMS4zIl0gPSB0cnVlLA0KICAgICAgICAJWyJTbWFsbEdvbGVtNS4xLjEiXSA9IHRydWUNCiAgICAgIAl9DQogICAgICAJRm9jdXNKdW5nbGVOYW1lcyA9IHsNCiAgICAgICAgCVsiRHJhZ29uNi4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIldvcm0xMi4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIkdpYW50V29sZjguMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJBbmNpZW50R29sZW03LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiV3JhaXRoOS4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIkxpemFyZEVsZGVyMTAuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJHb2xlbTExLjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiR2lhbnRXb2xmMi4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIkFuY2llbnRHb2xlbTEuMS4xIl0gPSB0cnVlLA0KICAgICAgICAJWyJXcmFpdGgzLjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiTGl6YXJkRWxkZXI0LjEuMSJdID0gdHJ1ZSwNCiAgICAgICAgCVsiR29sZW01LjEuMiJdID0gdHJ1ZSwNCiAgICAgICAgCVsiR3JlYXRXcmFpdGgxMy4xLjEiXSA9IHRydWUsDQogICAgICAgIAlbIkdyZWF0V3JhaXRoMTQuMS4xIl0gPSB0cnVlDQogICAgICAJfQ0KICAgIAllbmQNCgllbmQNCiAgCWZvciBpID0gMCwgb2JqTWFuYWdlci5tYXhPYmplY3RzIGRvDQogICAgICAJbG9jYWwgb2JqZWN0ID0gb2JqTWFuYWdlcjpnZXRPYmplY3QoaSkNCiAgICAgIAlpZiBvYmplY3Qgfj0gbmlsIHRoZW4NCiAgICAgICAgCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqZWN0Lm5hbWVdIHRoZW4NCiAgICAgICAgICAJICAJdGFibGUuaW5zZXJ0KEp1bmdsZUZvY3VzTW9icywgb2JqZWN0KQ0KICAgICAgICAJZWxzZWlmIEp1bmdsZU1vYk5hbWVzW29iamVjdC5uYW1lXSB0aGVuDQogICAgICAgICAgCSAgCXRhYmxlLmluc2VydChKdW5nbGVNb2JzLCBvYmplY3QpDQogICAgICAgIAllbmQNCiAgICAgIAllbmQNCiAgCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEF1dG9SKCkNCiAgCWlmIFlhc3VvTWVudS5BZHZhbmNlZC5BZHZSLkF1dG9SaGVhbHRoIGFuZCAoWWFzdW9NZW51LkFkdmFuY2VkLkFkdlIuSGVhbHRoMiA+IG15SGVyby5oZWFsdGggKiAxMDAgLyBteUhlcm8ubWF4SGVhbHRoKSB0aGVuDQogICAgICAJcmV0dXJuDQogIAllbmQNCiAgCWlmIFlhc3VvTWVudS5BZHZhbmNlZC5BZHZSLkF1dG9SYWxseSB0aGVuDQoJICAgIGxvY2FsIHJhbmdlUiA9IFlhc3VvTWVudS5BZHZhbmNlZC5BZHZSLnhSYW5nZQ0KCQlpZiBZYXN1b01lbnUuQWR2YW5jZWQuQWR2Ui54TnVtYmVyID4gQ291bnRBbGx5c0luUmFuZ2UocmFuZ2VSLCBteUhlcm8pIHRoZW4NCiAgICAgIAkgICAgcmV0dXJuDQogIAkgICAgZW5kDQoJZW5kDQoJaWYgbm90IFlhc3VvTWVudS5BZHZhbmNlZC5BZHZSLnVuZGVyVG93ZXIyIGFuZCBVbmRlclR1cnJldChBdXRvUlVuZGVyVHVycmV0KCkpIHRoZW4NCgkJcmV0dXJuDQogICAgZW5kDQogICAgaWYgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlIuQXV0b1IgdGhlbg0KCSAgICBsb2NhbCBSaGl0ID0gMA0KCQlmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvIA0KCSAgICAgICAgaWYgS25vY2t1cHNbZW5lbXkubmV0d29ya0lEXSB+PSBuaWwgYW5kIEdldERpc3RhbmNlKGVuZW15KSA8IFJhbmdlcy5SIHRoZW4NCgkJICAgICAgICBSaGl0ID0gUmhpdCArIDENCgkJCWVuZA0KCQllbmQNCiAgICAgICAgaWYgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlIubXlUYXJnZXQgdGhlbg0KICAgICAgICAgICAgaWYgdGFyZ2V0a25vY2tlZCA9PSAxIGFuZCBSUkVBRFkgdGhlbg0KICAgICAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9SKQ0KICAgICAgICAgICAgICAgIGVuZCwgMC41IC0gR2V0TGF0ZW5jeSgpIC8gMTAwMCkNCiAgICAgICAgICAgIGVsc2VpZiB0YXJnZXRrbm9ja2VkID49IDIgYW5kIFJSRUFEWSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9SKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBub3QgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlIubXlUYXJnZXQgYW5kIFJSRUFEWSBhbmQgUmhpdCA+PSBZYXN1b01lbnUuQWR2YW5jZWQuQWR2Ui54RW5lbWllcyB0aGVuDQogICAgICAgICAgICBDYXN0U3BlbGwoX1IpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIENvdW50RW5lbXlIZXJvSW5SYW5nZShyYW5nZSwgb2JqZWN0KQ0KICAgIG9iamVjdCA9IG9iamVjdCBvciBteUhlcm8NCiAgICByYW5nZSA9IHJhbmdlIGFuZCByYW5nZSAqIHJhbmdlIG9yIG15SGVyby5yYW5nZSAqIG15SGVyby5yYW5nZQ0KICAgIGxvY2FsIGVuZW15SW5SYW5nZSA9IDANCiAgICBmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCwgMSBkbw0KICAgICAgICBsb2NhbCBoZXJvID0gaGVyb01hbmFnZXI6Z2V0SGVybyhpKQ0KICAgICAgICBpZiBWYWxpZFRhcmdldChoZXJvKSBhbmQgbm90IGhlcm8uZGVhZCBhbmQgaGVyby52aXNpYmxlIGFuZCBoZXJvLnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIEdldERpc3RhbmNlU3FyKG9iamVjdCwgaGVybykgPD0gcmFuZ2UgdGhlbg0KICAgICAgICAgICAgZW5lbXlJblJhbmdlID0gZW5lbXlJblJhbmdlICsgMQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gZW5lbXlJblJhbmdlDQplbmQNCg0KZnVuY3Rpb24gQ291bnRBbGx5c0luUmFuZ2UocmFuZ2UsIG9iamVjdCkNCiAgbG9jYWwgYWxseUluUmFuZ2UgPSAwDQogIGxvY2FsIGFsbGllcyA9IEdldEFsbHlIZXJvZXMoKQ0KICBpZiBvYmplY3Qgfj0gbmlsIGFuZCByYW5nZSB0aGVuDQogICAgZm9yIGksIGFsbHkgaW4gcGFpcnMoYWxsaWVzKSBkbw0KICAgICAgaWYgbm90IGFsbHkuZGVhZCBhbmQgIFZhbGlkVGFyZ2V0KGFsbHkpIGFuZCByYW5nZSA+IEdldERpc3RhbmNlKGFsbHksIG9iamVjdCkgdGhlbg0KICAgICAgICBhbGx5SW5SYW5nZSA9IGFsbHlJblJhbmdlICsgMQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICByZXR1cm4gYWxseUluUmFuZ2UNCmVuZA0KDQpmdW5jdGlvbiBDb3VudE1pbmlvbkluUmFuZ2UocmFuZ2UsIG9iamVjdCkNCiAgICBBbGxNaW5pb25zOnVwZGF0ZSgpDQogICAgbG9jYWwgbWluaW9uSW5SYW5nZSA9IDANCiAgICBpZiBvYmplY3Qgfj0gbmlsIGFuZCByYW5nZSB0aGVuDQogICAgICAgIGZvciBpbmRleCwgbWluaW9uIGluIHBhaXJzKEFsbE1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgICAgIGlmIG1pbmlvbiBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCByYW5nZSA+IEdldERpc3RhbmNlKG1pbmlvbiwgb2JqZWN0KSB0aGVuDQogICAgICAgICAgICAgICAgbWluaW9uSW5SYW5nZSA9IG1pbmlvbkluUmFuZ2UgKyAxDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIG1pbmlvbkluUmFuZ2UNCmVuZA0KDQpmdW5jdGlvbiBBdXRvUShUYXJnZXQpDQogICAgbG9jYWwgRW5lbXlRID0gQ291bnRFbmVteUF1dG9RKDQ3NSxteUhlcm8pDQoJbG9jYWwgVGFyZ2V0USA9IFRhcmdldCBhbmQgR2V0RGlzdGFuY2UoVGFyZ2V0KSA8PSA0NzUgb3IgRW5lbXlRDQogICAgaWYgbm90IFlhc3VvTWVudS5BZHZhbmNlZC5BZHZRLnVuZGVyVG93ZXIgYW5kIFVuZGVyVHVycmV0KFRhcmdldFEpIG9yIFRhcmdldFEgPT0gbmlsIHRoZW4NCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgbm90IFlhc3VvTWVudS5Db21ib0tleSBhbmQgbm90IFlhc3VvTWVudS5IYXJhc3NLZXkgYW5kIG5vdCBZYXN1b01lbnUuSGFyYXNzVG9nZ2xlS2V5IGFuZCBUYXJnZXRRIGFuZCBub3QgVGFyZ2V0US5kZWFkIGFuZCBUYXJnZXRRLnZpc2libGUgdGhlbg0KICAgICAgICBpZiBZYXN1b01lbnUuQWR2YW5jZWQuQWR2US5Mb2dpY1EgYW5kIChteUhlcm8uaGVhbHRoID4gbXlIZXJvLm1heEhlYWx0aCAqIDAuMiBhbmQgMSA+PSBjb3VudEVuZW1pZXMoVGFyZ2V0USwgNjAwKSBvciBUYXJnZXRRLmhlYWx0aCA8IENhbERtZyhUYXJnZXRRLCAiUSIpKSB0aGVuDQogICAgICAgICAgICBpZiBUYXJnZXRRIGFuZCBUYXJnZXRRLnR5cGUgPT0gbXlIZXJvLnR5cGUgdGhlbg0KICAgICAgICAgICAgICAgIGlmIFlhc3VvTWVudS5BZHZhbmNlZC5BZHZRLkF1dG9RIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgUTEyKFRhcmdldFEpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlEuQXV0b1EyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgUTMoVGFyZ2V0USkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgbm90IFlhc3VvTWVudS5BZHZhbmNlZC5BZHZRLkxvZ2ljUSBhbmQgVGFyZ2V0USBhbmQgVGFyZ2V0US50eXBlID09IG15SGVyby50eXBlIHRoZW4NCiAgICAgICAgICAgIGlmIFlhc3VvTWVudS5BZHZhbmNlZC5BZHZRLkF1dG9RIHRoZW4NCiAgICAgICAgICAgICAgICBRMTIoVGFyZ2V0USkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgWWFzdW9NZW51LkFkdmFuY2VkLkFkdlEuQXV0b1EyIHRoZW4NCiAgICAgICAgICAgICAgICBRMyhUYXJnZXRRKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIENvdW50RW5lbXlBdXRvUShyYW5nZSwgb2JqZWN0KQ0KICAgIG9iamVjdCA9IG9iamVjdCBvciBteUhlcm8NCiAgICByYW5nZSA9IHJhbmdlIGFuZCByYW5nZSAqIHJhbmdlIG9yIG15SGVyby5yYW5nZSAqIG15SGVyby5yYW5nZQ0KICAgIGVuZW15USA9IG5pbA0KCURpc1EgPSA2MDANCiAgICBmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSBhbmQgbm90IGVuZW15LmRlYWQgYW5kIGVuZW15LnZpc2libGUgYW5kIEdldERpc3RhbmNlU3FyKG9iamVjdCwgZW5lbXkpIDw9IHJhbmdlIGFuZCBEaXNRID4gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSB0aGVuDQoJCSAgICBEaXNRID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgZW5lbXlRID0gZW5lbXkNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIGVuZW15UQ0KZW5kDQoNCmZ1bmN0aW9uIGNvdW50RW5lbWllcyhwb2ludCwgcmFuZ2UpDQogICAgbG9jYWwgQ2hhbXBDb3VudCA9IDANCiAgICBmb3IgaSwgY2hhbXAgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGlmIGNoYW1wIGFuZCBub3QgY2hhbXAuZGVhZCBhbmQgcmFuZ2UgPj0gR2V0RGlzdGFuY2UoY2hhbXAsIHBvaW50KSB0aGVuDQogICAgICAgICAgICBDaGFtcENvdW50ID0gQ2hhbXBDb3VudCArIDENCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIENoYW1wQ291bnQNCmVuZA0KDQpmdW5jdGlvbiBRd3VsdCgpDQogICAgaWYgUXVsdCB0aGVuDQoJICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8gDQoJCSAgICBpZiBLbm9ja3Vwc1tlbmVteS5uZXR3b3JrSURdIH49IG5pbCB0aGVuDQoJCSAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXkpIDwgMjAwIGFuZCAoUTEyUkVBRFkgb3IgUTNSRUFEWSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsZW5lbXkueCxlbmVteS56KQ0KICAgICAgICAgICAgICAgIGVuZAkNCiAgICAgICAgICAgIGVuZAkNCgkJZW5kDQogICAgZW5kCQkJDQplbmQNCg0KZnVuY3Rpb24gT25SZWNhbGwodW5pdCwgY2hhbm5lbFRpbWVJbk1zKQ0KICAgIGlmIG5vdCBZYXN1b01lbnUuQWR2YW5jZWQuQWR2US5pbnRlcnJ1cHRSZWNhbGxRIHRoZW4NCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgbG9jYWwgZ2FtZXRpbWVyID0gR2V0R2FtZVRpbWVyKCkNCiAgICBsb2NhbCBRZGlzdGFuY2UgPSBHZXREaXN0YW5jZSh1bml0KSAvIFNwZWVkcy5RMw0KICAgIGlmIFEzUkVBRFkgYW5kIHVuaXQgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgUmFuZ2VzLlEzIGFuZCB1bml0LnRlYW0gPT0gVEVBTV9FTkVNWSBhbmQgZ2FtZXRpbWVyICsgUWRpc3RhbmNlIDw9IGdhbWV0aW1lciArIGNoYW5uZWxUaW1lSW5NcyB0aGVuDQogICAgICAgIENhc3RTcGVsbChfUSx1bml0LngsdW5pdC56KQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhhcmFzc1QodGFyZ2V0KQ0KICAgIGlmIHRhcmdldCB0aGVuDQogICAgICAgIGlmIFlhc3VvTWVudS5IYXJhc3MuVXNlUSB0aGVuDQogICAgICAgICAgICBRMTIodGFyZ2V0KQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgWWFzdW9NZW51LkhhcmFzcy5Vc2VRMiB0aGVuDQogICAgICAgICAgICBRMyh0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBZYXN1b01lbnUuSGFyYXNzLlVzZUUgdGhlbg0KICAgICAgICAgICAgaWYgbm90IFlhc3VvTWVudS5BZHZhbmNlZC5BZHZFLnVuZGVyVG93ZXIgYW5kIFVuZGVyVHVycmV0KGVFbmRQb3ModGFyZ2V0KSkgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIEUodGFyZ2V0KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBZYXN1b01lbnUuQ29tYm8uVXNlSXRlbXMgdGhlbg0KICAgICAgICAgICAgSXRlbXNUKHRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIFlhc3VvTWVudS5IYXJhc3MuTGhRIHRoZW4NCiAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKHRhcmdldCkgPiA3MDAgYW5kIFExMlJFQURZIHRoZW4NCgkgICAgICAgICAgICBRbGFzdGhpdCgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gQXV0b2xldmVsKCkNCiAgICBpZiBZYXN1b01lbnUuRXh0cmFzLlN0YXJ0THYgPT0gMSBhbmQgWWFzdW9NZW51LkV4dHJhcy5BdXRvTGV2ZWwgdGhlbg0KICAgICAgICAtLWF1dG9MZXZlbFNldFNlcXVlbmNlKFlhc3VvTGV2ZWwuUUVXKQ0KICAgIGVsc2VpZiBZYXN1b01lbnUuRXh0cmFzLlN0YXJ0THYgPT0gMiBhbmQgWWFzdW9NZW51LkV4dHJhcy5BdXRvTGV2ZWwgdGhlbg0KICAgICAgICAtLWF1dG9MZXZlbFNldFNlcXVlbmNlKFlhc3VvTGV2ZWwuRVFXKQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIEF1dG9Qb3Rpb25zKCkNCiAgICBpZiB0aWNrUG90aW9ucyA9PSBuaWwgb3IgKEdldFRpY2tDb3VudCgpIC0gdGlja1BvdGlvbnMgPiAxMDAwKSB0aGVuDQogICAgICAgIC0tUG90aW9uU2xvdCA9IEdldEludmVudG9yeVNsb3RJdGVtKDIwMDMpDQogICAgICAgIC0taWYgUG90aW9uU2xvdCB+PSBuaWwgdGhlbiANCgkJaWYgUG90UmVhZHkoInJlZ2VuZXJhdGlvbnBvdGlvbiIpIHRoZW4NCiAgICAgICAgICAgIGlmIG15SGVyby5oZWFsdGggPCAoWWFzdW9NZW51LkV4dHJhcy5hdXRvUG90aW9ucy8xMDAqbXlIZXJvLm1heEhlYWx0aCkgYW5kIG5vdCBVc2luZ1BvdCBhbmQgbm90IEluRm91bnRhaW4oKSBhbmQgbm90IGlzUmVjYWxsaW5nIHRoZW4NCiAgICAgICAgICAgICAgICAtLUNhc3RTcGVsbChQb3Rpb25TbG90KQ0KCQkJCUNhc3RQb3RzKCJyZWdlbmVyYXRpb25wb3Rpb24iKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICB0aWNrUG90aW9ucyA9IEdldFRpY2tDb3VudCgpDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gS2lsbHN0ZWFsKCkNCiAgICBmb3IgaSwgZW5lbXkgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXRlZFQoZW5lbXkpIHRoZW4NCgkJICAgIGlmIGlnbml0ZSB+PSBuaWwgYW5kIGVuZW15LmhlYWx0aCA8PSBDYWxEbWcoZW5lbXksICJJR05JVEUiKSBhbmQgWWFzdW9NZW51LktTLlVzZUlnbml0ZSBhbmQgR2V0RGlzdGFuY2UoZW5lbXkpIDwgNjAwIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoaWduaXRlLCBlbmVteSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgZW5lbXkuaGVhbHRoIDw9IENhbERtZyhlbmVteSwgIlEiKSBhbmQgWWFzdW9NZW51LktTLlVzZVEgYW5kIFExMlJFQURZIGFuZCBHZXREaXN0YW5jZShlbmVteSkgPCBSYW5nZXMuUTEyIHRoZW4NCiAgICAgICAgICAgICAgICBRMTIoZW5lbXkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIGVuZW15LmhlYWx0aCA8PSBDYWxEbWcoZW5lbXksICJRIikgYW5kIFlhc3VvTWVudS5LUy5Vc2VRMiBhbmQgUTNSRUFEWSBhbmQgR2V0RGlzdGFuY2UoZW5lbXkpIDwgUmFuZ2VzLlEzIHRoZW4NCiAgICAgICAgICAgICAgICBRMyhlbmVteSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgZW5lbXkuaGVhbHRoIDw9IENhbERtZyhlbmVteSwgIkUiKSBhbmQgWWFzdW9NZW51LktTLlVzZUUgYW5kIEdldERpc3RhbmNlKGVuZW15KSA8IFJhbmdlcy5FIHRoZW4NCiAgICAgICAgICAgICAgICBFKGVuZW15KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBlbmVteS5oZWFsdGggPD0gQ2FsRG1nKGVuZW15LCAiUiIpIGFuZCBZYXN1b01lbnUuS1MuVXNlUiBhbmQgR2V0RGlzdGFuY2UoZW5lbXkpIDwgUmFuZ2VzLlIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIEtub2NrdXBzW2VuZW15Lm5ldHdvcmtJRF0gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgUihlbmVteSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBHZXRNaW5pb25OZWFyVW5pdCh1bml0KQ0KICAgIGxvY2FsIGNsb3Nlc3RNaW5pb24sIG5lYXJlc3REaXN0YW5jZSA9IG5pbCwgMA0KICAgIEVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgIEp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCglsb2NhbCBwcmVkaWN0UG9zID0gKHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgVlA6R2V0UHJlZGljdGVkUG9zKHVuaXQsIDAuMykpIG9yIG1vdXNlUG9zDQogICAgZm9yIGluZGV4LCBtaW5pb24gaW4gcGFpcnMoRW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIG1pbmlvbiBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCBSYW5nZXMuRSA+PSBHZXREaXN0YW5jZShtaW5pb24pIGFuZCBHZXREaXN0YW5jZShlRW5kUG9zKG1pbmlvbiksIHByZWRpY3RQb3MpIDwgR2V0RGlzdGFuY2UocHJlZGljdFBvcykgYW5kIG5lYXJlc3REaXN0YW5jZSA8IEdldERpc3RhbmNlKG1pbmlvbikgdGhlbg0KICAgICAgICAgICAgbmVhcmVzdERpc3RhbmNlID0gR2V0RGlzdGFuY2UobWluaW9uKQ0KICAgICAgICAgICAgY2xvc2VzdE1pbmlvbiA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBmb3IgaW5kZXgsIG1pbmlvbiBpbiBwYWlycyhKdW5nbGVNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIG1pbmlvbiBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCBSYW5nZXMuRSA+PSBHZXREaXN0YW5jZShtaW5pb24pIGFuZCBHZXREaXN0YW5jZShlRW5kUG9zKG1pbmlvbiksIHByZWRpY3RQb3MpIDwgR2V0RGlzdGFuY2UocHJlZGljdFBvcykgYW5kIG5lYXJlc3REaXN0YW5jZSA8IEdldERpc3RhbmNlKG1pbmlvbikgdGhlbg0KICAgICAgICAgICAgbmVhcmVzdERpc3RhbmNlID0gR2V0RGlzdGFuY2UobWluaW9uKQ0KICAgICAgICAgICAgY2xvc2VzdE1pbmlvbiA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBmb3IgaSwgZW5lbXkgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgaWYgZW5lbXkgYW5kIG5vdCBlbmVteS5kZWFkIGFuZCBSYW5nZXMuRSA+PSBHZXREaXN0YW5jZShlbmVteSkgYW5kIEdldERpc3RhbmNlKGVFbmRQb3MoZW5lbXkpLCBwcmVkaWN0UG9zKSA8IEdldERpc3RhbmNlKHByZWRpY3RQb3MpIGFuZCBuZWFyZXN0RGlzdGFuY2UgPCBHZXREaXN0YW5jZShlbmVteSkgdGhlbg0KICAgICAgICAgICAgbmVhcmVzdERpc3RhbmNlID0gR2V0RGlzdGFuY2UoZW5lbXkpDQogICAgICAgICAgICBjbG9zZXN0TWluaW9uID0gZW5lbXkNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIGNsb3Nlc3RNaW5pb24NCmVuZA0KDQpmdW5jdGlvbiBFc2NhcGUoKQ0KICAgIEVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgIGlmIFlhc3VvTWVudS5Fc2NhcGUuTW91c2UgYW5kIG5vdCBOZWFyTW91c2UgYW5kIG5vdCBzdG9wTW92ZSB0aGVuDQogICAgICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCwgbW91c2VQb3MueikNCiAgICBlbmQNCiAgICBsb2NhbCBtUG9zID0gR2V0TWluaW9uTmVhclVuaXQobW91c2VQb3MpDQogICAgaWYgbVBvcyB0aGVuDQogICAgICAgIEUobVBvcykNCiAgICBlbmQNCiAgICBpZiBZYXN1b01lbnUuRXNjYXBlLlN0YWNrUSBhbmQgUTEyUkVBRFkgYW5kIElzRGFzaGluZzIoKSB0aGVuDQogICAgICAgIGZvciBfLCBtaW5pb24gaW4gcGFpcnMoRW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICBpZiBtaW5pb24gfj0gbmlsIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDwgMzUwIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsbWluaW9uLngsbWluaW9uLnopDQogICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KCQlmb3IgXywgbWluaW9uIGluIHBhaXJzKEp1bmdsZU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgICAgIGlmIG1pbmlvbiB+PSBuaWwgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPCAzNTAgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUSxtaW5pb24ueCxtaW5pb24ueikNCiAgICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gV2FsbEp1bXBUKCkNCiAgICBKdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgbG9jYWwgSnVuZ2xlTW9iID0gR2V0SnVuZ2xlTW9iMigpDQoJaWYgWWFzdW9NZW51LkVzY2FwZUtleSB0aGVuDQogICAgICAgIGxvY2FsIHRvID0gVmVjdG9yKG15SGVyby54LCBteUhlcm8ueSxteUhlcm8ueikNCiAgICAgICAgbG9jYWwgc3RvcE1vdmUgPSBmYWxzZQ0KICAgICAgICBsb2NhbCBTcG90cyA9IEp1bXBTcG90c1tteUhlcm8uY2hhck5hbWVdDQogICAgICAgIGlmIFNwb3RzIGFuZCBZYXN1b01lbnUuV2FsbGp1bXAuRW5hYmxlZCB0aGVuDQogICAgICAgICAgICBmb3IgaSwgc3BvdCBpbiBpcGFpcnMoU3BvdHMpIGRvDQogICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoc3BvdC5Gcm9tLG1vdXNlUG9zKSA8IDMwMCozMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdG9wTW92ZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoc3BvdC5Gcm9tLCB0bykgPiAyNTAqMjUwIHRoZW4NCgkJCQkgICAgICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCwgbW91c2VQb3MueikNCgkJCSAgICAgICAgZWxzZWlmIEdldERpc3RhbmNlU3FyKHNwb3QuRnJvbSwgdG8pIDwgMjUwKjI1MCB0aGVuDQoJCQkJICAgICAgIFdKOkFkZEFjdGlvbihNb3ZlV2FsbChzcG90LkZyb20pKQ0KCQkJCSAgICAgICBteUhlcm86TW92ZVRvKHNwb3QuRnJvbS54LCBzcG90LkZyb20ueikNCgkJCSAgICAgICAgZW5kDQoJCQkgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKHNwb3QuRnJvbSwgdG8pIDwgMjUqMjUgdGhlbg0KCQkJCSAgICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKF9XKSA9PSBSRUFEWSBhbmQgKEp1bmdsZU1vYiA9PSBuaWwpIHRoZW4NCgkJCQkJICAgICAgICBDYXN0U3BlbGwoX1csIHNwb3QuQ2FzdFBvcy54LHNwb3QuQ2FzdFBvcy56KQ0KCQkJCQkgICAgZW5kDQoJCQkJICAgICAgICBpZiBKdW5nbGVNb2Igfj0gbmlsIGFuZCBHZXREaXN0YW5jZShKdW5nbGVNb2IpIDw9IDQ3NSBhbmQgRVJFQURZIHRoZW4NCgkJCQkJICAgICAgICBDYXN0U3BlbGwoX0UsSnVuZ2xlTW9iKQ0KCQkJCQkJICAgIGZvciBfLCBtaW5pb24gaW4gcGFpcnMoSnVuZ2xlTWluaW9ucy5vYmplY3RzKSBkbw0KCQkJCQkJICAgICAgICBpZiBtaW5pb24gYW5kIG1pbmlvbi52YWxpZCBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IDQ3NSB0aGVuDQoJCQkJCQkJICAgICAgICBDYXN0U3BlbGwoX0UsbWluaW9uKQ0KCQkJCQkJCSAgICBlbmQNCgkJCQkJCSAgICBlbmQNCgkJCQkgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCgkJCQllbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBUQVJHQih0KQ0KCXJldHVybiBBUkdCKHRbMV0sIHRbMl0sIHRbM10sIHRbNF0pDQplbmQNCg0KZnVuY3Rpb24gRHJhd0Nvb2xBcnJvdyhmcm9tLCB0bywgY29sb3IpDQoJRHJhd0xpbmVCb3JkZXIzRChmcm9tLngsIG15SGVyby55LCBmcm9tLnosIHRvLngsIG15SGVyby55LCB0by56LCAyLCBjb2xvciwgMSkNCmVuZA0KDQotLVtbZnVuY3Rpb24gT25OZXdQYXRoKHVuaXQsIHN0YXJ0UG9zLCBlbmRQb3MsIGlzRGFzaCwgZGFzaFNwZWVkLCBkYXNoR3Jhdml0eSwgZGFzaERpc3RhbmNlKQ0KICAgIGlmIGlzRGFzaCBhbmQgdW5pdCBhbmQgdW5pdC5pc01lIHRoZW4NCgkgICAgLS1Fc3BlZWQgPSBkYXNoU3BlZWQNCgkJLS1FZHVyYXRpb24gPSA0NzUvZGFzaFNwZWVkIC0gR2V0TGF0ZW5jeSgpLzEwMDANCgkJLS1FZHVyYXRpb24yID0gNDc1L2Rhc2hTcGVlZCArIG9zLmNsb2NrKCkNCgkJLS1UZGFzaGluZyA9IHRydWUNCgllbmQNCmVuZF1dDQoNCmZ1bmN0aW9uIEV0b01vdXNlKCkNCiAgICBFbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgICBsb2NhbCBtUG9zID0gR2V0TWluaW9uTmVhclVuaXQobW91c2VQb3MpDQogICAgaWYgbVBvcyB0aGVuDQogICAgICAgIEUobVBvcykNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBCdWZmUmVzZXQoKQ0KCWZvciBpLCBvYmogaW4gcGFpcnMoS25vY2t1cHMpIGRvDQoJCWlmIG9zLmNsb2NrKCkgPj0gb2JqIHRoZW4NCgkJCUtub2NrdXBzW2ldID0gbmlsDQoJCWVuZA0KCWVuZA0KCWZvciBpLCBvYmogaW4gcGFpcnMoVW5pdFdpdGhFKSBkbw0KCQlpZiBvcy5jbG9jaygpID49IG9iaiB0aGVuDQoJCQlVbml0V2l0aEVbaV0gPSBuaWwNCgkJCS0tdW5pdGtub2NrZWQgPSB1bml0a25vY2tlZCAtIDENCgkJZW5kDQoJZW5kDQoJZm9yIGksb2JqIGluIHBhaXJzKFRhcmdldEtub2NrZWR1cCkgZG8NCgkJaWYgb3MuY2xvY2soKSA+PSBvYmogdGhlbg0KCQkJVGFyZ2V0S25vY2tlZHVwW2ldID0gbmlsDQoJCQl0YXJnZXRrbm9ja2VkID0gdGFyZ2V0a25vY2tlZCAtIDENCgkJZW5kDQoJZW5kCSAgICANCmVuZA0KDQpmdW5jdGlvbiBIYXZlQnVmZkUoYnVmZix1bml0KQ0KICAgIC0tcmV0dXJuIFRhcmdldEhhdmVCdWZmRShidWZmLHVuaXQpDQoJaWYgVW5pdFdpdGhFW3VuaXQubmV0d29ya0lEXSB+PSBuaWwgdGhlbg0KCSAgICByZXR1cm4gdHJ1ZQ0KCWVuZA0KCXJldHVybiBmYWxzZQ0KZW5kDQotLS0tLS0tLS0gV2FsbCBKdW1wIC0tLS0tLS0tLS0tLS0tLQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjbGFzcyAiWWFzdW9XYWxsSnVtcCINCmZ1bmN0aW9uIFlhc3VvV2FsbEp1bXA6X19pbml0KCkNCglBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOk9uVGljaygpIGVuZCkNCglzZWxmLnF1ZXVlID0ge30NCglzZWxmLmN1cnJlbnRhY3Rpb24gPSBuaWwNCmVuZA0KDQpmdW5jdGlvbiBZYXN1b1dhbGxKdW1wOk9uVGljaygpDQoJaWYgbm90IHNlbGYuY3VycmVudGFjdGlvbiBhbmQgI3NlbGYucXVldWUgPiAwIHRoZW4NCgkJbG9jYWwgYWN0aW9uID0gc2VsZi5xdWV1ZVsxXQ0KCQlzZWxmLmN1cnJlbnRhY3Rpb24gPSBhY3Rpb24NCgkJaWYgc2VsZi5jdXJyZW50YWN0aW9uLm9uc3RhcnRjYWxsYmFjayB0aGVuDQoJCQlpZiBzZWxmLmN1cnJlbnRhY3Rpb24ub25zdGFydGNhbGxiYWNrKCkgdGhlbg0KCQkJCWFjdGlvbjpzdGFydChzZWxmKQ0KCQkJZW5kDQoJCWVsc2UNCgkJCWFjdGlvbjpzdGFydCgpDQoJCWVuZA0KCQkNCgkJdGFibGUucmVtb3ZlKHNlbGYucXVldWUsIDEpDQoJZWxzZWlmIHNlbGYuY3VycmVudGFjdGlvbiB0aGVuDQoJCWlmIHNlbGYuY3VycmVudGFjdGlvbjpjaGVja2ZpbmlzaGVkKCkgdGhlbg0KCQkJc2VsZi5jdXJyZW50YWN0aW9uOk9uRmluaXNoKHNlbGYpDQoJCQlzZWxmLmN1cnJlbnRhY3Rpb24gPSBuaWwNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gWWFzdW9XYWxsSnVtcDpBZGRBY3Rpb24oYWN0aW9uLCBwb3MpDQoJdGFibGUuaW5zZXJ0KHNlbGYucXVldWUsIHBvcyBvciAoI3NlbGYucXVldWUgKyAxKSwgYWN0aW9uKQ0KZW5kDQoNCmZ1bmN0aW9uIFlhc3VvV2FsbEp1bXA6R2V0TGFzdEFjdGlvbigpDQoJaWYgc2VsZi5jdXJyZW50YWN0aW9uIGFuZCAjc2VsZi5xdWV1ZSA9PSAwIHRoZW4NCgkJcmV0dXJuIHNlbGYuY3VycmVudGFjdGlvbg0KCWVsc2VpZiAjc2VsZi5xdWV1ZSA+IDAgdGhlbg0KCQlyZXR1cm4gc2VsZi5xdWV1ZVsjc2VsZi5xdWV1ZV0NCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBZYXN1b1dhbGxKdW1wOkNsZWFyUXVldWUoKQ0KCXNlbGYucXVldWUgPSB7fQ0KZW5kDQoNCmZ1bmN0aW9uIFlhc3VvV2FsbEp1bXA6U3RvcEN1cnJlbnRBY3Rpb24oKQ0KCXNlbGYuY3VycmVudGFjdGlvbiA9IG5pbA0KZW5kDQoNCmZ1bmN0aW9uIFlhc3VvV2FsbEp1bXA6RHJhdygpDQoJaWYgc2VsZi5jdXJyZW50YWN0aW9uIHRoZW4NCgkJbG9jYWwgZnJvbSA9IFZlY3RvcihteUhlcm8pDQoJCWxvY2FsIHRvID0gVmVjdG9yKG15SGVybykNCgkJDQoJCXRvID0gc2VsZi5jdXJyZW50YWN0aW9uLnRvIGFuZCBzZWxmLmN1cnJlbnRhY3Rpb24udG8gb3IgdG8NCg0KCQlzZWxmLmN1cnJlbnRhY3Rpb246RHJhdyhmcm9tLCB0bykNCg0KCQlmb3IgaSwgYWN0aW9uIGluIGlwYWlycyhzZWxmLnF1ZXVlKSBkbw0KCQkJZnJvbSA9IHRvDQoJCQlpZiBhY3Rpb24udGFyZ2V0IGFuZCBWYWxpZFRhcmdldChhY3Rpb24udGFyZ2V0KSB0aGVuDQoJCQkJYWN0aW9uLnRvID0gVmVjdG9yKGFjdGlvbi50YXJnZXQpDQoJCQllbmQNCgkJCXRvID0gYWN0aW9uLnRvIGFuZCBhY3Rpb24udG8gb3IgdG8NCgkJCWFjdGlvbjpEcmF3KGZyb20sIHRvKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpjbGFzcyAiQ2FzdFRvVGFyZ2V0RSINCmZ1bmN0aW9uIENhc3RUb1RhcmdldEU6X19pbml0KHNsb3QsIHRhcmdldCkNCglzZWxmLnRvID0gdGFyZ2V0DQoJc2VsZi50YXJnZXQgPSB0YXJnZXQNCglzZWxmLnNsb3QgPSBzbG90DQoJc2VsZi5vcmlnaW5hbG5hbWUgPSBteUhlcm86R2V0U3BlbGxEYXRhKHNlbGYuc2xvdCkubmFtZQ0KZW5kDQoNCmZ1bmN0aW9uIENhc3RUb1RhcmdldEU6c3RhcnQoKQ0KZW5kDQoNCmZ1bmN0aW9uIENhc3RUb1RhcmdldEU6Y2hlY2tmaW5pc2hlZCgpDQoJaWYgbXlIZXJvOkNhblVzZVNwZWxsKHNlbGYuc2xvdCkgPT0gUkVBRFkgYW5kIG5vdCBzZWxmLmNhc3RlZCB0aGVuDQoJCUNhc3RTcGVsbChzZWxmLnNsb3QsIHNlbGYudGFyZ2V0KQ0KCQlzZWxmLmNhc3RlZCA9IHRydWUNCgllbmQNCg0KCWlmIHNlbGYuY2FzdGVkIGFuZCAobXlIZXJvOkNhblVzZVNwZWxsKHNlbGYuc2xvdCkgfj0gUkVBRFkgb3IgbXlIZXJvOkdldFNwZWxsRGF0YShzZWxmLnNsb3QpLm5hbWUgfj0gc2VsZi5vcmlnaW5hbG5hbWUpdGhlbg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KCXJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIENhc3RUb1RhcmdldEU6T25GaW5pc2gocGFyZW50KQ0KZW5kDQoNCmZ1bmN0aW9uIENhc3RUb1RhcmdldEU6RHJhdyhmcm9tLCB0bykNCglEcmF3TGluZUJvcmRlcjNEKGZyb20ueCwgbXlIZXJvLnksIGZyb20ueiwgdG8ueCwgbXlIZXJvLnksIHRvLnosIDIsIHNlbGYuY29sb3Igb3IgQVJHQigxMDAsIDAsIDAsIDI1NSksIDEpDQplbmQNCmNsYXNzICJXYWl0Rm9ySnVuZ2xlTW9iIg0KZnVuY3Rpb24gV2FpdEZvckp1bmdsZU1vYjpfX2luaXQoZGlzdGFuY2UsIHRpbWVvdXQpDQoJZGlzdGFuY2UgPSBkaXN0YW5jZSBvciAyMDAwDQoJdGltZW91dCA9IHRpbWVvdXQgb3IgMQ0KCXNlbGYubmFtZSA9IG5hbWUNCglzZWxmLmZvdW5kID0gZmFsc2UNCglzZWxmLnN0YXJ0VGltZSA9IG1hdGguaHVnZQ0KCXNlbGYudGltZW91dCA9IHRpbWVvdXQNCglzZWxmLmRpc3RhbmNlc3FyID0gZGlzdGFuY2UgKiBkaXN0YW5jZQ0KCXNlbGYuSnVuZ2xlTWluaW9ucyA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgZGlzdGFuY2UsIG15SGVyby52aXNpb25Qb3MsIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQplbmQNCg0KZnVuY3Rpb24gV2FpdEZvckp1bmdsZU1vYjpzdGFydCgpDQoJc2VsZi5zdGFydFRpbWUgPSBvcy5jbG9jaygpDQplbmQNCg0KZnVuY3Rpb24gV2FpdEZvckp1bmdsZU1vYjpPbkZpbmlzaChwYXJlbnQpDQoJaWYgKCNwYXJlbnQucXVldWUgPiAwKSBhbmQgc2VsZi5vYmplY3QgdGhlbg0KCQlwYXJlbnQucXVldWVbMV0udGFyZ2V0ID0gc2VsZi5vYmplY3QNCgkJcGFyZW50LnF1ZXVlWzFdLnRvID0gc2VsZi5vYmplY3QNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBXYWl0Rm9ySnVuZ2xlTW9iOmNoZWNrZmluaXNoZWQoKQ0KCXNlbGYuSnVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KCWlmIChvcy5jbG9jaygpIC0gc2VsZi5zdGFydFRpbWUpID4gc2VsZi50aW1lb3V0IG9yIHNlbGYuSnVuZ2xlTWluaW9ucy5vYmplY3RzWzFdIHRoZW4NCgkJc2VsZi5vYmplY3QgPSBzZWxmLkp1bmdsZU1pbmlvbnMub2JqZWN0c1sxXQ0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KCXJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIFdhaXRGb3JKdW5nbGVNb2I6RHJhdyhmcm9tLCB0bykNCglEcmF3VGV4dDNEKHRvc3RyaW5nKCJKdW5nbGUgTW9iIiksIGZyb20ueCwgZnJvbS55LCBmcm9tLnosIDEzLCBzZWxmLmNvbG9yIG9yIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCmVuZA0KDQpjbGFzcyAiTW92ZVdhbGwiDQpmdW5jdGlvbiBNb3ZlV2FsbDpfX2luaXQodG8pDQoJc2VsZi50byA9IHRvDQplbmQNCg0KZnVuY3Rpb24gTW92ZVdhbGw6c3RhcnQoKQ0KCS0tV2F5UG9pbnRNYW5hZ2VyLkFkZENhbGxiYWNrKGZ1bmN0aW9uKG4pIHNlbGY6T25OZXdXYXlwb2ludHMobikgZW5kKQ0KCS0tc2VsZi5XYXlwb2ludHNSZWNlaXZlZCA9IGZhbHNlDQoJLS1teUhlcm86TW92ZVRvKHNlbGYudG8ueCwgc2VsZi50by56KQ0KZW5kDQoNCmZ1bmN0aW9uIE1vdmVXYWxsOmNoZWNrZmluaXNoZWQoKQ0KCWlmIG15SGVyby5oYXNNb3ZlUGF0aCBvciBHZXREaXN0YW5jZVNxcihteUhlcm8udmlzaW9uUG9zLCBzZWxmLnRvKSA8IDQwMCB0aGVuDQoJCWxvY2FsIHdheXBvaW50cyA9IHNlbGY6R2V0V2F5UG9pbnRzKG15SGVybykNCgkJaWYgR2V0RGlzdGFuY2VTcXIobXlIZXJvLnZpc2lvblBvcywgd2F5cG9pbnRzWyN3YXlwb2ludHNdKSA8PSAgKG15SGVyby5tcyAqIChHZXRMYXRlbmN5KCkvMjAwMCArIDAuMSkpXjIgIG9yICN3YXlwb2ludHMgPT0gMSB0aGVuDQoJCQlyZXR1cm4gdHJ1ZQ0KCQllbmQNCgllbmQNCgktLW15SGVybzpNb3ZlVG8oc2VsZi50by54LCBzZWxmLnRvLnopDQoJcmV0dXJuIGZhbHNlDQplbmQNCg0KLS1bW2Z1bmN0aW9uIE1vdmVXYWxsOk9uTmV3V2F5cG9pbnRzKG5ldHdvcmtJRCkNCglpZiBuZXR3b3JrSUQgPT0gbXlIZXJvLm5ldHdvcmtJRCB0aGVuDQoJCXNlbGYuV2F5cG9pbnRzUmVjZWl2ZWQgPSB0cnVlDQoJZW5kDQplbmRdXQ0KDQpmdW5jdGlvbiBNb3ZlV2FsbDpPbkZpbmlzaChwYXJlbnQpDQplbmQNCg0KZnVuY3Rpb24gTW92ZVdhbGw6RHJhdyhmcm9tLCB0bykNCgktLWlmIHNlbGYuV2F5cG9pbnRzUmVjZWl2ZWQgdGhlbg0KCWxvY2FsIHdheXBvaW50cyA9IHNlbGY6R2V0V2F5UG9pbnRzKG15SGVybykNCglpZiBteUhlcm8uaGFzTW92ZVBhdGggdGhlbg0KCQlmb3IgaSA9IDEsICN3YXlwb2ludHMgLSAxIGRvDQoJCQlmcm9tID0gVmVjdG9yKHdheXBvaW50c1tpXS54LCAwLCB3YXlwb2ludHNbaV0ueSkNCgkJCXRvID0gVmVjdG9yKHdheXBvaW50c1tpICsgMV0ueCwgMCwgd2F5cG9pbnRzW2kgKyAxXS55KQ0KDQoJCQlEcmF3TGluZUJvcmRlcjNEKGZyb20ueCwgbXlIZXJvLnksIGZyb20ueiwgdG8ueCwgbXlIZXJvLnksIHRvLnosIDIsIHNlbGYuY29sb3Igb3IgQVJHQigxMDAsIDAsIDI1NSwgMCksIDEpDQoJCWVuZA0KCWVsc2UNCgkJRHJhd0xpbmVCb3JkZXIzRChmcm9tLngsIG15SGVyby55LCBmcm9tLnosIHRvLngsIG15SGVyby55LCB0by56LCAyLCBzZWxmLmNvbG9yIG9yIEFSR0IoMTAwLCAwLCAyNTUsIDApLCAxKQ0KCWVuZA0KZW5kDQpmdW5jdGlvbiBNb3ZlV2FsbDpHZXRXYXlQb2ludHMob2JqZWN0KQ0KCWxvY2FsIHJlc3VsdCA9IHt9DQoJaWYgb2JqZWN0Lmhhc01vdmVQYXRoIHRoZW4NCgkJcmVzdWx0WzFdID0gVmVjdG9yKG9iamVjdC5wb3MueCwgb2JqZWN0LnBvcy55LCBvYmplY3QucG9zLnopDQoJCWZvciBpID0gb2JqZWN0LnBhdGhJbmRleCwgb2JqZWN0LnBhdGhDb3VudCBkbw0KCQkJbG9jYWwgcCA9IG9iamVjdDpHZXRQYXRoKGkpDQoJCQlyZXN1bHRbI3Jlc3VsdCsxXSA9IFZlY3RvcihwLngsIHAueSwgcC56KQ0KCQllbmQNCgllbHNlDQoJCXJlc3VsdFsxXSA9IFZlY3RvcihvYmplY3QucG9zLngsIG9iamVjdC5wb3MueSwgb2JqZWN0LnBvcy56KQ0KCWVuZA0KCXJldHVybiByZXN1bHQNCmVuZA0KDQpmdW5jdGlvbiBSZXNldEFBKCkNCiAgICBpZiBfRy5BdXRvQ2FycnkgdGhlbiBfRy5BdXRvQ2FycnkuT3Jid2Fsa2VyOlJlc2V0QXR0YWNrVGltZXIoKSBlbmQNCmVuZA0KDQpmdW5jdGlvbiBWYWxpZFRhcmdldGVkVCh0YXJnZXQscmFuZ2UpDQogICAgcmV0dXJuIFZhbGlkVGFyZ2V0KHRhcmdldCxyYW5nZSkgYW5kIHRhcmdldC52YWxpZCBhbmQgbm90IHRhcmdldC5kZWFkIA0KZW5kDQotLUNSRURJVCBUTyBFWFRSQUdPWg0KbG9jYWwgc3BlbGx0eXBlID0gIlVua25vd24iDQoNCiANCmxvY2FsIE90aGVycyA9IHsiUmVjYWxsIiwicmVjYWxsIiwiT2RpbkNhcHR1cmVDaGFubmVsIiwiTGFudGVybldBbGx5IiwidmFydXNlbWlzc2lsZWR1bW15Iiwia2hheml4cWV2byIsImtoYXppeHdldm8iLCJraGF6aXhlZXZvIiwia2hheml4cmV2byIsImJyYXVtZWR1bW15dm9lenJlYWwiLCJicmF1bWVkdW1teXZvbmFtaSIsImJyYXVtZWR1bW15dm9jYWl0bHluIiwiYnJhdW1lZHVtbXl2b3JpdmVuIiwiYnJhdW1lZHVtbXl2b2RyYXZlbiIsImJyYXVtZWR1bW15dm9hc2hlIiwiYXppcmR1bW15c3BlbGwifQ0KbG9jYWwgSXRlbXMgPSB7IlJlZ2VuZXJhdGlvblBvdGlvbiIsIkZsYXNrT2ZDcnlzdGFsV2F0ZXIiLCJJdGVtQ3J5c3RhbEZsYXNrIiwiSXRlbU1pbmlSZWdlblBvdGlvbiIsIlBvdGlvbk9mQnJpbGxpYW5jZSIsIlBvdGlvbk9mRWx1c2l2ZW5lc3MiLCJQb3Rpb25PZkdpYW50U3RyZW5ndGgiLCJPcmFjbGVFbGl4aXJTaWdodCIsIk9yYWNsZUV4dHJhY3RTaWdodCIsIlZpc2lvbldhcmQiLCJTaWdodFdhcmQiLCJzaWdodHdhcmQiLCJJdGVtR2hvc3RXYXJkIiwiSXRlbU1pbmlXYXJkIiwiRWxpeGlyT2ZSYWdlIiwiRWxpeGlyT2ZJbGx1bWluYXRpb24iLCJ3cmlnZ2xlbGFudGVybiIsIkRlYXRoZmlyZUdyYXNwIiwiSGV4dGVjaEd1bmJsYWRlIiwic2h1cmVseWFzY3Jlc3QiLCJJcm9uU3R5bHVzIiwiWmhvbnlhc0hvdXJnbGFzcyIsIllvdW11c0JsYWRlIiwicmFuZHVpbnNvbWVuIiwiUmFuZHVpbnNPbWVuIiwiTW91cm5pbmciLCJPZGluRW50cm9waWNDbGF5bW9yZSIsIkJpbGdld2F0ZXJDdXRsYXNzIiwiUXVpY2tzaWx2ZXJTYXNoIiwiSGV4dGVjaFN3ZWVwZXIiLCJJdGVtR2xhY2lhbFNwaWtlIiwiSXRlbU1lcmN1cmlhbCIsIkl0ZW1XcmFpdGhDb2xsYXIiLCJJdGVtU29URCIsIkl0ZW1Nb3JlbGxvc0JhbmUiLCJJdGVtUHJvbW90ZSIsIkl0ZW1UaWFtYXRDbGVhdmUiLCJNdXJhbWFuYSIsIkl0ZW1TZXJhcGhzRW1icmFjZSIsIkl0ZW1Td29yZE9mRmVhc3RBbmRGYW1pbmUiLCJJdGVtRmFpdGhTaGFrZXIiLCJPZHluc1ZlaWwiLCJJdGVtSG9ybiIsIkl0ZW1Qb3JvU25hY2siLCJJdGVtQmxhY2tmaXJlVG9yY2giLCJIZWFsdGhCb21iIiwiSXRlbURlcnZpc2hCbGFkZSIsIlRyaW5rZXRUb3RlbUx2bDEiLCJUcmlua2V0VG90ZW1MdmwyIiwiVHJpbmtldFRvdGVtTHZsMyIsIlRyaW5rZXRUb3RlbUx2bDNCIiwiVHJpbmtldFN3ZWVwZXJMdmwxIiwiVHJpbmtldFN3ZWVwZXJMdmwyIiwiVHJpbmtldFN3ZWVwZXJMdmwzIiwiVHJpbmtldE9yYkx2bDEiLCJUcmlua2V0T3JiTHZsMiIsIlRyaW5rZXRPcmJMdmwzIiwiT2RpblRyaW5rZXRSZXZpdmUiLCJSZWxpY01pbm9yU3BvdHRlciIsIlJlbGljU3BvdHRlciIsIlJlbGljR3JlYXRlckxhbnRlcm4iLCJSZWxpY0xhbnRlcm4iLCJSZWxpY1NtYWxsTGFudGVybiIsIkl0ZW1GZXJhbEZsYXJlIiwidHJpbmtldG9yYmx2bDIiLCJ0cmlua2V0c3dlZXBlcmx2bDIiLCJ0cmlua2V0dG90ZW1sdmwyIiwiU3Bpcml0TGFudGVybiIsIlJlbGljR3JlYXRlclNwb3R0ZXIifQ0KbG9jYWwgTVNwZWxscyA9IHsiSmF5Y2VTdGF0aWNGaWVsZCIsIkpheWNlVG9UaGVTa2llcyIsIkpheWNlVGh1bmRlcmluZ0Jsb3ciLCJUYWtlZG93biIsIlBvdW5jZSIsIlN3aXBlIiwiRWxpc2VTcGlkZXJRQ2FzdCIsIkVsaXNlU3BpZGVyVyIsIkVsaXNlU3BpZGVyRUluaXRpYWwiLCJlbGlzZXNwaWRlcmUiLCJlbGlzZXNwaWRlcmVkZXNjZW50IiwiZ25hcmJpZ3EiLCJnbmFyYmlndyIsImduYXJiaWdlIiwiR25hckJpZ1FNaXNzaWxlIn0NCmxvY2FsIFBTcGVsbHMgPSB7IkNhaXRseW5IZWFkc2hvdE1pc3NpbGUiLCJSdW1ibGVPdmVyaGVhdEF0dGFjayIsIkphcnZhbklWTWFydGlhbENhZGVuY2VBdHRhY2siLCJTaGVuS2lBdHRhY2siLCJNYXN0ZXJZaURvdWJsZVN0cmlrZSIsInNvbmFxYXR0YWNrdXBncmFkZSIsInNvbmF3YXR0YWNrdXBncmFkZSIsInNvbmFlYXR0YWNrdXBncmFkZSIsIk5vY3R1cm5lVW1icmFCbGFkZXNBdHRhY2siLCJOYXV0aWx1c1JhdmFnZVN0cmlrZUF0dGFjayIsIlppZ2dzUGFzc2l2ZUF0dGFjayIsIlF1aW5uV0VuaGFuY2VkIiwiTHVjaWFuUGFzc2l2ZUF0dGFjayIsIlNrYXJuZXJQYXNzaXZlQXR0YWNrIiwiS2FydGh1c0RlYXRoRGVmaWVkQnVmZiIsIkF6aXJUb3dlckNsaWNrIiwiYXppcnRvd2VyY2xpY2siLCJhemlydG93ZXJjbGlja2NoYW5uZWwifQ0KIA0KbG9jYWwgUVNwZWxscyA9IHsiVHJ1bmRsZVEiLCJMZW9uYVNoaWVsZE9mRGF5YnJlYWtBdHRhY2siLCJYZW5aaGFvVGhydXN0IiwiTmF1dGlsdXNBbmNob3JEcmFnTWlzc2lsZSIsIlJvY2tldEdyYWJNaXNzaWxlIiwiVmF5bmVUdW1ibGVBdHRhY2siLCJWYXluZVR1bWJsZVVsdEF0dGFjayIsIk5pZGFsZWVUYWtlZG93bkF0dGFjayIsIlNoeXZhbmFEb3VibGVBdHRhY2tIaXQiLCJTaHl2YW5hRG91YmxlQXR0YWNrSGl0RHJhZ29uIiwiZnJvc3RhcnJvdyIsIkZyb3N0QXJyb3ciLCJNb25rZXlLaW5nUUF0dGFjayIsIk1hb2thaVRydW5rTGluZU1pc3NpbGUiLCJGbGFzaEZyb3N0U3BlbGwiLCJ4ZXJhdGhhcmNhbm9wdWxzZWRhbWFnZSIsInhlcmF0aGFyY2Fub3B1bHNlZGFtYWdlZXh0ZW5kZWQiLCJ4ZXJhdGhhcmNhbm9wdWxzZWRhcmtpcm9uIiwieGVyYXRoYXJjYW5vcHVsc2VkaWV4dGVuZGVkIiwiU3BpcmFsQmxhZGVNaXNzaWxlIiwiRXpyZWFsTXlzdGljU2hvdE1pc3NpbGUiLCJFenJlYWxNeXN0aWNTaG90UHVsc2VNaXNzaWxlIiwiamF5Y2VzaG9ja2JsYXN0IiwiQnJhbmRCbGF6ZU1pc3NpbGUiLCJVZHlyVGlnZXJBdHRhY2siLCJUYWxvbk5veGlhbkRpcGxvbWFjeUF0dGFjayIsIkx1bHVRTWlzc2lsZSIsIkdhcmVuU2xhc2gyIiwiVm9saWJlYXJRQXR0YWNrIiwiZHJhdmVuc3Bpbm5pbmdhdHRhY2siLCJrYXJtYWhlYXZlbmx5d2F2ZWMiLCJaaWdnc1FTcGVsbCIsIlVyZ290SGVhdHNlZWtpbmdIb21lTWlzc2lsZSIsIlVyZ290SGVhdHNlZWtpbmdMaW5lTWlzc2lsZSIsIkphdmVsaW5Ub3NzIiwiUml2ZW5UcmlDbGVhdmUiLCJuYW1pcW1pc3NpbGUiLCJOYXN1c1FBdHRhY2siLCJCbGluZE1vbmtRT25lIiwiVGhyZXNoUUludGVybmFsIiwidGhyZXNocWludGVybmFsIiwiUXVpbm5RTWlzc2lsZSIsIkxpc3NhbmRyYVFNaXNzaWxlIiwiRWxpc2VIdW1hblEiLCJHYXJlblFBdHRhY2siLCJKaW54UUF0dGFjayIsIkppbnhRQXR0YWNrMiIsInlhc3VvcSIsInhlcmF0aGFyY2Fub3B1bHNlMiIsIlZlbGtvelFNaXNzaWxlIiwiS29nTWF3UU1pcyIsIkJyYXVtUU1pc3NpbGUiLCJLYXJ0aHVzTGF5V2FzdGVBMSIsIkthcnRodXNMYXlXYXN0ZUEyIiwiS2FydGh1c0xheVdhc3RlQTMiLCJrYXJ0aHVzbGF5d2FzdGVhMyIsImthcnRodXNsYXl3YXN0ZWEyIiwia2FydGh1c2xheXdhc3RlZGVhZGExIiwiTWFva2FpU2FwbGluZzJCb29tIiwiZ25hcnFtaXNzaWxlIiwiR25hckJpZ1FNaXNzaWxlIiwidmlrdG9ycWJ1ZmYifQ0KbG9jYWwgV1NwZWxscyA9IHsiS29nTWF3QmlvQXJjYW5lQmFycmFnZUF0dGFjayIsIlNpdmlyV0F0dGFjayIsIlR3aXRjaFZlbm9tQ2Fza01pc3NpbGUiLCJncmF2ZXNzbW9rZWdyZW5hZGVib29tIiwibW9yZGVrYWlzZXJjcmVlcGluZ2RlYXRoIiwiRHJhaW5DaGFubmVsIiwiamF5Y2VoeXBlcmNoYXJnZSIsInJlZGNhcmRwcmVhdHRhY2siLCJnb2xkY2FyZHByZWF0dGFjayIsImJsdWVjYXJkcHJlYXR0YWNrIiwiUmVuZWt0b25FeGVjdXRlIiwiUmVuZWt0b25TdXBlckV4ZWN1dGUiLCJFenJlYWxFc3NlbmNlRmx1eE1pc3NpbGUiLCJEYXJpdXNOb3hpYW5UYWN0aWNzT05IQXR0YWNrIiwiVWR5clR1cnRsZUF0dGFjayIsInRhbG9ucmFrZW1pc3NpbGVvbmUiLCJMdWx1V1R3byIsIk9iZHVyYWN5QXR0YWNrIiwiS2VubmVuTWVnYVByb2MiLCJOYXV0aWx1c1dpZGVzd2luZ0F0dGFjayIsIk5hdXRpbHVzQmFja3N3aW5nQXR0YWNrIiwiWGVyYXRoTG9jdXNPZlBvd2VyIiwieW9yaWNrc3VtbW9uZGVjYXllZCIsIkJ1c2h3aGFjayIsImthcm1hc3Bpcml0Ym9uZGMiLCJTZWp1YW5pQmFzaWNBdHRhY2tXIiwiQWF0cm94V09OSEF0dGFja0xpZmUiLCJBYXRyb3hXT05IQXR0YWNrUG93ZXIiLCJKaW54V01pc3NpbGUiLCJHcmFnYXNXQXR0YWNrIiwiYnJhdW13ZHVtbXlzcGVsbCIsInN5bmRyYXdjYXN0IiwiU29yYWthV1BhcnRpY2xlTWlzc2lsZSJ9DQpsb2NhbCBFU3BlbGxzID0geyJLb2dNYXdWb2lkT296ZU1pc3NpbGUiLCJUb3hpY1Nob3RBdHRhY2siLCJMZW9uYVplbml0aEJsYWRlTWlzc2lsZSIsIlBvd2VyRmlzdEF0dGFjayIsIlZheW5lQ29uZGVtbk1pc3NpbGUiLCJTaHl2YW5hRmlyZWJhbGxNaXNzaWxlIiwibWFva2Fpc2FwbGluZzJib29tIiwiVmFydXNFTWlzc2lsZSIsIkNhaXRseW5FbnRyYXBtZW50TWlzc2lsZSIsImpheWNlYWNjZWxlcmF0aW9uZ2F0ZSIsInN5bmRyYWU1IiwiSnVkaWNhdG9yUmlnaHRlb3VzRnVyeUF0dGFjayIsIlVkeXJCZWFyQXR0YWNrIiwiUnVtYmxlR3JlbmFkZU1pc3NpbGUiLCJTbGFzaCIsImhlY2FyaW1yYW1wYXR0YWNrIiwiemlnZ3NlMiIsIlVyZ290UGxhc21hR3JlbmFkZUJvb20iLCJTa2FybmVyRnJhY3R1cmVNaXNzaWxlIiwiWW9yaWNrU3VtbW9uUmF2ZW5vdXMiLCJCbGluZE1vbmtFT25lIiwiRWxpc2VIdW1hbkUiLCJQcmltYWxTdXJnZSIsIlN3aXBlIiwiVmlFQXR0YWNrIiwiTGlzc2FuZHJhRU1pc3NpbGUiLCJ5YXN1b2R1bW15c3BlbGwiLCJYZXJhdGhNYWdlU3BlYXJNaXNzaWxlIiwiUmVuZ2FyRUZpbmFsIiwiUmVuZ2FyRUZpbmFsTUFYIiwiS2FydGh1c0RlZmlsZVNvdW5kRHVtbXkyIn0NCmxvY2FsIFJTcGVsbHMgPSB7IlBhbnRoZW9uX0dyYW5kU2t5ZmFsbF9GYWxsIiwiTHV4TWFsaWNlQ2Fubm9uTWlzIiwiaW5maW5pdGVkdXJlc3NjaGFubmVsIiwiSmFydmFuSVZDYXRhY2x5c21BdHRhY2siLCJqYXJ2YW5pdmNhdGFjbHlzbWF0dGFjayIsIlZheW5lVWx0QXR0YWNrIiwiUnVtYmxlQ2FycGV0Qm9tYkR1bW15IiwiU2h5dmFuYVRyYW5zZm9ybUxlYXAiLCJqYXljZXBhc3NpdmVyYW5nZWRhdHRhY2siLCAiamF5Y2VwYXNzaXZlbWVsZWVhdHRhY2siLCJqYXljZXN0YW5jZWd0aCIsIk1pc3NpbGVCYXJyYWdlTWlzc2lsZSIsIlNwcmF5YW5kUHJheUF0dGFjayIsImpheHJlbGVudGxlc3NhdHRhY2siLCJzeW5kcmFyY2FzdHRpbWUiLCJJbmZlcm5hbEd1YXJkaWFuIiwiVWR5clBob2VuaXhBdHRhY2siLCJGaW9yYURhbmNlU3RyaWtlIiwieGVyYXRoYXJjYW5lYmFycmFnZWRpIiwiTmFtaVJNaXNzaWxlIiwiSGFsbHVjaW5hdGVGdWxsIiwiUXVpbm5SRmluYWxlIiwibGlzc2FuZHJhcmVuZW15IiwiU2VqdWFuaUdsYWNpYWxQcmlzb25DYXN0IiwieWFzdW9yZHVtbXlzcGVsbCIsInhlcmF0aGxvY3VzcHVsc2UiLCJ0ZW1weWFzdW9ybWlzc2lsZSIsIlBhbnRoZW9uUkZhbGwifQ0KIA0KbG9jYWwgY2FzdHR5cGUyID0geyJibGluZG1vbmtxdHdvIiwiYmxpbmRtb25rd3R3byIsImJsaW5kbW9ua2V0d28iLCJpbmZlcm5hbGd1YXJkaWFuZ3VpZGUiLCJLZW5uZW5NZWdhUHJvYyIsInNvbmF3YXR0YWNrdXBncmFkZSIsInJlZGNhcmRwcmVhdHRhY2siLCJmaXp6anVtcHR3byIsImZpenpqdW1wYnVmZmVyIiwiZ3JhZ2FzYmFycmVscm9sbHRvZ2dsZSIsIkxlYmxhbmNTbGlkZU0iLCJsdXhsaWdodHN0cmlrZXRvZ2dsZSIsIlVyZ290SGVhdHNlZWtpbmdIb21lTWlzc2lsZSIsInhlcmF0aGFyY2Fub3B1bHNlZXh0ZW5kZWQiLCJ4ZXJhdGhhcmNhbm9wdWxzZWRhbWFnZWV4dGVuZGVkIiwiWGVuWmhhb1RocnVzdDMiLCJ6aWdnc3d0b2dnbGUiLCJraGF6aXh3bG9uZyIsImtoYXppeGVsb25nIiwicmVuZWt0b25kaWNlIiwiU2VqdWFuaU5vcnRoZXJuV2luZHMiLCJzaHl2YW5hZmlyZWJhbGxkcmFnb24yIiwic2h5dmFuYWltbW9sYXRlZHJhZ29uIiwiU2h5dmFuYURvdWJsZUF0dGFja0hpdERyYWdvbiIsInRhbG9uc2hhZG93YXNzYXVsdHRvZ2dsZSIsInZpa3RvcmNoYW9zc3Rvcm1ndWlkZSIsInplZHcyIiwiWmVkUjIiLCJraGF6aXhxbG9uZyIsIkFhdHJveFdPTkhBdHRhY2tMaWZlIiwidmlrdG9ycWJ1ZmYifQ0KbG9jYWwgY2FzdHR5cGUzID0geyJzb25hZWF0dGFja3VwZ3JhZGUiLCJibHVlY2FyZHByZWF0dGFjayIsIkxlYmxhbmNTb3VsU2hhY2tsZU0iLCJVZHlyUGhvZW5peFN0YW5jZSIsIlJlbmVrdG9uU3VwZXJFeGVjdXRlIn0NCmxvY2FsIGNhc3R0eXBlNCA9IHsiRnJvc3RTaG90IiwiUG93ZXJGaXN0IiwiRGFyaXVzTm94aWFuVGFjdGljc09OSCIsIkVsaXNlUiIsIkpheEVtcG93ZXJUd28iLCJKYXhSZWxlbnRsZXNzQXNzYXVsdCIsIkpheWNlU3RhbmNlSHRHIiwiamF5Y2VzdGFuY2VndGgiLCJqYXljZWh5cGVyY2hhcmdlIiwiSnVkaWNhdG9yUmlnaHRlb3VzRnVyeSIsImtlbm5lbmxyY2FuY2VsIiwiS29nTWF3QmlvQXJjYW5lQmFycmFnZSIsIkxpc3NhbmRyYUUiLCJNb3JkZWthaXNlck1hY2VPZlNwYWRlcyIsIm1vcmRla2Fpc2VyY290Z2d1aWRlIiwiTmFzdXNRIiwiVGFrZWRvd24iLCJOb2N0dXJuZVBhcmFub2lhIiwiUXVpbm5SIiwiUmVuZ2FyUSIsIkhhbGx1Y2luYXRlRnVsbCIsIkRlYXRoc0NhcmVzc0Z1bGwiLCJTaXZpclciLCJUaHJlc2hRSW50ZXJuYWwiLCJ0aHJlc2hxaW50ZXJuYWwiLCJQaWNrQUNhcmQiLCJnb2xkY2FyZGxvY2siLCJyZWRjYXJkbG9jayIsImJsdWVjYXJkbG9jayIsIkZ1bGxBdXRvbWF0aWMiLCJWYXluZVR1bWJsZSIsIk1vbmtleUtpbmdEb3VibGVBdHRhY2siLCJZb3JpY2tTcGVjdHJhbCIsIlZpRSIsIlZvcnBhbFNwaWtlcyIsIkZpenpTZWFzdG9uZVBhc3NpdmUiLCJHYXJlblNsYXNoMyIsIkhlY2FyaW1SYW1wIiwibGVibGFuY3NsaWRlcmV0dXJuIiwibGVibGFuY3NsaWRlcmV0dXJubSIsIk9iZHVyYWN5IiwiVWR5clRpZ2VyU3RhbmNlIiwiVWR5clR1cnRsZVN0YW5jZSIsIlVkeXJCZWFyU3RhbmNlIiwiVXJnb3RIZWF0c2Vla2luZ01pc3NpbGUiLCJYZW5aaGFvQ29tYm9UYXJnZXQiLCJkcmF2ZW5zcGlubmluZyIsImRyYXZlbnJkb3VibGVjYXN0IiwiRmlvcmFEYW5jZSIsIkxlb25hU2hpZWxkT2ZEYXlicmVhayIsIk1hb2thaURyYWluMyIsIk5hdXRpbHVzUGllcmNpbmdHYXplIiwiUmVuZWt0b25QcmVFeGVjdXRlIiwiUml2ZW5GZW5nU2h1aUVuZ2luZSIsIlNoeXZhbmFEb3VibGVBdHRhY2siLCJzaHl2YW5hZG91YmxlYXR0YWNrZHJhZ29uIiwiU3luZHJhVyIsIlRhbG9uTm94aWFuRGlwbG9tYWN5IiwiVGFsb25DdXR0aHJvYXQiLCJ0YWxvbnJha2VtaXNzaWxlb25lIiwiVHJ1bmRsZVRyb2xsU21hc2giLCJWb2xpYmVhclEiLCJBYXRyb3hXIiwiYWF0cm94dzIiLCJBYXRyb3hXT05IQXR0YWNrTGlmZSIsIkppbnhRIiwiR2FyZW5RIiwieWFzdW9xIiwiWGVyYXRoQXJjYW5vcHVsc2VDaGFyZ2VVcCIsIlhlcmF0aExvY3VzT2ZQb3dlcjIiLCJ4ZXJhdGhsb2N1c3B1bHNlIiwidmVsa296cXNwbGl0YWN0aXZhdGUiLCJOZXRoZXJCbGFkZSIsIkdyYWdhc1FUb2dnbGUiLCJHcmFnYXNXIiwiU2lvblciLCJzaW9ucGFzc2l2ZXNwZWVkIn0NCmxvY2FsIGNhc3R0eXBlNSA9IHsiVmFydXNRIiwiWmFjRSIsIlZpUSIsIlNpb25RIn0NCmxvY2FsIGNhc3R0eXBlNiA9IHsiVmVsa296UU1pc3NpbGUiLCJLb2dNYXdRTWlzIiwiUmVuZ2FyRUZpbmFsIiwiUmVuZ2FyRUZpbmFsTUFYIiwiQnJhdW1RTWlzc2lsZSIsIkthcnRodXNEZWZpbGVTb3VuZER1bW15MiIsImduYXJxbWlzc2lsZSIsIkduYXJCaWdRTWlzc2lsZSIsIlNvcmFrYVdQYXJ0aWNsZU1pc3NpbGUifQ0KLS0sIlBvcHB5RGV2YXN0YXRpbmdCbG93Ii0tLCJEZWNlaXZlIiAtLSAsIkVsaXNlUlNwaWRlciINCmZ1bmN0aW9uIGdldFNwZWxsVHlwZSh1bml0LCBzcGVsbE5hbWUpDQogICAgICAgIHNwZWxsdHlwZSA9ICJVbmtub3duIg0KICAgICAgICBjYXN0dHlwZSA9IDENCiAgICAgICAgaWYgdW5pdCB+PSBuaWwgYW5kIHVuaXQudHlwZSA9PSAiQUlIZXJvQ2xpZW50IiB0aGVuDQogICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lID09IG5pbCBvciB1bml0OkdldFNwZWxsRGF0YShfUSkubmFtZSA9PSBuaWwgb3IgdW5pdDpHZXRTcGVsbERhdGEoX1cpLm5hbWUgPT0gbmlsIG9yIHVuaXQ6R2V0U3BlbGxEYXRhKF9FKS5uYW1lID09IG5pbCBvciB1bml0OkdldFNwZWxsRGF0YShfUikubmFtZSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJFcnJvciBuYW1lIG5pbCIsIGNhc3R0eXBlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lOmZpbmQoIlNpb25CYXNpY0F0dGFja1Bhc3NpdmUiKSBvciBzcGVsbE5hbWU6ZmluZCgienlyYXBhc3NpdmUiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHR5cGUgPSAiUCINCiAgICAgICAgICAgICAgICBlbHNlaWYgKHNwZWxsTmFtZTpmaW5kKCJCYXNpY0F0dGFjayIpIGFuZCBzcGVsbE5hbWUgfj0gIlNlanVhbmlCYXNpY0F0dGFja1ciKSBvciBzcGVsbE5hbWU6ZmluZCgiYmFzaWNhdHRhY2siKSBvciBzcGVsbE5hbWU6ZmluZCgiSmF5Y2VSYW5nZWRBdHRhY2siKSBvciBzcGVsbE5hbWUgPT0gIlNvbmFRQXR0YWNrIiBvciBzcGVsbE5hbWUgPT0gIlNvbmFXQXR0YWNrIiBvciBzcGVsbE5hbWUgPT0gIlNvbmFFQXR0YWNrIiBvciBzcGVsbE5hbWUgPT0gIk9iZHVyYWN5QXR0YWNrIiBvciBzcGVsbE5hbWUgPT0gIkduYXJCaWdBdHRhY2tUb3dlciIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3BlbGx0eXBlID0gIkJBdHRhY2siDQogICAgICAgICAgICAgICAgZWxzZWlmIHNwZWxsTmFtZTpmaW5kKCJDcml0QXR0YWNrIikgb3Igc3BlbGxOYW1lOmZpbmQoImNyaXRhdHRhY2siKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHR5cGUgPSAiQ0F0dGFjayINCiAgICAgICAgICAgICAgICBlbHNlaWYgdW5pdDpHZXRTcGVsbERhdGEoX1EpLm5hbWU6ZmluZChzcGVsbE5hbWUpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWxsdHlwZSA9ICJRIg0KICAgICAgICAgICAgICAgIGVsc2VpZiB1bml0OkdldFNwZWxsRGF0YShfVykubmFtZTpmaW5kKHNwZWxsTmFtZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3BlbGx0eXBlID0gIlciDQogICAgICAgICAgICAgICAgZWxzZWlmIHVuaXQ6R2V0U3BlbGxEYXRhKF9FKS5uYW1lOmZpbmQoc3BlbGxOYW1lKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHR5cGUgPSAiRSINCiAgICAgICAgICAgICAgICBlbHNlaWYgdW5pdDpHZXRTcGVsbERhdGEoX1IpLm5hbWU6ZmluZChzcGVsbE5hbWUpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWxsdHlwZSA9ICJSIg0KICAgICAgICAgICAgICAgIGVsc2VpZiBzcGVsbE5hbWU6ZmluZCgiU3VtbW9uZXIiKSBvciBzcGVsbE5hbWU6ZmluZCgic3VtbW9uZXIiKSBvciBzcGVsbE5hbWUgPT0gInRlbGVwb3J0Y2FuY2VsIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHR5cGUgPSAiU3VtbW9uZXIiDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGx0eXBlID09ICJVbmtub3duIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpPTEsI090aGVycyBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNwZWxsTmFtZTpmaW5kKE90aGVyc1tpXSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlbGx0eXBlID0gIk90aGVyIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGx0eXBlID09ICJVbmtub3duIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpPTEsI0l0ZW1zIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lOmZpbmQoSXRlbXNbaV0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWxsdHlwZSA9ICJJdGVtIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGx0eXBlID09ICJVbmtub3duIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpPTEsI1BTcGVsbHMgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzcGVsbE5hbWU6ZmluZChQU3BlbGxzW2ldKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHR5cGUgPSAiUCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNwZWxsdHlwZSA9PSAiVW5rbm93biIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaT0xLCNRU3BlbGxzIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lOmZpbmQoUVNwZWxsc1tpXSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlbGx0eXBlID0gIlEiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzcGVsbHR5cGUgPT0gIlVua25vd24iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGk9MSwjV1NwZWxscyBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNwZWxsTmFtZTpmaW5kKFdTcGVsbHNbaV0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWxsdHlwZSA9ICJXIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGx0eXBlID09ICJVbmtub3duIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpPTEsI0VTcGVsbHMgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzcGVsbE5hbWU6ZmluZChFU3BlbGxzW2ldKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHR5cGUgPSAiRSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNwZWxsdHlwZSA9PSAiVW5rbm93biIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaT0xLCNSU3BlbGxzIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lOmZpbmQoUlNwZWxsc1tpXSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlbGx0eXBlID0gIlIiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZm9yIGk9MSwjTVNwZWxscyBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lID09IE1TcGVsbHNbaV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHR5cGUgPSBzcGVsbHR5cGUuLiJNIg0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBmb3IgaT0xLCNjYXN0dHlwZTIgZG8NCiAgICAgICAgICAgICAgICBpZiBzcGVsbE5hbWUgPT0gY2FzdHR5cGUyW2ldIHRoZW4gY2FzdHR5cGUgPSAyIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZm9yIGk9MSwjY2FzdHR5cGUzIGRvDQogICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lID09IGNhc3R0eXBlM1tpXSB0aGVuIGNhc3R0eXBlID0gMyBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGZvciBpPTEsI2Nhc3R0eXBlNCBkbw0KICAgICAgICAgICAgICAgIGlmIHNwZWxsTmFtZSA9PSBjYXN0dHlwZTRbaV0gdGhlbiBjYXN0dHlwZSA9IDQgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBmb3IgaT0xLCNjYXN0dHlwZTUgZG8NCiAgICAgICAgICAgICAgICBpZiBzcGVsbE5hbWUgPT0gY2FzdHR5cGU1W2ldIHRoZW4gY2FzdHR5cGUgPSA1IGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZm9yIGk9MSwjY2FzdHR5cGU2IGRvDQogICAgICAgICAgICAgICAgaWYgc3BlbGxOYW1lID09IGNhc3R0eXBlNltpXSB0aGVuIGNhc3R0eXBlID0gNiBlbmQNCiAgICAgICAgZW5kDQogDQogICAgICAgIHJldHVybiBzcGVsbHR5cGUsIGNhc3R0eXBlDQplbmQNCkFkZExvYWRDYWxsYmFjayggZnVuY3Rpb24oKQ0KDQoJSXRlbU5hbWVzCQkJCT0gew0KCQlbMzMwM10JCQkJPSAiQXJjaEFuZ2Vsc0R1bW15U3BlbGwiLA0KCQlbMzAwN10JCQkJPSAiQXJjaEFuZ2Vsc0R1bW15U3BlbGwiLA0KCQlbMzE0NF0JCQkJPSAiQmlsZ2V3YXRlckN1dGxhc3MiLA0KCQlbMzE4OF0JCQkJPSAiSXRlbUJsYWNrZmlyZVRvcmNoIiwNCgkJWzMxNTNdCQkJCT0gIkl0ZW1Td29yZE9mRmVhc3RBbmRGYW1pbmUiLA0KCQlbMzQwNV0JCQkJPSAiVHJpbmtldFN3ZWVwZXJMdmwxIiwNCgkJWzM0MTFdCQkJCT0gIlRyaW5rZXRPcmJMdmwxIiwNCgkJWzMxNjZdCQkJCT0gIlRyaW5rZXRUb3RlbUx2bDEiLA0KCQlbMzQ1MF0JCQkJPSAiT2RpblRyaW5rZXRSZXZpdmUiLA0KCQlbMjA0MV0JCQkJPSAiSXRlbUNyeXN0YWxGbGFzayIsDQoJCVsyMDU0XQkJCQk9ICJJdGVtS2luZ1Bvcm9TbmFjayIsDQoJCVsyMTM4XQkJCQk9ICJFbGl4aXJPZklyb24iLA0KCQlbMjEzN10JCQkJPSAiRWxpeGlyT2ZSdWluIiwNCgkJWzIxMzldCQkJCT0gIkVsaXhpck9mU29yY2VyeSIsDQoJCVsyMTQwXQkJCQk9ICJFbGl4aXJPZldyYXRoIiwNCgkJWzMxODRdCQkJCT0gIk9kaW5FbnRyb3BpY0NsYXltb3JlIiwNCgkJWzIwNTBdCQkJCT0gIkl0ZW1NaW5pV2FyZCIsDQoJCVszNDAxXQkJCQk9ICJIZWFsdGhCb21iIiwNCgkJWzMzNjNdCQkJCT0gIlRyaW5rZXRPcmJMdmwzIiwNCgkJWzMwOTJdCQkJCT0gIkl0ZW1HbGFjaWFsU3Bpa2VDYXN0IiwNCgkJWzM0NjBdCQkJCT0gIkFzY1dhcnAiLA0KCQlbMzM2MV0JCQkJPSAiVHJpbmtldFRvdGVtTHZsMyIsDQoJCVszMzYyXQkJCQk9ICJUcmlua2V0VG90ZW1Mdmw0IiwNCgkJWzMxNTldCQkJCT0gIkhleHRlY2hTd2VlcGVyIiwNCgkJWzIwNTFdCQkJCT0gIkl0ZW1Ib3JuIiwNCgkJWzIwMDNdCQkJICAgID0gIlJlZ2VuZXJhdGlvblBvdGlvbiIsDQoJCVszMTQ2XQkJCQk9ICJIZXh0ZWNoR3VuYmxhZGUiLA0KCQlbMzE4N10JCQkJPSAiSGV4dGVjaFN3ZWVwZXIiLA0KCQlbMzE5MF0JCQkJPSAiSXJvblN0eWx1cyIsDQoJCVsyMDA0XQkJCQk9ICJGbGFza09mQ3J5c3RhbFdhdGVyIiwNCgkJWzMxMzldCQkJCT0gIkl0ZW1NZXJjdXJpYWwiLA0KCQlbMzIyMl0JCQkJPSAiSXRlbU1vcmVsbG9zQmFuZSIsDQoJCVszMDQyXQkJCQk9ICJNdXJhbWFuYSIsDQoJCVszMDQzXQkJCQk9ICJNdXJhbWFuYSIsDQoJCVszMTgwXQkJCQk9ICJPZHluc1ZlaWwiLA0KCQlbMzA1Nl0JCQkJPSAiSXRlbUZhaXRoU2hha2VyIiwNCgkJWzIwNDddCQkJCT0gIk9yYWNsZUV4dHJhY3RTaWdodCIsDQoJCVszMzY0XQkJCQk9ICJUcmlua2V0U3dlZXBlckx2bDMiLA0KCQlbMjA1Ml0JCQkJPSAiSXRlbVBvcm9TbmFjayIsDQoJCVszMTQwXQkJCQk9ICJRdWlja3NpbHZlclNhc2giLA0KCQlbMzE0M10JCQkJPSAiUmFuZHVpbnNPbWVuIiwNCgkJWzMwNzRdCQkJCT0gIkl0ZW1UaWFtYXRDbGVhdmUiLA0KCQlbMzgwMF0JCQkJPSAiSXRlbVJpZ2h0ZW91c0dsb3J5IiwNCgkJWzIwNDVdCQkJCT0gIkl0ZW1HaG9zdFdhcmQiLA0KCQlbMzM0Ml0JCQkJPSAiVHJpbmtldE9yYkx2bDEiLA0KCQlbMzA0MF0JCQkJPSAiSXRlbVNlcmFwaHNFbWJyYWNlIiwNCgkJWzMwNDhdCQkJCT0gIkl0ZW1TZXJhcGhzRW1icmFjZSIsDQoJCVsyMDQ5XQkJCQk9ICJJdGVtR2hvc3RXYXJkIiwNCgkJWzMzNDVdCQkJCT0gIk9kaW5Ucmlua2V0UmV2aXZlIiwNCgkJWzIwNDRdCQkJCT0gIlNpZ2h0V2FyZCIsDQoJCVszMzQxXQkJCQk9ICJUcmlua2V0U3dlZXBlckx2bDEiLA0KCQlbMzA2OV0JCQkJPSAic2h1cmVseWFzY3Jlc3QiLA0KCQlbMzU5OV0JCQkJPSAiS2FsaXN0YVBTcGVsbENhc3QiLA0KCQlbMzE4NV0JCQkJPSAiSGV4dGVjaFN3ZWVwZXIiLA0KCQlbMzA3N10JCQkJPSAiSXRlbVRpYW1hdENsZWF2ZSIsDQoJCVsyMDA5XQkJCQk9ICJJdGVtTWluaVJlZ2VuUG90aW9uIiwNCgkJWzIwMTBdCQkJCT0gIkl0ZW1NaW5pUmVnZW5Qb3Rpb24iLA0KCQlbMzAyM10JCQkJPSAiSXRlbVdyYWl0aENvbGxhciIsDQoJCVszMjkwXQkJCQk9ICJJdGVtV3JhaXRoQ29sbGFyIiwNCgkJWzIwNDNdCQkJCT0gIlZpc2lvbldhcmQiLA0KCQlbMzM0MF0JCQkJPSAiVHJpbmtldFRvdGVtTHZsMSIsDQoJCVszMDkwXQkJCQk9ICJaaG9ueWFzSG91cmdsYXNzIiwNCgkJWzMxNTRdCQkJCT0gIndyaWdnbGVsYW50ZXJuIiwNCgkJWzMxNDJdCQkJCT0gIllvdW11c0JsYWRlIiwNCgkJWzMxNTddCQkJCT0gIlpob255YXNIb3VyZ2xhc3MiLA0KCQlbMzUxMl0JCQkJPSAiSXRlbVZvaWRHYXRlIiwNCgkJWzMxMzFdCQkJCT0gIkl0ZW1Tb1REIiwNCgkJWzMxMzddCQkJCT0gIkl0ZW1EZXJ2aXNoQmxhZGUiLA0KCQlbMzM1Ml0JCQkJPSAiUmVsaWNTcG90dGVyIiwNCgkJWzMzNTBdCQkJCT0gIlRyaW5rZXRUb3RlbUx2bDIiLA0KCX0NCgkNCglfRy5JVEVNXzEJCQkJPSAwNg0KCV9HLklURU1fMgkJCQk9IDA3DQoJX0cuSVRFTV8zCQkJCT0gMDgNCglfRy5JVEVNXzQJCQkJPSAwOQ0KCV9HLklURU1fNQkJCQk9IDEwDQoJX0cuSVRFTV82CQkJCT0gMTENCglfRy5JVEVNXzcJCQkJPSAxMg0KCQ0KCV9fX0dldEludmVudG9yeVNsb3RJdGVtCT0gcmF3Z2V0KF9HLCAiR2V0SW52ZW50b3J5U2xvdEl0ZW0iKQ0KCV9HLkdldEludmVudG9yeVNsb3RJdGVtCT0gR2V0U2xvdEl0ZW0NCgkNCgkNCmVuZCkNCg0KZnVuY3Rpb24gR2V0U2xvdEl0ZW0oaWQsIHVuaXQpDQoJDQoJdW5pdCAJCT0gdW5pdCBvciBteUhlcm8NCg0KCWlmIChub3QgSXRlbU5hbWVzW2lkXSkgdGhlbg0KCQlyZXR1cm4gX19fR2V0SW52ZW50b3J5U2xvdEl0ZW0oaWQsIHVuaXQpDQoJZW5kDQoNCglsb2NhbCBuYW1lCT0gSXRlbU5hbWVzW2lkXQ0KCQ0KCWZvciBzbG90ID0gSVRFTV8xLCBJVEVNXzcgZG8NCgkJbG9jYWwgaXRlbSA9IHVuaXQ6R2V0U3BlbGxEYXRhKHNsb3QpLm5hbWUNCgkJaWYgKCgjaXRlbSA+IDApIGFuZCAoaXRlbTpsb3dlcigpID09IG5hbWU6bG93ZXIoKSkpIHRoZW4NCgkJCXJldHVybiBzbG90DQoJCWVuZA0KCWVuZA0KDQplbmQ="), nil, "bt", _ENV))()
  --Easy copy line
